<!doctype html>
<html lang="en">
<head>
  <script>
/* Normalize to same-origin & de-www everything (requests and attributes) */
(function () {
  var ORIGIN = (location.origin || (location.protocol + '//' + location.host)).replace(/\/$/,'');
  function sameOrigin(u){
    try{
      var a = document.createElement('a'); a.href = u;
      var host = (a.protocol + '//' + a.host).replace(/^https?:\/\/www\./, 'https://');
      var me   = ORIGIN.replace(/^https?:\/\/www\./, 'https://');
      if (host !== me && /^https?:\/\/(www\.)?cruisinginthewake\.com/i.test(a.href)) {
        a.protocol = location.protocol; a.host = location.host;
        return a.href;
      }
    }catch(e){}
    return u;
  }

  /* 1) Rewrite any hardcoded attributes to same-origin */
  function pin(){
    var SEL = [
      'a[href^="http"]','img[src^="http"]','link[href^="http"]','script[src^="http"]','source[src^="http"]'
    ].join(',');
    document.querySelectorAll(SEL).forEach(function(el){
      var attr = el.hasAttribute('href') ? 'href' : 'src';
      var v = el.getAttribute(attr);
      if (!v) return;
      el.setAttribute(attr, sameOrigin(v).replace(/^http:\/\//,'https://')); // also kill http:
    });
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', pin, {once:true});
  } else { pin(); }

  /* 2) Intercept fetch() that points at https://www.cruisinginthewake.com/... */
  var _fetch = window.fetch;
  window.fetch = function(resource, init){
    try{
      if (typeof resource === 'string') {
        resource = sameOrigin(resource);
      } else if (resource && resource.url) {
        resource = sameOrigin(resource.url);
      }
    }catch(e){}
    return _fetch.apply(this, arguments.length ? [resource, init] : arguments);
  };

  /* 3) Tiny helper for building absolute same-origin paths */
  window._abs = function(p){ p = String(p||''); if (!p.startsWith('/')) p = '/' + p; return ORIGIN + p; };
})();
</script>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="canonical" href="https://www.cruisinginthewake.com/ships/rcl/adventure-of-the-seas.html"/>
<meta name="description" content="Royal Caribbean’s Adventure of the Seas — photos, dining, cabins, accessibility notes, videos, tips, and cross-links to ports & restaurants."/>

<!-- SEO / Social -->
<title>Adventure of the Seas — Deck Plans, Live Tracker & Videos | In the Wake</title>
<meta name="description" content="Explore Adventure of the Seas with deck plans, a live ship tracker, dining options, and real stateroom videos. Plan your Royal Caribbean voyage with In the Wake." />
<link rel="canonical" href="https://cruisinginthewake.com/ships/rcl/adventure-of-the-seas.html" />

<meta property="og:type" content="website" />
<meta property="og:site_name" content="In the Wake" />
<meta property="og:url" content="https://cruisinginthewake.com/ships/rcl/adventure-of-the-seas.html" />
<meta property="og:title" content="Adventure of the Seas — Deck Plans, Live Tracker & Videos | In the Wake" />
<meta property="og:description" content="Deck plans, live tracker, dining, and stateroom videos for Adventure of the Seas." />
<meta property="og:image" content="https://cruisinginthewake.com/assets/ships/adventure-of-the-seas-hero.jpg?v=2.256" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Adventure of the Seas — Deck Plans, Live Tracker & Videos | In the Wake" />
<meta name="twitter:description" content="Deck plans, live tracker, dining, and stateroom videos for Adventure of the Seas." />
<meta name="twitter:image" content="https://cruisinginthewake.com/assets/ships/adventure-of-the-seas-hero.jpg" />

  <!-- Analytics -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>

  <!-- Standards-friendly absolute URL builder + same-origin normalizer -->
  <script>
  (function(){
    var ORIGIN = (location.origin || (location.protocol + '//' + location.host)).replace(/\/$/,'');
    window._abs = function(path){
      path = String(path||'');
      if (!path.startsWith('/')) path = '/' + path;
      return ORIGIN + path;
    };
    // Normalize any hardcoded "www." hosts to the current origin to avoid 301→CORS
    function pinToCurrentOrigin(){
      var SEL = [
        'a[href^="https://www.cruisinginthewake.com/"]',
        'img[src^="https://www.cruisinginthewake.com/"]',
        'link[href^="https://www.cruisinginthewake.com/"]',
        'script[src^="https://www.cruisinginthewake.com/"]'
      ].join(',');
      document.querySelectorAll(SEL).forEach(function(el){
        var attr = el.hasAttribute('href') ? 'href' : 'src';
        try{
          var u = new URL(el.getAttribute(attr), ORIGIN);
          u.host = location.host; u.protocol = location.protocol;
          el.setAttribute(attr, u.toString());
        }catch(e){}
      });
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', pinToCurrentOrigin, {once:true});
    } else { pinToCurrentOrigin(); }
  })();
  </script>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  
  <!-- Global CSS -->
  <link rel="stylesheet" href="https://www.cruisinginthewake.com/assets/styles.css?v=2.256"/>

  <!-- (No static Swiper link here; loader below injects local + CDN fallbacks) -->

  <style>
  /* --- First Look pre-init: prevent horizontal stacking --- */
  .swiper.firstlook:not(.swiper-initialized){ overflow:hidden; }
  .swiper.firstlook:not(.swiper-initialized) .swiper-wrapper{ display:block; }
  .swiper.firstlook:not(.swiper-initialized) .swiper-slide{ display:none; }
  .swiper.firstlook:not(.swiper-initialized) .swiper-slide:first-child{ display:block; }
  .swiper.firstlook img{ width:100%; height:auto; display:block; }

  /* Show navigation arrows */
  .swiper .swiper-button-prev, .swiper .swiper-button-next{
    display:flex; align-items:center; justify-content:center;
  }
  .swiper .swiper-button-prev::after, .swiper .swiper-button-next::after{ font-size:22px; }

  /* Videos */
  .swiper.videos .swiper-button-prev,
  .swiper.videos .swiper-button-next,
  .swiper.videos .swiper-pagination{ z-index:6; }
  .swiper.videos iframe{ width:100%; aspect-ratio:16/9; height:auto; border:0; display:block; }

  /* Fallback carousel when Swiper JS is unavailable */
  .carousel-fallback{ position:relative; }
  .carousel-fallback .swiper-wrapper{
    display:flex; flex-wrap:nowrap; overflow-x:auto; scroll-snap-type:x mandatory;
    -webkit-overflow-scrolling:touch; gap:0; scroll-behavior:smooth;
  }
  .carousel-fallback .swiper-slide{ flex:0 0 100%; max-width:100%; scroll-snap-align:start; }
  .carousel-fallback .swiper-button-prev::after, .carousel-fallback .swiper-button-next::after{ display:none; }
  .carousel-fallback .swiper-button-prev, .carousel-fallback .swiper-button-next{
    position:absolute; top:50%; transform:translateY(-50%);
    background:rgba(0,64,160,.15); border:2px solid #1e66ff; color:#1e66ff;
    padding:.4rem .55rem; border-radius:.5rem; cursor:pointer; user-select:none; z-index:7;
    width:auto; height:auto; margin:0;
  }
  .carousel-fallback .swiper-button-prev{ left:.5rem; }
  .carousel-fallback .swiper-button-next{ right:.5rem; }

  /* Logbook utility */
  .voyage-tips-wrapper{ display:flex; justify-content:center; margin:1.5rem 0; }
  .card.voyage-tips{ max-width:800px; width:100%; }

  /* Misc utility */
  .hidden{ display:none !important; }
  .pills, .class-pills, .related-pills, .button-group{ justify-content:center; text-align:center }
  .pills, .class-pills, .related-pills{ display:flex; gap:.5rem; flex-wrap:wrap }
  .firstlook a{ cursor:zoom-in; }
  </style>
</head>

<body class="page no-hero-filter">
<header class="hero-header">
  <div class="navbar">
    <div class="brand">
      <img src="https://www.cruisinginthewake.com/assets/logo_wake.png" alt="In the Wake wordmark"/>
    </div>
    <nav class="pills" aria-label="Site">
      <a href="https://www.cruisinginthewake.com/index.html">Home</a>
      <a href="https://www.cruisinginthewake.com/ships/ships.html">Ships</a>
      <a href="https://www.cruisinginthewake.com/restaurants.html">Restaurants &amp; Menus</a>
      <a href="https://www.cruisinginthewake.com/ports.html">Ports</a>
      <a href="https://www.cruisinginthewake.com/disability-at-sea.html">Disability at Sea</a>
      <a href="https://www.cruisinginthewake.com/drink-packages.html">Drink Packages</a>
      <a href="https://www.cruisinginthewake.com/packing-lists.html">Packing Lists</a>
      <a href="https://www.cruisinginthewake.com/cruise-lines/royal-caribbean.html">Cruise Lines</a>
    </nav>
  </div>

  <div class="hero" role="img" aria-label="Adventure of the Seas hero image">
    <div class="latlon-grid" aria-hidden="true">
      <svg viewBox="0 0 100 60" preserveAspectRatio="none">
        <g class="grid-lines" stroke-width="0.35">
          <line x1="10" y1="0" x2="10" y2="60"/><line x1="20" y1="0" x2="20" y2="60"/>
          <line x1="30" y1="0" x2="30" y2="60"/><line x1="40" y1="0" x2="40" y2="60"/>
          <line x1="50" y1="0" x2="50" y2="60"/><line x1="60" y1="0" x2="60" y2="60"/>
          <line x1="70" y1="0" x2="70" y2="60"/><line x1="80" y1="0" x2="80" y2="60"/>
          <line x1="90" y1="0" x2="90" y2="60"/><line x1="0" y1="10" x2="100" y2="10"/>
          <line x1="0" y1="20" x2="100" y2="20"/><line x1="0" y1="30" x2="100" y2="30"/>
          <line x1="0" y1="40" x2="100" y2="40"/>
        </g>
      </svg>
    </div>
    <img class="hero-compass" src="https://www.cruisinginthewake.com/assets/compass_rose.svg" alt="" aria-hidden="true"/>
    <div class="hero-title">
      <img class="logo" src="https://www.cruisinginthewake.com/assets/logo_wake.png" alt="In the Wake">
      <div class="tagline">A Cruise Traveler’s Logbook</div>
    </div>
    <div class="hero-credit">
      <a class="pill long" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">
        Photo © Flickers of Majesty — Instagram
      </a>
    </div>
  </div>
</header>

<main class="wrap" id="content">
  <!-- Row 1: First Look (left) + Dining (right) -->
  <section class="grid-2">
    <!-- First Look + Stats -->
    <section class="card" aria-labelledby="first-look">
      <h2 id="first-look">A First Look</h2>

      <!-- Photo Swiper -->
      <div class="swiper firstlook" aria-label="Adventure photo carousel">
        <div class="swiper-wrapper" id="adventurePhotos">
          <div class="swiper-slide">
            <figure>
              <a href="https://www.cruisinginthewake.com/ships/rcl/images/Adventure_of_the_Seas_docked_in_Aruba_2024.jpg" target="_blank" rel="noopener noreferrer">
                <img src="https://commons.wikimedia.org/wiki/Special:FilePath/Adventure_of_the_Seas_docked_in_Aruba_2024.jpg?width=1280"
                     alt="Adventure of the Seas docked in Aruba (2024)" loading="lazy" referrerpolicy="no-referrer"/>
              </a>
            </figure>
          </div>
          <div class="swiper-slide">
            <figure>
              <a href="https://www.cruisinginthewake.com/ships/rcl/images/Adventure_of_the_Seas_pool_area.jpg" target="_blank" rel="noopener noreferrer">
                <img src="https://commons.wikimedia.org/wiki/Special:FilePath/Adventure_of_the_Seas_pool_area.jpg?width=1280"
                     alt="Adventure of the Seas pool area" loading="lazy" referrerpolicy="no-referrer"/>
              </a>
            </figure>
          </div>
          <div class="swiper-slide">
            <figure>
              <a href="https://www.cruisinginthewake.com/ships/rcl/images/Adventure_of_the_seas_in_Willemstad.jpg" target="_blank" rel="noopener noreferrer">
                <img src="https://commons.wikimedia.org/wiki/Special:FilePath/Adventure_of_the_seas_in_Willemstad.jpg?width=1280"
                     alt="Adventure of the Seas in Willemstad" loading="lazy" referrerpolicy="no-referrer"/>
              </a>
            </figure>
          </div>
        </div>
        <div class="swiper-pagination" aria-hidden="true"></div>
        <div class="swiper-button-prev" aria-label="Previous image"></div>
        <div class="swiper-button-next" aria-label="Next image"></div>
      </div>

      <!-- Ship stats (auto, with inline fallback) -->
      <section class="ship-stats card mini" aria-labelledby="statsHeading">
        <h3 id="statsHeading">Adventure at a Glance</h3>
        <div id="ship-stats" class="stats-grid" data-slug="adventure-of-the-seas"></div>
        <script type="application/json" id="ship-stats-fallback">
          {
            "slug": "adventure-of-the-seas",
            "name": "Adventure of the Seas",
            "class": "Voyager Class",
            "entered_service": 2001,
            "gt": "138,193 GT",
            "guests": "3,807 (max)",
            "crew": "1,185",
            "length": "1,020 ft (311 m)",
            "beam": "157.5 ft (48 m)",
            "registry": "Bahamas"
          }
        </script>
      </section>
    </section>

    <!-- Dining (driven by your canonical script) -->
    <section id="dining-card" class="card" data-ship="Adventure of the Seas" aria-labelledby="diningHeading">
      <h2 id="diningHeading">Dining Venues on Adventure of the Seas</h2>
      <img class="card-hero"
           src="https://upload.wikimedia.org/wikipedia/commons/1/11/Cordelia_Empress_Food_Court.jpg"
           alt="Food court seating with ocean view" loading="lazy"/>
      <div class="dining-content" id="dining-content" aria-live="polite"></div>
      <script type="application/json" id="dining-data-source">
        {
          "provider":"rcl",
          "json":"https://www.cruisinginthewake.com/assets/data/rc-restaurants.json",
          "ship_slug":"adventure-of-the-seas",
          "aliases":["Adventure of the Seas","Adventure Of The Seas"]
        }
      </script>
      <script>
      // Rewrite dining JSON to same-origin absolute
      (function fixDiningJSON(){
        function run(){
          var el = document.getElementById('dining-data-source'); if(!el) return;
          try{
            var obj = JSON.parse(el.textContent||'{}');
            if (obj && obj.json) { obj.json = _abs('/assets/data/rc-restaurants.json'); el.textContent = JSON.stringify(obj); }
          }catch(e){}
        }
        if (document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', run, {once:true}); } else { run(); }
      })();
      </script>
    </section>
  </section>

  <!-- Deck Plans + Live Tracker -->
  <section class="grid-2">
    <section class="card" aria-labelledby="deck-plans">
      <h2 id="deck-plans">Ship Map (Deck Plans)</h2>
      <p>From sea days to disembarkation, let this be your compass to Adventure—charting decks, wonders, and waypoints at sea.</p>
      <p>
        <a class="btn" href="https://www.royalcaribbean.com/cruise-ships/adventure-of-the-seas/deck-plans" target="_blank" rel="noopener noreferrer">
          Open Official Deck Plans →
        </a>
         <li><img src="https://www.cruisinginthewake.com/assets/ship-map.png"/></li>
      </p>
    </section>

    <section class="card itinerary" aria-labelledby="liveTrackHeading" data-imo="9167227" data-name="ADVENTURE-OF-THE-SEAS">
      <h2 id="liveTrackHeading">Where Is Adventure Right Now?</h2>
      <p>See the ship’s current position, speed, and next port on a live tracker. If the map doesn’t render, the fallback link opens the live vessel page.</p>

      <!-- Primary (try widget) -->
      <div id="vf-map-adventure" class="vf-map" role="region"
           aria-label="Live ship map for Adventure of the Seas"
           style="width:100%;height:300px;background:var(--sky)"></div>

      <!-- Fallback (details URL) -->
      <iframe class="live-map hidden"
        title="Live ship tracker for Adventure of the Seas"
        width="100%" height="300" loading="lazy" allowfullscreen
        aria-label="Live ship tracker for Adventure of the Seas"
        data-slug="ADVENTURE-OF-THE-SEAS"></iframe>

      <p class="tiny">If the embedded map doesn’t load,
        <a id="vf-direct" href="#" target="_blank" rel="noopener noreferrer">open the live tracker on VesselFinder →</a>
      </p>
    </section>
  </section>

  <!-- Logbook -->
  <section class="card note-kens-logbook" aria-labelledby="personal-review">
    <h2 id="personal-review">The Logbook — Real Guest Stories</h2>
    <p class="pill">Full disclosure: I have not yet sailed [Ship Name]. Until I do, this Logbook is an aggregate of vetted guest soundings, taken in their own wake, trimmed and edited to our standards.</p>
    <div id="logbook" class="prose" aria-live="polite"><p class="small">Loading stories…</p></div>
  </section>

  <!-- Videos -->
  <section class="card" aria-labelledby="video-highlights" data-line="rcl" data-ship-slug="adventure-of-the-seas">
    <h2 id="video-highlights">Watch: Adventure Highlights</h2>
    <p class="small">Swipe or use the arrow buttons to explore the ship, top features, and staterooms by type. Includes a disabled perspective when available.</p>
    <div class="swiper videos" aria-label="Featured video carousel" role="region">
      <div class="swiper-wrapper" id="featuredVideos"></div>
      <div class="swiper-pagination" aria-hidden="true"></div>
      <div class="swiper-button-prev" aria-label="Previous slide"></div>
      <div class="swiper-button-next" aria-label="Next slide"></div>
    </div>
  </section>

  <!-- Related -->
  <section class="grid-2">
    <section class="card carousel related-ships" aria-labelledby="related-ships">
      <h2 id="related-ships" class="card-title">Voyager Class — Sister Ships</h2>
      <div class="related-pills" aria-label="Voyager-class ships">
        <a class="pill" href="https://www.cruisinginthewake.com/ships/rcl/explorer-of-the-seas.html">Explorer of the Seas</a>
        <a class="pill" href="https://www.cruisinginthewake.com/ships/rcl/mariner-of-the-seas.html">Mariner of the Seas</a>
        <a class="pill" href="https://www.cruisinginthewake.com/ships/rcl/navigator-of-the-seas.html">Navigator of the Seas</a>
        <a class="pill" href="https://www.cruisinginthewake.com/ships/rcl/voyager-of-the-seas.html">Voyager of the Seas</a>
      </div>
      <p style="text-align:center"><a href="https://www.cruisinginthewake.com/ships/ships.html" class="btn">See All Ships</a></p>
    </section>

    <section class="card carousel related-classes" aria-labelledby="related-classes">
      <h2 id="related-classes" class="card-title">Explore Royal Caribbean Classes</h2>
      <p class="small">Hop between ship classes to compare size, venues, and vibes.</p>
      <div class="class-pills">
        <a class="pill" href="https://www.cruisinginthewake.com/cruise-lines/royal-caribbean.html#oasis">Oasis Class</a>
        <a class="pill" href="https://www.cruisinginthewake.com/cruise-lines/royal-caribbean.html#quantum">Quantum Class</a>
        <a class="pill" href="https://www.cruisinginthewake.com/cruise-lines/royal-caribbean.html#freedom">Freedom Class</a>
        <a class="pill" href="https://www.cruisinginthewake.com/cruise-lines/royal-caribbean.html#voyager">Voyager Class</a>
        <a class="pill" href="https://www.cruisinginthewake.com/cruise-lines/royal-caribbean.html#radiance">Radiance Class</a>
        <a class="pill" href="https://www.cruisinginthewake.com/cruise-lines/royal-caribbean.html#vision">Vision Class</a>
        <a class="pill" href="https://www.cruisinginthewake.com/cruise-lines/royal-caribbean.html#icon">Icon Class</a>
      </div>
      <p style="text-align:center"><a href="https://www.cruisinginthewake.com/ships/ships.html" class="btn">Browse All Ships</a></p>
    </section>
  </section>

  <!-- Attribution -->
  <section class="card" aria-labelledby="attribution">
    <h2 id="attribution">Attribution &amp; Credits</h2>
    <ul>
      <li>Photos (First Look):
        <ul>
          <li>“Adventure of the Seas docked in Aruba 2024” — <a href="https://commons.wikimedia.org/wiki/File:Adventure_of_the_Seas_docked_in_Aruba_2024.jpg" target="_blank" rel="noopener noreferrer">Wikimedia Commons</a> (CC BY-SA 4.0).</li>
          <li>“Adventure of the Seas pool area” — <a href="https://commons.wikimedia.org/wiki/File:Adventure_of_the_Seas_pool_area.jpg" target="_blank" rel="noopener noreferrer">Wikimedia Commons</a> (CC BY-SA 4.0).</li>
          <li>“Adventure of the seas in Willemstad” — <a href="https://commons.wikimedia.org/wiki/File:Adventure_of_the_seas_in_Willemstad.jpg" target="_blank" rel="noopener noreferrer">Wikimedia Commons</a> (CC BY-SA; see file page for details).</li>
        </ul>
      </li>
      <li>Videos: curated from green-list sources (YouTube); titles inside embeds.</li>
      <li>Map: © VesselFinder — embedded per their widget documentation.</li>
    </ul>
    <p class="tiny">All rights reserved where applicable.</p>
  </section>
</main>

<footer class="wrap">© 2025 In the Wake — A Cruise Traveler’s Logbook</footer>

<!-- Swiper robust loader: local /vendor/swiper + CDN fallbacks -->
<script>
(function ensureSwiper(){
  function addCSS(h){ var l=document.createElement('link'); l.rel='stylesheet'; l.href=h; document.head.appendChild(l); }
  function addJS(s, cb){ var el=document.createElement('script'); el.src=s; el.async=true; el.onload=cb; el.onerror=function(){}; document.head.appendChild(el); }
  function ready(){ return !!window.Swiper; }
  function init(){
    if (!ready()) return;
    if (document.querySelector('.swiper.firstlook')){
      new Swiper('.swiper.firstlook', {
        loop:false, lazy:true, watchOverflow:true,
        pagination:{ el:'.swiper.firstlook .swiper-pagination', clickable:true },
        navigation:{ nextEl:'.swiper.firstlook .swiper-button-next', prevEl:'.swiper.firstlook .swiper-button-prev' },
        a11y:{ enabled:true }
      });
    }
    if (document.querySelector('.swiper.videos .swiper-slide')){
      new Swiper('.swiper.videos', {
        loop:false, lazy:true, watchOverflow:true,
        pagination:{ el:'.swiper.videos .swiper-pagination', clickable:true },
        navigation:{ nextEl:'.swiper.videos .swiper-button-next', prevEl:'.swiper.videos .swiper-button-prev' },
        a11y:{ enabled:true }
      });
    }
  }

  /* ✅ Local paths */
  var localCSS = _abs('/vendor/swiper/swiper-bundle.min.css');
  var localJS  = _abs('/vendor/swiper/swiper-bundle.min.js');

  /* ✅ CDN fallbacks */
  var cdnCSS1='https://unpkg.com/swiper@11/swiper-bundle.min.css';
  var cdnJS1 ='https://unpkg.com/swiper@11/swiper-bundle.min.js';
  var cdnCSS2='https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css';
  var cdnJS2 ='https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js';

  // Start local
  addCSS(localCSS); addJS(localJS, init);

  // If not ready quickly, try CDNs (in order)
  var t0=Date.now();
  (function wait(){
    if (ready()) return init();
    if (Date.now()-t0 > 700){
      addCSS(cdnCSS1); addJS(cdnJS1, init);
      setTimeout(function(){
        if (!ready()){ addCSS(cdnCSS2); addJS(cdnJS2, init); }
      }, 900);
      return;
    }
    setTimeout(wait, 70);
  })();
})();
</script>

<!-- Dining card (canonical) -->
<script src="https://www.cruisinginthewake.com/assets/js/dining-card.js?v=2.256" defer></script>

<!-- Videos: JSON-driven + strict Adventure-only filter (same-origin absolute) -->
<script>
(function initVideos(){
  var sec  = document.querySelector('[aria-labelledby="video-highlights"]');
  if(!sec) return;

  var line = (sec.getAttribute('data-line') || 'rcl').trim();
  var slug = (sec.getAttribute('data-ship-slug') || 'adventure-of-the-seas').trim();
  var WRAP = document.getElementById('featuredVideos'); if(!WRAP) return;
  var CONTAINER = sec.querySelector('.swiper.videos');

  var VIDEO_JSON_URLS = [
    _abs('/ships/' + line + '/assets/videos/' + slug + '.json'),
    _abs('/videos/' + slug + '.json') // optional second location
  ];

  function fetchFirst(urls, i){
    i = i || 0;
    if (i >= urls.length) return Promise.resolve(null);
    return fetch(urls[i], {cache:'no-store'})
      .then(function(r){ return r.ok ? r.json() : fetchFirst(urls, i+1); })
      .catch(function(){ return fetchFirst(urls, i+1); });
  }

  function canonCat(k){
    var map = {'top-ten':'top ten','ship-walkthrough':'ship walk through','ship-overview':'ship walk through',
      'kids-family':'kids & family','pool-spa':'pool & spa','bars-lounges':'bars & lounges','private-island':'private island'};
    var s = String(k||'').toLowerCase().replace(/[-_]+/g,' ').trim();
    return map[s] || s || 'ship walk through';
  }
  function ytIdFromUrl(u){
    if(!u) return '';
    var m = u.match(/\/embed\/([A-Za-z0-9_-]{6,})/) ||
            u.match(/[?&]v=([A-Za-z0-9_-]{6,})/) ||
            u.match(/youtu\.be\/([A-Za-z0-9_-]{6,})/);
    return m ? m[1] : '';
  }
  function getId(v){ return v.videoId || ytIdFromUrl(v.embed_url || v.url || v.youtube || v.src || ''); }

  // strict ship filter (exclude other classes/lines)
  var POS = [/\bAdventure of the Seas\b/i, /\bAdventure\s*OTS\b/i, /\bRCL\s*Adventure\b/i, /\bRCI\s*Adventure\b/i, /\bVoyager[-\s]?class\b/i];
  var NEG = /\b(Utopia|Icon|Wonder|Symphony|Harmony|Oasis|Quantum|Odyssey|Anthem|Spectrum|MSC|Carnival|Princess|Celebrity|Divina|World America|Edge|Utopia OTS|Icon OTS|Star of the Seas|Jubilee)\b/i;
  function isAdventure(v){
    var shipSlug = String((v.ship_slug || (v.ship && v.ship.slug) || '')).toLowerCase();
    if (shipSlug === 'adventure-of-the-seas') return true;
    var shipName = v.ship_name || (v.ship && v.ship.name) || '';
    var blob = (v.title||'') + '\n' + (v.description||'') + '\n' + (Array.isArray(v.tags)?v.tags.join(' '):'') + '\n' + shipName;
    if (NEG.test(blob)) return false;
    return POS.some(function(rx){ return rx.test(blob); });
  }

  function rankScore(v){
    var s = Number(v.priority || v.rank || v.weight || 0) || 0;
    var bag = (v.title||'') + ' ' + (v.description||'') + ' ' + (v.creator||'') + ' ' + (v.channel||'');
    if (/royal caribbean|official/i.test(bag)) s += 2;
    if (/\b4k\b/i.test(v.title||'')) s += 1;
    if (/\b(2023|2024|2025)\b/.test(v.description||'')) s += 1;
    return s;
  }

  function roundRobin(buckets, core){
    var names = core.slice();
    Object.keys(buckets).forEach(function(n){ if(names.indexOf(n)===-1) names.push(n); });
    var L = 0; names.forEach(function(n){ L = Math.max(L, (buckets[n]||[]).length); });
    var out = [];
    for (var i=0;i<L;i++){ for (var j=0;j<names.length;j++){ var it = (buckets[names[j]]||[])[i]; if(it) out.push(it); } }
    return out;
  }

  function enableFallback(){
    CONTAINER.classList.add('carousel-fallback');
    var prev = CONTAINER.querySelector('.swiper-button-prev');
    var next = CONTAINER.querySelector('.swiper-button-next');
    var wrap = CONTAINER.querySelector('.swiper-wrapper');
    function pageW(){ return CONTAINER.getBoundingClientRect().width || 1; }
    if (prev) prev.addEventListener('click', function(){ wrap.scrollBy({left:-pageW(), behavior:'smooth'}); });
    if (next) next.addEventListener('click', function(){ wrap.scrollBy({left: pageW(), behavior:'smooth'}); });
  }

  function maybeInitSwiper(){
    if (window.Swiper){
      new Swiper('.swiper.videos', {
        loop:false, lazy:true, watchOverflow:true,
        pagination:{ el:'.swiper.videos .swiper-pagination', clickable:true },
        navigation:{ nextEl:'.swiper.videos .swiper-button-next', prevEl:'.swiper.videos .swiper-button-prev' },
        a11y:{ enabled:true }
      });
    }else{
      enableFallback();
    }
  }

  fetchFirst(VIDEO_JSON_URLS).then(function(json){
    var items = [];
    if (json && json.videos && typeof json.videos === 'object'){
      Object.keys(json.videos).forEach(function(k){ var arr=json.videos[k]; if(Array.isArray(arr)) items = items.concat(arr); });
    }else if (json && json.categories && typeof json.categories === 'object'){
      Object.keys(json.categories).forEach(function(k){ var arr=json.categories[k]; if(Array.isArray(arr)) items = items.concat(arr); });
    }else if (json && Array.isArray(json.videos)){ items = json.videos.slice(); }

    var seen = {};
    var filtered = items.filter(function(v){
      var id = getId(v); if(!id || seen[id]) return false;
      if(!isAdventure(v)) return false; seen[id]=1; return true;
    });

    var buckets = {};
    filtered.forEach(function(v){
      var c = canonCat(v.category || 'ship walk through');
      (buckets[c] = buckets[c] || []).push(v);
    });
    Object.keys(buckets).forEach(function(k){ buckets[k].sort(function(a,b){ return rankScore(b) - rankScore(a); }); });

    var CORE = ['top ten','ship walk through','suite','accessible','balcony','oceanview','interior'];
    var ordered = roundRobin(buckets, CORE);

    if (!ordered.length){
      WRAP.innerHTML = '<div class="swiper-slide"><div class="note tiny">Bear with us as we chart these stars.</div></div>';
      return maybeInitSwiper();
    }

    var html = '';
    for (var i=0;i<ordered.length;i++){
      var v = ordered[i];
      var id = getId(v);
      var title = String(v.title||'Video').replace(/"/g,'&quot;');
      html += '<div class="swiper-slide" data-category="' + canonCat(v.category).replace(/"/g,'&quot;') + '">'
            +   '<iframe title="' + title + '" src="https://www.youtube-nocookie.com/embed/' + id + '" '
            +   'allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" loading="lazy" allowfullscreen></iframe>'
            + '</div>';
    }
    WRAP.innerHTML = html;
    maybeInitSwiper();
  }).catch(function(){
    WRAP.innerHTML = '<div class="swiper-slide"><div class="note tiny">Videos will cast off shortly (data source unreachable).</div></div>';
    enableFallback();
  });
})();
</script>

<!-- Ship stats loader (same-origin SOURCES + inline fallback) -->
<script>
(async function loadShipStats(){
  var el = document.getElementById('ship-stats'); if(!el) return;
  var SOURCES = [
    _abs('/assets/data/fleet_index.json'),
    _abs('/assets/data/fleet-index.json'),
    _abs('/assets/data/fleet.json')
  ];
  async function tryFetch(u){ try{ var r=await fetch(u,{cache:'no-store'}); if(r.ok) return await r.json(); }catch(e){} return null; }
  var data=null; for (var i=0;i<SOURCES.length;i++){ data = await tryFetch(SOURCES[i]); if(data) break; }
  if(!data){
    try{ var fallback = JSON.parse(document.getElementById('ship-stats-fallback').textContent||'{}'); data={ships:[fallback]}; }
    catch(e){}
  }
  if(!data){ el.innerHTML='<p class="tiny">Stats coming soon.</p>'; return; }

  function norm(s){ return String(s||'').toLowerCase().replace(/’/g,"'").trim(); }
  function* walk(n){ if(!n) return; if(Array.isArray(n)){ for(const it of n) yield* walk(it); return; }
    if(typeof n==='object'){ yield n; for(const v of Object.values(n)) yield* walk(v); } }
  var ship=null;
  for (const obj of walk(data)){
    var rawSlug = obj && (obj.slug || obj.id || (obj.attributes && obj.attributes.slug));
    var nslug = norm(rawSlug);
    var nname = norm((obj && (obj.name || obj.title || obj.ship)) || (obj && obj.attributes && obj.attributes.name));
    if (nslug === 'adventure-of-the-seas' || nname === 'adventure of the seas'){ ship=obj; break; }
  }
  if(!ship){ el.innerHTML='<p class="tiny">Stats coming soon.</p>'; return; }
  var a = ship.attributes || ship;
  var rows = [
    ['Class', a.class || a.ship_class || (a.notes && /voyager/i.test(a.notes) ? 'Voyager Class' : '')],
    ['Entered Service', a.year_built_or_entered || a.entered_service || a.inaugural || a.launched],
    ['Gross Tonnage', a.gt || a.gross_tonnage || a.tonnage],
    ['Guests', a.capacity || a.passengers || a.guests],
    ['Crew', a.crew],
    ['Length', a.length || a.length_overall],
    ['Beam', a.beam || a.width],
    ['Registry', a.flag || a.registry]
  ].filter(function(p){ return p[1]!=null && String(p[1]).trim()!==''; })
   .map(function(p){ return '<div class="stat-line"><span class="stat-key">'+p[0]+':</span><span class="stat-val">'+p[1]+'</span></div>'; })
   .join('');
  el.innerHTML = rows || '<p class="tiny">Stats coming soon.</p>';
})();
</script>

<!-- Live Itinerary: widget → iframe(details) -->
<script>
(function initHybridVesselFinder(){
  const wrap = document.querySelector('.card.itinerary[data-imo]');
  if(!wrap) return;

  const imo   = (wrap.getAttribute('data-imo')||'').trim();       // 9167227
  const name  = (wrap.getAttribute('data-name')||'').trim();      // ADVENTURE-OF-THE-SEAS
  const mapEl = document.getElementById('vf-map-adventure');
  const iFr   = wrap.querySelector('iframe.live-map');
  const direct = document.getElementById('vf-direct');

  function toSlug(n){ return String(n||'').toUpperCase().replace(/[^A-Z0-9]+/g,'-').replace(/^-+|-+$/g,''); }
  const slug = iFr?.getAttribute('data-slug') || toSlug(name);
  const vfURL = 'https://www.vesselfinder.com/vessels/'+encodeURIComponent(slug)+'-IMO-'+imo+'#map';
  if (direct) direct.href = vfURL;

  function useIframe(){
    if(!iFr) return;
    iFr.src = vfURL;
    iFr.classList.remove('hidden');
    if(mapEl) mapEl.style.display = 'none';
  }

  const s = document.createElement('script');
  s.src = "https://www.vesselfinder.com/aismap.js";
  s.async = true;

  const stall = setTimeout(useIframe, 2500);
  s.onload = function(){
    try{
      clearTimeout(stall);
      if (window.AISMap && mapEl){
        new AISMap(mapEl, { width:"100%", height:300, zoom:8, names:true, show_track:1, track_days:1, vessel:"IMO:"+imo });
      } else { useIframe(); }
      // After a moment, if no canvas rendered, fall back
      setTimeout(function(){
        if (!mapEl.querySelector('canvas,svg')) useIframe();
      }, 2000);
    }catch(e){ useIframe(); }
  };
  s.onerror = function(){ clearTimeout(stall); useIframe(); };
  document.head.appendChild(s);
})();
</script>

<!-- Logbook (same-origin fetch + robust rendering) -->
<script>
(function initLogbook(){
  var mount = document.getElementById('logbook'); if(!mount) return;
// Before (cross-origin risk)
var JSON_URLS = [
  'https://cruisinginthewake.com/ships/rcl/assets/adventure.json',
  'https://www.cruisinginthewake.com/ships/rcl/assets/adventure.json'
];
  // After (zero CORS risk)
var JSON_URLS = [
  _abs('/ships/rcl/assets/adventure.json')
];
  function fetchFirst(urls, i){
    i = i || 0;
    if (i >= urls.length) return Promise.resolve(null);
    var url = urls[i];
    return fetch(url, { cache:'no-store' })
      .then(function(r){ if(!r.ok) throw new Error(r.status+' '+r.statusText); return r.json(); })
      .catch(function(){ return fetchFirst(urls, i+1); });
  }

  // Walk the object and return the first array of objects that looks "entry-ish"
  function findEntries(root){
    if (!root || typeof root !== 'object') return null;

    // 1) Known containers
    var known = ['personas','entries','stories','items','logs','posts'];
    for (var k of known){
      if (Array.isArray(root[k]) && root[k].length) return root[k];
      if (root.logbook && Array.isArray(root.logbook[k]) && root.logbook[k].length) return root.logbook[k];
    }

    // 2) Any array of objects with likely fields
    var stack = [root];
    var seen = new Set([root]);
    while (stack.length){
      var cur = stack.pop();
      if (Array.isArray(cur) && cur.length && typeof cur[0] === 'object'){
        var sample = cur[0];
        var hasText = ('markdown' in sample) || ('body' in sample) || ('content' in sample) || ('text' in sample);
        if (hasText || ('title' in sample) || ('name' in sample)) return cur;
      }
      if (cur && typeof cur === 'object'){
        for (var v of Object.values(cur)){
          if (v && typeof v === 'object' && !seen.has(v)){ seen.add(v); stack.push(v); }
        }
      }
    }
    return null;
  }

  // Normalize one entry to the fields our renderer uses
  function normalizeEntry(e){
    var title = e.title || e.name || e.heading || 'Guest Story';
    var persona = e.persona_label || e.role || e.type || e.archetype || '';
    var md = e.markdown || e.body || e.content || e.text || '';

    // nav variants
    var port = e.nav_port || e.prev || e.previous || {};
    var star = e.nav_starboard || e.next || {};
    function normNav(n){
      if (!n || typeof n !== 'object') return {};
      return {
        label: n.label || n.text || n.title || '',
        url: n.url || n.href || ''
      };
    }

    return {
      id: String(e.id || e.slug || e.key || Math.random().toString(36).slice(2)),
      title: String(title),
      persona_label: String(persona),
      markdown: String(md),
      nav_port: normNav(port),
      nav_starboard: normNav(star)
    };
  }

  function esc(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
  function mdToHTML(src){
    var html = String(src || '');
    html = html.replace(/^###?\s+(.+)$/gm, function(_,t){ return '<h3>' + esc(t) + '</h3>'; });
    html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
    html = html.replace(/\*(.+?)\*/g, '<em>$1</em>');
    html = html.replace(/\n{2,}/g, '</p><p>').replace(/\n/g, '<br/>');
    html = html.replace(/(https?:\/\/[^\s)]+)(?=\s|$)/g, '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>');
    html = html.replace(/^<p><\/p>/,'');
    return html;
  }

  function render(personas, idx){
    var p = personas[idx]; if(!p) return;
    var header =
      '<h3 class="persona-title">' + esc(p.title) + '</h3>' +
      '<p class="tiny"><strong>' + esc(p.persona_label) + '</strong></p>';

    var fuelCard = [
      '<div class="voyage-tips-wrapper">',
        '<div class="card voyage-tips center" aria-label="Voyage planning tips">',
          '<h2 class="card-title">Fuel Your Voyage</h2>',
          '<div class="card-content">',
            '<h3><a href="/drink-packages.html#deluxe" target="_blank" rel="noopener noreferrer">Drink Packages</a></h3>',
            '<ul>',
              '<li><a href="/drink-packages.html#deluxe" target="_blank" rel="noopener noreferrer">Deluxe Beverage Package</a></li>',
              '<li><a href="/drink-packages.html#refreshment" target="_blank" rel="noopener noreferrer">Refreshment Package</a></li>',
              '<li><a href="/drink-packages.html#soda" target="_blank" rel="noopener noreferrer">Soda Package</a></li>',
            '</ul>',
            '<h3><a href="https://www.royalcaribbean.com/faq/questions/unlimited-dining-package" target="_blank" rel="noopener noreferrer">Premium &amp; Specialty Dining</a></h3>',
            '<ul>',
              '<li><a href="https://www.royalcaribbean.com/faq/questions/unlimited-dining-package" target="_blank" rel="noopener noreferrer">Unlimited Dining Package</a></li>',
              '<li><a href="https://www.royalcaribbean.com/experience/cruise-dining/specialty-restaurants" target="_blank" rel="noopener noreferrer">Royal Caribbean Premium Dining</a></li>',
            '</ul>',
            '<h3><a href="/packing-lists.html" target="_blank" rel="noopener noreferrer">Pack Like a Pro</a></h3>',
            '<ul><li>Shawl for chilly theater nights</li><li>Swimwear for pool deck</li><li>Comfortable shoes for shore tours</li></ul>',
            '<div class="button-group" aria-label="Voyage planning links">',
              '<a href="/drink-packages.html" class="btn" target="_blank" rel="noopener noreferrer">View Drink Options</a>',
              '<a href="/packing-lists.html" class="btn" target="_blank" rel="noopener noreferrer">Packing Guide</a>',
            '</div>',
          '</div>',
        '</div>',
      '</div>'
    ].join('');

    var mdRaw = String(p.markdown || '');
    var parts = mdRaw.split(/\n##\s+Dining\s*\n/i);
    var storyHTML = parts.length > 1
      ? mdToHTML(parts[0]) + '<h3>Dining</h3>' + mdToHTML(parts[1]) + fuelCard
      : (function(){ var cut = Math.floor(mdRaw.length * 0.55); return mdToHTML(mdRaw.slice(0, cut)) + fuelCard + mdToHTML(mdRaw.slice(cut)); })();

    var nav =
      '<div class="button-group" style="justify-content:space-between; margin-top:1rem">' +
        '<a class="btn" href="' + esc((p.nav_port && p.nav_port.url) || '#') + '" aria-label="Previous perspective (port side)">' + esc((p.nav_port && p.nav_port.label) || '⟵ Previous perspective') + '</a>' +
        '<a class="btn" href="' + esc((p.nav_starboard && p.nav_starboard.url) || '#') + '" aria-label="Next perspective (starboard side)">' + esc((p.nav_starboard && p.nav_starboard.label) || 'Next perspective ⟶') + '</a>' +
      '</div>';

    mount.innerHTML =
      header +
      '<p class="tiny" style="margin-top:.2rem">Use the Port/Starboard buttons to sail between perspectives.</p>' +
      '<div class="story-body">' + storyHTML + '</div>' +
      nav;
  }

  fetchFirst(JSON_URLS).then(function(data){
    if(!data){ mount.innerHTML = '<p class="small">Stories will cast off shortly (no data found).</p>'; return; }

    var entries = findEntries(data);
    if (!entries || !entries.length){
      console.warn('[Logbook] No suitable array found. Top-level keys:', Object.keys(data||{}));
      mount.innerHTML = '<p class="small">Stories will cast off shortly (no stories found in JSON).</p>';
      return;
    }

    // Normalize and render
    var personas = entries.map(normalizeEntry).filter(function(p){ return p.markdown && p.markdown.trim(); });
    console.info('[Logbook] Using entries:', personas.length, { sample: personas[0] });

    if (!personas.length){
      mount.innerHTML = '<p class="small">Stories will cast off shortly (entries empty after normalization).</p>';
      return;
    }

    // Optional: allow ?id=… selection if your JSON has stable ids
    var params = new URLSearchParams(location.search);
    var selId = params.get('id');
    var idx = personas.findIndex(function(p){ return String(p.id||'') === String(selId||''); });
    if (idx < 0) idx = 0;

    render(personas, idx);
  }).catch(function(err){
    console.warn('[Logbook] Fatal fetch error:', err && err.message);
    mount.innerHTML = '<p class="small">Stories will cast off shortly (data source unreachable).</p>';
  });
})();
</script>

<!-- External links: open off-site in new tab -->
<script>
(function externalLinksNewTab(){
  var here = location.hostname.replace(/^www\./,'');
  function upgrade(){
    document.querySelectorAll('a[href]').forEach(function(a){
      var href = a.getAttribute('href') || '';
      if (/^(#|mailto:|tel:)/i.test(href)) return;
      try{
        var u = new URL(href, location.href);
        var host = u.hostname.replace(/^www\./,'');
        if (host !== here || a.rel === 'external' || a.dataset.newtab === 'true'){
          a.target = '_blank';
          if (!/noopener/i.test(a.rel||'')) a.rel = (a.rel ? a.rel + ' ' : '') + 'noopener';
          if (!/noreferrer/i.test(a.rel||'')) a.rel = (a.rel ? a.rel + ' ' : '') + 'noreferrer';
        }
      }catch(e){}
    });
  }
  if (document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', upgrade, {once:true}); } else { upgrade(); }
})();
</script>
</body>
</html>
