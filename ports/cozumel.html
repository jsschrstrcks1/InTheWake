<!--
Soli Deo Gloria
All work on this project is offered as a gift to God.
"Trust in the LORD with all your heart, and do not lean on your own understanding." — Proverbs 3:5
"Whatever you do, work heartily, as for the Lord and not for men." — Colossians 3:23

STANDARDS: Every Page v3.010.300 · Production Template · Unified Nav v3.010.300 · A11y/WCAG 2.1 AA Compliant
-->
<!doctype html>
<html lang="en" class="no-js">
<head>
<!-- ai-breadcrumbs
     entity: Cozumel
     type: Port Guide
     parent: /ports.html
     category: Western Caribbean
     updated: 2025-11-19
     expertise: Cruise travel, port guides, Caribbean
     target-audience: Cruise travelers, Caribbean cruise planners
     answer-first: Cozumel is the most-visited cruise port in Mexico — world-class snorkeling and diving on the Mesoamerican Reef, authentic Mayan culture, and beach clubs that define Caribbean relaxation.
     -->
  <!-- ======================================================
       In the Wake — Cozumel Port Guide
       Version: 3.010.300  |  Soli Deo Gloria
       ====================================================== -->

  <!-- Core -->
  <meta charset="utf-8"/>
  <script>document.documentElement.classList.remove('no-js');</script>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="referrer" content="no-referrer-when-downgrade"/>
  <meta name="ai-summary" content="Cozumel is the most-visited cruise port in Mexico — world-class snorkeling and diving on the Mesoamerican Reef, authentic Mayan culture, and beach clubs that define Caribbean relaxation.">
  <meta name="last-reviewed" content="2025-11-19">
  <meta name="content-protocol" content="ICP-Lite v1.0">

  <!-- SEO -->
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1"/>
  <meta name="color-scheme" content="light"/>
  <meta name="theme-color" content="#0e6e8e"/>
  <meta name="version" content="3.010.300"/>
  <meta name="author" content="In the Wake"/>

  <!-- Title & SEO -->
  <title>Cozumel — Mexico's Premier Cruise Port Guide | In the Wake</title>
  <link rel="canonical" href="https://cruisinginthewake.com/ports/cozumel.html"/>
  <meta name="description" content="My first-person logbook guide to Cozumel — world-class snorkeling at Palancar Reef, beach clubs like Paradise and Mr. Sanchos, Mayan ruins, and the Caribbean's clearest water."/>

  <!-- OpenGraph -->
  <meta property="og:type" content="article"/>
  <meta property="og:site_name" content="In the Wake"/>
  <meta property="og:title" content="Cozumel — Mexico's Premier Cruise Port"/>
  <meta property="og:description" content="First-person logbook guide to Cozumel — snorkeling, beach clubs, Mayan culture, and why it's the Caribbean's most visited cruise destination."/>
  <meta property="og:url" content="https://cruisinginthewake.com/ports/cozumel.html"/>

  <!-- Favicon / PWA -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/in_the_wake_icon_32x32.png"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png"/>
  <link rel="manifest" href="/manifest.webmanifest"/>

  <!-- Global CSS -->
  <link rel="stylesheet" href="/assets/styles.css?v=3.010.300"/>

  <!-- JSON-LD: BreadcrumbList -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://cruisinginthewake.com/"},
      {"@type": "ListItem", "position": 2, "name": "Ports", "item": "https://cruisinginthewake.com/ports.html"},
      {"@type": "ListItem", "position": 3, "name": "Cozumel", "item": "https://cruisinginthewake.com/ports/cozumel.html"}
    ]
  }
  </script>

  <!-- JSON-LD: WebPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Cozumel",
    "url": "https://cruisinginthewake.com/ports/cozumel.html",
    "description": "First-person logbook guide to Cozumel — Mexico's premier cruise destination."
  }
  </script>

  <!-- JSON-LD: FAQPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Which beach club is best in Cozumel?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Paradise Beach is great for families (water toys, activities), Mr. Sanchos is all-inclusive and lively, Nachi Cocom limits guests for a quieter experience. All offer chairs, pools, and food/drink packages."
        }
      },
      {
        "@type": "Question",
        "name": "How do I get to San Miguel from the cruise pier?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Punta Langosta pier is right in downtown San Miguel — walk off and you're shopping. Puerta Maya and International piers are 2-3 miles south; taxis cost $8-10 or it's a 45-minute coastal walk."
        }
      }
    ]
  }
  </script>

  <style>
    .logbook-entry {
      font-size: 1.05rem;
      line-height: 1.8;
      color: #134;
    }
    .logbook-entry p {
      margin-bottom: 1.25rem;
    }
    .poignant-highlight {
      background: linear-gradient(135deg, #f0f9ff 0%, #e6f4f8 100%);
      border-left: 4px solid var(--accent, #0e6e8e);
      padding: 1.25rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 0 12px 12px 0;
      font-style: italic;
    }
    .port-section {
      margin: 2rem 0;
      padding: 1.5rem;
      background: #f7fdff;
      border-radius: 12px;
      border: 1px solid #e0f0f5;
    }
    .port-section h3 {
      margin-top: 0;
      color: var(--accent, #0e6e8e);
    }
  </style>

  <!-- LCP Optimization: Preload critical hero images -->
  <link rel="preload" as="image" href="/assets/logo_wake_560.png" fetchpriority="high"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg?v=3.010.300" fetchpriority="high"/>
</head>

<body class="page">
  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <!-- ARIA Live Regions -->
  <div id="a11y-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  <div id="a11y-alerts" role="alert" aria-live="assertive" aria-atomic="true" class="sr-only"></div>



  
  <header class="hero-header" role="banner">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
        <span class="tiny version-badge" aria-label="Site version 3.010.300">v3.010.300</span>
      </div>
      <nav class="nav" aria-label="Main site navigation">
        <div class="nav-item">
          <a href="/">Home</a>
        </div>

        <!-- Planning Dropdown -->
        <div class="nav-item nav-group" id="nav-planning" data-open="false">
          <button class="nav-disclosure" type="button" aria-expanded="false" aria-haspopup="true" aria-controls="menu-planning">
            Planning <span class="caret">▾</span>
          </button>
                    <div id="menu-planning" class="submenu" role="menu" aria-label="Planning submenu">
            <a role="menuitem" href="/planning.html">Planning (overview)</a>
            <a role="menuitem" href="/ships.html">Ships</a>
            <a role="menuitem" href="/restaurants.html">Restaurants &amp; Menus</a>
            <a role="menuitem" href="/ports.html">Ports</a>
            <a role="menuitem" href="/drink-packages.html">Drink Packages</a>
            <a role="menuitem" href="/drink-calculator.html">Drink Calculator</a>
            <a role="menuitem" href="/stateroom-check.html">Stateroom Check</a>
            <a role="menuitem" href="/cruise-lines.html">Cruise Lines</a>
            <a role="menuitem" href="/packing-lists.html">Packing Lists</a>
            <a role="menuitem" href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-item nav-group" id="nav-travel" data-open="false">
          <button class="nav-disclosure" type="button" aria-expanded="false" aria-haspopup="true" aria-controls="menu-travel">
            Travel <span class="caret">▾</span>
          </button>
                    <div id="menu-travel" class="submenu" role="menu" aria-label="Travel submenu">
            <a role="menuitem" href="/travel.html">Travel (overview)</a>
            <a role="menuitem" href="/solo.html">Solo</a>
          </div>
        </div>

        <div class="nav-item">
          <a href="/search.html">Search</a>
        </div>

        <div class="nav-item">
          <a href="/about-us.html">About</a>
        </div>
      </nav>
    </div>

    <!-- Hero -->
    <div class="hero">
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.300" width="180" height="180" alt="" aria-hidden="true" decoding="async"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline" aria-hidden="true">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <!-- HEADER -->
  <header class="hero-header" role="banner">
    <div class="navbar" style="max-width: 1100px; margin: 0 auto; padding: 1rem;">
      <div class="brand">
        <a href="/">
          <img src="/assets/logo_wake.png?v=3.010.300" width="200" height="50" alt="In the Wake" decoding="async"/>
        </a>
      </div>
      <nav aria-label="Breadcrumb">
        <a href="/ports.html">← Back to All Ports</a>
      </nav>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="wrap page-grid" id="main-content" role="main" tabindex="-1" style="max-width: 900px; margin: 0 auto; padding: 2rem 1rem;">

    <!-- ICP-Lite Quick Answer -->
    <section class="page-intro" style="grid-column: 2; grid-row: 1; margin-bottom: 2rem;">
      <p class="answer-line" style="padding: 0.75rem 1rem; border-left: 3px solid var(--rope, #d9b382); background: #f7fdff; border-radius: 8px;">
        <strong>Quick Answer:</strong> Cozumel is the most-visited cruise port in Mexico — world-class snorkeling on the Mesoamerican Reef (second largest on earth), all-inclusive beach clubs, authentic Mayan culture, and that impossibly clear Caribbean water. Consistently rated 4.5+ stars for variety and value.
      </p>
    </section>

    <!-- Port Header -->
    <article class="card">
      <h1>Cozumel, Mexico</h1>
      <p style="font-size: 0.95rem; color: #456; margin-bottom: 0;">
        <strong>Region:</strong> Western Caribbean &nbsp;|&nbsp; <strong>Type:</strong> Multiple piers (direct dock) &nbsp;|&nbsp; <strong>Currency:</strong> Pesos (USD widely accepted)
      </p>
    </article>

    <!-- First-Person Logbook Entry -->
    <article class="card logbook-entry">
      <h2>My Cozumel Logbook</h2>

      <p>I've lost count of how many times I've visited Cozumel on Royal Caribbean ships — it's on nearly every Western Caribbean itinerary, so if you cruise out of Galveston, Tampa, or Fort Lauderdale with any regularity, you know this island intimately. And yet I still look forward to it every single time. Cozumel was my first real introduction to snorkeling in truly world-class water, my first time eating tacos al pastor from a street cart while mariachi played in the square, and my first understanding of why the ancient Maya chose this place as sacred. It's the Caribbean's most visited cruise port for good reason — the combination of underwater beauty, cultural depth, and sheer variety of options makes it endlessly repeatable.</p>

      <p>The snorkeling and diving here are legitimately exceptional. Cozumel sits on the Mesoamerican Barrier Reef — the second-largest reef system on earth — and the visibility often exceeds 100 feet. On a good day, the water is so clear it's almost disorienting; you can see the sandy bottom 60 feet down and it looks close enough to touch. I've done the ship excursions to Palancar Reef and Colombia Reef more times than I can count, and every single time I'm surrounded by sea turtles, eagle rays, nurse sharks, and fish in colors I didn't know existed. The drift dives here are famous — you literally float with the current past coral canyons and swim-throughs without kicking, like flying through an underwater dream. Even for non-divers, the snorkeling at Chankanaab National Park or the beach clubs is excellent. I've taken complete beginners and watched their faces when they put their heads underwater for the first time and saw that reef. You can't fake that reaction.</p>

      <div class="poignant-highlight">
        <strong>The Moment That Stays With Me:</strong> It was maybe my tenth visit to Cozumel, and I'd signed up for a small-group snorkel tour that included a stop at El Cielo — "The Starfish Sandbar." I'd heard about it but never prioritized it. The boat anchored in this knee-deep turquoise lagoon with white sand so bright it hurt, and as I slid off the side and my feet touched bottom, I looked down and saw them: dozens of orange starfish scattered across the sand like someone had decorated the seafloor for a party. The guide explained that we could look but not touch (the oils from our hands can harm them), and so I just floated there on my back, the sun warm on my face and these ancient creatures beneath me, and felt something I rarely feel on busy cruise port days — complete stillness. Everyone in the group went quiet. For ten minutes we just existed in that perfect shallow water with the starfish and the silence and the improbable beauty of it all. Cozumel has given me adrenaline and adventure on a hundred visits, but that morning at El Cielo gave me peace.
      </div>

      <p>Beach clubs are a major part of the Cozumel experience, and I've done most of them. Paradise Beach is probably my favorite for families — big pool, water toys, jet skis, and a lively atmosphere without being overwhelming. Mr. Sanchos is the all-inclusive party spot with unlimited food and drinks, pool floats, and a spring-break-for-adults energy that some people love and others find too much (I'm in the first camp after a few frozen drinks). Nachi Cocom limits daily guests so it's quieter and more relaxed — great for couples. Playa Mia is like a waterpark with slides and trampolines. All of them have taxi service from the cruise piers for $8–15 round trip, and most offer packages that include food, drinks, and use of facilities for $50–80 per person. Worth every penny for a relaxed beach day.</p>

      <p>But I don't want to undersell the cultural side, because Cozumel has real depth beyond the reef and the beach clubs. The island was sacred to the Maya goddess Ixchel (fertility and the moon), and the San Gervasio ruins in the island's interior were an important pilgrimage site. The ruins aren't as dramatic as Tulum or Chichén Itzá on the mainland, but they're peaceful, uncrowded, and genuinely atmospheric — iguanas sunning on ancient stones, jungle pressing in on every side. I've also done the ferry to Playa del Carmen and then the van to Tulum (ship excursion or independent), which is a long day but worth it for those clifftop ruins overlooking the Caribbean. The Cozumel Museum downtown is surprisingly excellent for understanding Maya cosmology and the island's history.</p>

      <p>For food, downtown San Miguel has fantastic options beyond the tourist-trap waterfront. I always hit Buccanos at Night for elevated Mexican seafood, La Cocay for upscale fusion, or one of the taco stands in the market for al pastor that costs $2 and changes your life. The chocolate tour at a local cacao farm shows you how the Maya originally prepared drinking chocolate (it's bitter and spicy and nothing like Hershey's), and the tequila tastings at various shops downtown are fun if you don't mind the sales pitch.</p>

      <p>Cozumel rewards both relaxation and exploration. I've had perfect days doing nothing but floating in Mr. Sanchos' pool with a bucket of Coronas, and I've had perfect days snorkeling three reefs and touring ruins and eating street food until I couldn't move. The island accommodates both equally well. And that water — that ridiculous, impossibly clear, every-shade-of-blue-at-once water — is why I keep coming back even when I've checked every other box on the list.</p>
    </article>

    <!-- Navigation Section -->
    <section class="port-section">
      <h3>Getting Around Cozumel</h3>
      <p>Three cruise piers serve Cozumel, so your navigation depends on where you dock:</p>
      <ul>
        <li><strong>Punta Langosta:</strong> Right in downtown San Miguel — walk off and you're shopping</li>
        <li><strong>Puerta Maya:</strong> 2–3 miles south of downtown, large shopping/restaurant complex at pier</li>
        <li><strong>International/SSA Pier:</strong> Adjacent to Puerta Maya, same distance to town</li>
      </ul>
      <p><strong>Getting around:</strong></p>
      <ul>
        <li><strong>Taxis to downtown:</strong> ~$22 USD each way from Puerta Maya/International Pier (confirm rate before getting in — not metered)</li>
        <li><strong>Walk from Puerta Maya to town:</strong> 45 minutes along coastal road (doable but hot)</li>
        <li><strong>Beach club shuttles:</strong> Most provide pickup at all piers</li>
        <li><strong>Scooter/Jeep rentals:</strong> Available but roads can be rough and accidents happen</li>
      </ul>
    </section>

    <!-- Revolution Day Notice -->
    <section class="port-section">
      <h3>November 20th: Revolution Day</h3>
      <p><strong>Important for November cruises:</strong> Mexico celebrates <a href="https://en.wikipedia.org/wiki/Revolution_Day_(Mexico)" target="_blank" rel="noopener">Revolution Day</a> on November 20th each year. If you're in port on this date, plan extra time for:</p>
      <ul>
        <li><strong>Parades and celebrations:</strong> Downtown streets may be closed for festivities</li>
        <li><strong>Road closures:</strong> Routes between piers and attractions may be affected</li>
        <li><strong>Longer walks back to ship:</strong> Detours around parade routes can add significant time</li>
        <li><strong>Sporting events:</strong> Triathlons and marathons sometimes coincide with the holiday</li>
      </ul>
      <p>Allow extra buffer time to return to your ship, especially if you're exploring independently. Shore excursions through the cruise line will account for delays.</p>
    </section>

    <!-- Word of Warning -->
    <section class="port-section">
      <h3>A Positively Worded Word of Warning</h3>
      <p>The enthusiastic local vendors and taxi drivers add authentic Mexican energy and often lead to great deals and recommendations — a friendly "no gracias" with a smile turns any interaction into a pleasant cultural exchange, and sticking to the well-marked tourist zones lets you enjoy the lively atmosphere while discovering hidden gems at your own pace. And always settle taxi fares before getting in (they're not metered), but the drivers are usually fair if you're friendly.</p>
    </section>

    <!-- FAQ Section -->
    <section class="card faq" style="margin-top: 2rem;">
      <h2>Frequently Asked Questions</h2>

      <details style="margin: 0.75rem 0; padding: 0.5rem 0; border-bottom: 1px solid #e0e8f0;">
        <summary style="cursor: pointer; font-weight: 600;">Which beach club should I choose?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;"><strong>Paradise Beach:</strong> Great for families, water toys, activities. <strong>Mr. Sanchos:</strong> All-inclusive party atmosphere. <strong>Nachi Cocom:</strong> Limited guests, quieter and more relaxed. <strong>Playa Mia:</strong> Waterpark features. All are $50–80 including food/drinks.</p>
      </details>

      <details style="margin: 0.75rem 0; padding: 0.5rem 0; border-bottom: 1px solid #e0e8f0;">
        <summary style="cursor: pointer; font-weight: 600;">Is the snorkeling really that good?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">Yes. Cozumel sits on the second-largest barrier reef on earth with 100+ foot visibility on good days. You'll see sea turtles, rays, nurse sharks, and incredible coral. Even beginners will have a mind-blowing experience.</p>
      </details>

      <details style="margin: 0.75rem 0; padding: 0.5rem 0; border-bottom: 1px solid #e0e8f0;">
        <summary style="cursor: pointer; font-weight: 600;">Should I visit Tulum from Cozumel?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">It's a long day (ferry + 1-hour drive each way) but worthwhile if you've never seen Tulum's clifftop ruins. Book a ship excursion to guarantee return, or go independent with early start. Costa Maya is closer for Mayan ruins.</p>
      </details>

      <details style="margin: 0.75rem 0; padding: 0.5rem 0;">
        <summary style="cursor: pointer; font-weight: 600;">Pesos or dollars?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">US dollars are accepted everywhere in tourist areas, but you'll get better prices paying in pesos. ATMs are available downtown, or exchange at banks (not the cambio stands which have poor rates).</p>
      </details>
    </section>

  <aside class="rail" style="grid-column: 2; grid-row: 2;">
    <section class="card">
      <h3>About the Author</h3>
      <div class="author-info" style="display: flex; gap: 1rem; align-items: flex-start;">
        <a href="/authors/ken-baker.html" style="flex-shrink: 0;">
          <img src="/authors/img/ken1_96.webp" srcset="/authors/img/ken1_96.webp 1x, /authors/img/ken1_192.webp 2x" width="96" height="96" alt="Author photo" style="border-radius: 12px;" decoding="async" loading="lazy"/>
        </a>
        <div>
          <h4 style="margin: 0 0 0.25rem;"><a href="/authors/ken-baker.html">Ken Baker</a></h4>
          <p style="margin: 0; font-size: 0.85rem; color: #666;">Founder of In the Wake. 50+ sailings and counting.</p>
        </div>
      </div>
    </section>

    <section class="card">
      <h3>Recent Articles</h3>
      <div id="recent-rail"></div>
    </section>
      <!-- Recent Articles rail -->
      <section style="grid-column: 1; grid-row: 1 / span 999;" class="card" aria-labelledby="recent-rail-title">
        <h3 id="recent-rail-title">Recent Stories</h3>
        <p class="tiny" style="margin-bottom: 1rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Real cruising experiences, practical guides, and heartfelt reflections from our community. Explore stories that inform, inspire, and connect.
        </p>
        <div id="recent-rail" class="rail-list" aria-live="polite"></div>
        <p id="recent-rail-fallback" class="tiny" style="display:none">Loading articles…</p>
      </section>
    
  </aside>


    <!-- Back to Ports -->
    <nav style="margin-top: 2rem; text-align: center;">
      <a href="/ports.html" style="display: inline-block; padding: 0.75rem 1.5rem; background: var(--accent, #0e6e8e); color: #fff; border-radius: 8px; text-decoration: none;">← Back to All Ports</a>
    </nav>
  </main>

  <!-- FOOTER -->
  <footer class="wrap" role="contentinfo" style="text-align: center; padding: 2rem 1rem; border-top: 1px solid #e0e8f0; margin-top: 2rem;">
    <p>© 2025 In the Wake. All rights reserved.</p>
    <p class="tiny" style="opacity: 0; position: absolute; pointer-events: none;" aria-hidden="true">Soli Deo Gloria</p>
  </footer>

  <script>
    // Load recent articles
    (async function() {
      try {
        const response = await fetch('/assets/data/articles/index.json');
        const articles = await response.json();
        const rail = document.getElementById('recent-rail');

        if (rail && articles && articles.length > 0) {
          rail.innerHTML = articles.slice(0, 5).map(article => `
            <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #e0e8f0;">
              <h4 style="margin: 0 0 0.25rem; font-size: 0.95rem;">
                <a href="${article.url}">${article.title}</a>
              </h4>
              <p style="margin: 0; font-size: 0.8rem; color: #666;">${article.date}</p>
            </div>
          `).join('');
        }
      } catch (err) {
        console.log('Could not load articles:', err);
      }
    })();
  </script>

  
  <script>
  (function(){
    "use strict";

    /* ===== Recent Articles Rail ===== */
    (async function recentRail(){
      const rail = document.getElementById('recent-rail');
      if(!rail) return;

      const fallback = document.getElementById('recent-rail-fallback');
      if(fallback) fallback.style.display = '';

      async function fetchJSONWithFallback(urls){
        for (const u of urls){
          try{
            const res = await fetch(u, { credentials: 'omit', cache: 'no-cache' });
            if (res.ok) return await res.json();
          }catch(err){

          }
        }
        return null;
      }

      const pick = (obj, keys, fallback=null)=>{ for(const k of keys){ if(obj && obj[k] != null) return obj[k]; } return fallback; };

      function setImageWithFallback(imgEl, primary, altPaths=[]){
        if(!imgEl) return;
        const stamp='v=3.010.300';
        const tried=new Set();
        const queue=[primary,...altPaths].filter(Boolean).map(p => p.includes('?')?p+'&'+stamp:p+'?'+stamp);
        function tryNext(){
          const next=queue.shift();
          if(!next){ imgEl.removeAttribute && imgEl.removeAttribute('onerror'); return; }
          if(tried.has(next)) return tryNext();
          tried.add(next);
          imgEl.src=next;
        }
        imgEl.onerror=tryNext;
        tryNext();
      }

      const raw = await fetchJSONWithFallback(['/assets/data/articles/index.json','/assets/data/articles.json']);
      if(!raw) {
        if(fallback) {
          fallback.textContent = 'Unable to load articles';
          fallback.style.display = '';
        }
        return;
      }

      const items = Array.isArray(raw?.articles) ? raw.articles : (Array.isArray(raw) ? raw : []);
      if(!items.length) return;

      const here = location.pathname.replace(/\/+$/,'');
      const view = items.filter(p=>{
        const href = pick(p,['url','path'],'#');
        const norm = (href||'').replace(/\/+$/,'');
        return norm && norm !== here;
      }).slice(0,6);

      rail.innerHTML = view.map(p=>{
        const title = pick(p,['title','name'],'Article');
        const href  = pick(p,['url','path'],'#');
        const excerpt = pick(p,['excerpt','description'],'');
        return `
          <article class="card" style="display:flex;flex-direction:column;gap:.75rem;padding:.85rem">
            <div style="display:grid;grid-template-columns:80px 1fr;gap:.75rem;align-items:start">
              <div style="width:80px;height:60px;overflow:hidden;border-radius:8px;background:#eef4f6;border:1px solid #dfe7ea;flex-shrink:0">
                <img class="article-thumb" alt="" decoding="async" loading="lazy" style="width:100%;height:100%;object-fit:cover">
              </div>
              <div>
                <h4 style="margin:0 0 .35rem 0;font-size:.9rem;line-height:1.3;font-weight:600">
                  <a href="\${href}" style="color:var(--accent,#0e6e8e);text-decoration:none">\${title}</a>
                </h4>
                \${excerpt ? `<p class="tiny" style="margin:0;line-height:1.4;color:var(--ink-mid,#3d5a6a)">\${excerpt}</p>` : ''}
              </div>
            </div>
            <a href="\${href}" class="pill" style="align-self:flex-start;font-size:.85rem;padding:.45rem .95rem;text-decoration:none">Read Article →</a>
          </article>`;
      }).join('');

      const cards = [...rail.querySelectorAll('article.card')];
      cards.forEach((card,i)=>{
        const p = view[i] || {};
        const el = card.querySelector('img.article-thumb');
        const href  = (pick(p,['url','path'],'')||'').toLowerCase();
        const title = (pick(p,['title','name'],'')||'').toLowerCase();

        let primary = pick(p, ['thumb','thumbnail','image','cover','img'], null);

        // FORCE override for Top-20
        if (/(top-20|first-?cruise-?questions)/.test(href) || /top\s*20.*first.*cruise.*questions/.test(title)){
          primary = '/assets/articles/thumbs/top-20-questions/cover.webp';
        }
        // Friendly specifics
        if(!primary && (/freedom-of-your-own-wake/.test(href) || /freedom of your own wake/.test(title))){
          primary = '/assets/articles/thumbs/freedom-of-your-own-wake.webp';
        }
        if(!primary && (/why-i-started-solo-cruising/.test(href) || /why i started solo cruising/.test(title))){
          primary = '/assets/articles/thumbs/why-i-started-solo-cruising.webp';
        }
        if(!primary && (/\/travel(\.html)?$/.test(href) || /\btravel\b/.test(title))){
          primary = '/assets/articles/travel/cover.jpg';
        }

        // Heuristic fallback
        if(!primary){
          const slugify = s => (s||'').toLowerCase().replace(/https?:\/\/[^/]+/,'').replace(/[#?].*$/,'').split('/').filter(Boolean).pop()||'';
          const guess = slugify(href) || slugify(title);
          if(guess) primary = `/assets/articles/\${guess}/cover.jpg`;
        }

        const alts = [];
        if(primary){
          const base = primary.replace(/\.(jpg|jpeg|png|webp)$/i,'');
          alts.push(`\${base}.jpeg`, `\${base}.JPG`, `\${base}.webp`, `\${base}.png`);
        }
        setImageWithFallback(el, primary || '/assets/index_hero.webp', alts);
      });

      if(fallback) fallback.style.display = 'none';

      // Announce to screen readers
      const status = document.getElementById('a11y-status');
      if(status) {
        status.textContent = `\${view.length} recent articles loaded`;
      }
    })();
  })();
  </script>

<!-- Dropdown nav behavior (300ms Hover Delay) -->
  <script>
  (function(){"use strict";
    /* ===== Dropdown Menu with 300ms Hover Delay ===== */
    const dropdownGroups = Array.from(document.querySelectorAll('.nav-group'));
    if (dropdownGroups.length) {
      const hoverTimeouts = new Map();
      const HOVER_DELAY = 300;

      function setOpen(group, isOpen) {
        group.dataset.open = isOpen ? "true" : "false";
        const button = group.querySelector('.nav-disclosure');
        if (button) {
          button.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        }
      }

      function closeAll(except = null) {
        dropdownGroups.forEach(group => {
          if (group !== except) {
            setOpen(group, false);
            if (hoverTimeouts.has(group)) {
              clearTimeout(hoverTimeouts.get(group));
              hoverTimeouts.delete(group);
            }
          }
        });
      }

      dropdownGroups.forEach(group => {
        const button = group.querySelector('.nav-disclosure');
        const menu = group.querySelector('.submenu');
        if (!button || !menu) return;

        // Click to toggle
        button.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const isOpen = group.dataset.open === "true";
          closeAll(group);
          setOpen(group, !isOpen);
        });

        // Mouse enter: Open immediately
        group.addEventListener('mouseenter', () => {
          if (hoverTimeouts.has(group)) {
            clearTimeout(hoverTimeouts.get(group));
            hoverTimeouts.delete(group);
          }
          closeAll(group);
          setOpen(group, true);
        });

        // Mouse leave: Close after delay
        group.addEventListener('mouseleave', () => {
          const timeoutId = setTimeout(() => {
            setOpen(group, false);
            hoverTimeouts.delete(group);
          }, HOVER_DELAY);
          hoverTimeouts.set(group, timeoutId);
        });

        // Keyboard navigation
        group.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            setOpen(group, false);
            button && button.focus();
          }
          if ((e.key === 'ArrowDown' || e.key === 'ArrowUp') && document.activeElement === button) {
            e.preventDefault();
            setOpen(group, true);
            const firstLink = menu.querySelector('a, button, [tabindex]:not([tabindex="-1"])');
            firstLink && firstLink.focus();
          }
        });

        // Close when tabbing away
        menu.addEventListener('focusout', () => {
          setTimeout(() => {
            if (!group.contains(document.activeElement)) {
              setOpen(group, false);
            }
          }, 0);
        });
      });

      // Close all when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.nav-group')) {
          closeAll();
        }
      });

      // Close all when window loses focus
      window.addEventListener('blur', () => {
        closeAll();
      });
    }
  })();
  </script>

</body>
</html>
