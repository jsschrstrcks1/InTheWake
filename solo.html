<!-- Invocation: This page is an act of worship of God — may all we ship be true, beautiful, and helpful. Soli Deo Gloria. -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="referrer" content="no-referrer">
  <meta name="theme-color" content="#0e6e8e">
  <meta name="version" content="3.006.solo.008"/>

  <title>Solo Travel — In the Wake</title>

  <!-- Canonical Host Normalizer: force apex (no-www) + https -->
  <script>
  (function(){
    var wantHost = "cruisinginthewake.com";
    var h = location.hostname.toLowerCase();
    var isHttps = (location.protocol === "https:");
    if (h !== wantHost || !isHttps) {
      location.replace("https://" + wantHost + location.pathname + location.search + location.hash);
    }
  })();
  </script>

  <link rel="canonical" href="https://cruisinginthewake.com/solo.html"/>

  <!-- Styles (same-origin so cache-buster can touch it) -->
  <link rel="stylesheet" href="/assets/styles.css"/>

  <!-- Preconnects -->
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="preconnect" href="https://cloud.umami.is" crossorigin>
  <link rel="preconnect" href="https://cdn.consentmanager.net" crossorigin>
  <link rel="preconnect" href="https://www.youtube-nocookie.com" crossorigin>
  <link rel="preconnect" href="https://i.ytimg.com" crossorigin>

  <!-- Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WZP891PZXJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-WZP891PZXJ');
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>

  <!-- Accessibility (deferred) -->
  <script defer src="https://cdn.consentmanager.net/delivery/js/accessibility.min.js"
    data-acc-accid="774c13e29978"
    data-acc-host="delivery.consentmanager.net"
    data-acc-cdn="cdn.consentmanager.net"></script>

  <!-- Absolute URL helper -->
  <script>
  (function(){
    const ORIGIN=(location.origin||(location.protocol+'//'+location.host)).replace(/\/$/,'');
    window._abs=function(p){p=String(p||''); if(!p.startsWith('/')) p='/'+p; return ORIGIN+p;};
  })();
  </script>

  <!-- Cache-Buster (same-origin CSS/JS only) -->
  <script>
  (function(){
    const VER = (document.querySelector('meta[name="version"]')?.content ||
                 new Date().toISOString().slice(0,10).replace(/-/g,""));
    const ORIGIN = (location.origin || (location.protocol+'//'+location.host));
    function sameOrigin(u){ try{ return new URL(u, ORIGIN).origin === ORIGIN; }catch(_){ return false; } }
    for(const el of document.querySelectorAll('link[rel="stylesheet"], script[src]')){
      const url = el.href || el.src;
      if(!url || !sameOrigin(url) || url.includes('?v=')) continue;
      const bust = url + (url.includes('?') ? '&' : '?') + 'v=' + VER;
      if(el.tagName==='LINK') el.href = bust; else el.src = bust;
    }
  })();
  </script>

  <!-- Social defaults (CollectionPage) -->
  <meta name="description" content="Solo cruising tips, faith-scented reflections, and practical guides from real sailings.">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Solo Travel — In the Wake">
  <meta property="og:description" content="Solo cruising tips, faith-scented reflections, and practical guides from real sailings.">
  <meta property="og:url" content="https://cruisinginthewake.com/solo.html">
  <meta property="og:image" content="https://cruisinginthewake.com/assets/index_hero.jpg">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Schema.org: CollectionPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"CollectionPage",
    "name":"Solo Travel — In the Wake",
    "url":"https://cruisinginthewake.com/solo.html",
    "isPartOf":{"@type":"WebSite","name":"In the Wake","url":"https://cruisinginthewake.com"}
  }
  </script>

  <!-- Page CSS fixes -->
  <style id="brand-title-hide">.brand-title{display:none!important}</style>

  <!-- Hero vibrancy -->
  <style id="hero-vibrancy">
    .hero{
      background:url('/assets/index_hero.jpg') center/cover no-repeat!important;
      filter:saturate(1.2) contrast(1.08) brightness(1.03)
    }
    .hero::before,.hero::after{content:none!important}
  </style>

  <!-- Hero photo credit -->
  <style id="hero-credit-css">
    .hero{position:relative}
    .hero-credit{
      position:absolute; right:12px; bottom:10px; background:rgba(255,255,255,.9);
      padding:.3rem .55rem; border-radius:.5rem; font-size:.85rem;
      box-shadow:0 2px 6px rgba(0,0,0,.12)
    }
  </style>

  <!-- Page watermark (behind cards) -->
  <style id="page-watermark">
    body::before{
      content:""; position:fixed; inset:0;
      background:url('/assets/watermark.png?v=3.007.070') center right/520px auto no-repeat;
      opacity:.10; pointer-events:none; z-index:0
    }
    .wrap,.cards,.card{position:relative; z-index:1}
  </style>

  <!-- Nav pills (all links look like pills; current one emphasized) -->
  <style id="nav-pills">
    .nav[aria-label="Primary"] a{
      display:inline-block; border-radius:999px; padding:.25rem .60rem;
      text-decoration:none; border:2px solid transparent; margin-right:.35rem;
    }
    .nav[aria-label="Primary"] a[aria-current="page"],
    .nav[aria-label="Primary"] a.is-current{
      border-color: rgba(14,110,142,.35);
      background: rgba(14,110,142,.06);
      font-weight:600;
    }
  </style>

  <!-- Old share bar look/feel -->
  <style id="share-css">
    .share-bar{position:fixed; right:16px; bottom:16px; z-index:1000; opacity:0; transform:translateY(12px); transition:.2s}
    .share-bar.visible{opacity:1; transform:none}
    .share-bar a{display:inline-block; margin-right:.35rem; font-weight:600; text-decoration:none; background:#ffffffcc; padding:.35rem .55rem; border-radius:.55rem; box-shadow:0 4px 16px rgba(0,0,0,.12)}
    @media (max-width: 680px){ .share-bar{right:12px; bottom:12px} .share-bar a{padding:.3rem .5rem} }
    html.a11y-launcher-present .share-bar{bottom:84px}
  </style>

  <!-- Authors rail CSS + two-column layout on wide screens -->
  <style id="authors-rail-css">
    @media (min-width: 1100px){
      .page .wrap .layout{display:grid; grid-template-columns: 1fr 320px; gap:1.25rem}
      .page .wrap .layout .maincol{min-width:0}
      .page .wrap .layout .rail{position:sticky; top:88px; align-self:start}
    }
    .card-authors .author{display:flex; gap:.75rem; align-items:center; margin:.5rem 0}
    .card-authors .avatar{width:40px; height:40px; border-radius:999px; overflow:hidden; flex:none; background:#e9f3f7}
    .card-authors .avatar img{width:100%; height:100%; object-fit:cover; display:block}
    .card-authors .author .meta{display:flex; flex-direction:column}
    .card-authors .author .meta a{font-weight:600; text-decoration:none}
    .card-authors .author .meta .links{font-size:.9rem; opacity:.8}
    .card-authors .author .meta .links a{margin-right:.5rem}
    .card-authors .roll{margin:.35rem 0 .75rem}
    .card-authors .roll a{display:inline-block; margin:.15rem .35rem .15rem 0; font-size:.92rem}
  </style>

  <!-- Standards Invocation (docstring) -->
  <!-- EVERY-PAGE v3.002 · SOLO-MODULE v3.006.solo.008 · SHIP-PAGE v3.006 · RCL-ADDENDUM v3.006.006 -->
</head>
<body class="page">
  <a href="#content" class="skip-link">Skip to main content</a>

  <header class="hero-header">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake.png" alt="In the Wake wordmark"/>
      </div>
      <nav class="nav" aria-label="Primary">
        <a href="/">Home</a>
        <a href="/ships/ships.html">Ships</a>
        <a href="/restaurants.html">Restaurants &amp; Menus</a>
        <a href="/ports.html">Ports</a>
        <a href="/disability.html">Disability at Sea</a>
        <a href="/drinks.html">Drink Packages</a>
        <a href="/packing.html">Packing Lists</a>
        <a href="/planning.html">Planning</a>
        <a href="/solo.html" aria-current="page">Solo Travel</a>
        <a href="/travel.html">Travel Tips</a>
        <a href="/cruise-lines.html">Cruise Lines</a>
        <a href="/about-us.html">About Us</a>
      </nav>
    </div>

    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="latlon-grid" aria-hidden="true"></div>
      <img class="hero-compass" src="/assets/compass_rose.svg" alt="" aria-hidden="true"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake.png" alt="In the Wake">
        <div class="tagline">A Cruise Traveler’s Logbook</div>
      </div>
      <div class="hero-credit">
        Photo © <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a> ·
        <a href="https://instagram.com/flickersofmajesty" target="_blank" rel="noopener">Instagram</a>
      </div>
    </div>
  </header>

  <main class="wrap layout" id="content" role="main">
    <div class="maincol">
      <section class="cards stack">
        <article class="card card-welcome">
          <h2>Welcome Aboard</h2>
          <p>In the Wake is a practical cruise companion built from real sailings. Use it to compare ships, scan menus, and plan ports without losing your bearings. We favor family-friendly sources and surface accessibility notes where helpful. Treat numbers as snapshots in time and lean on cross-links to double-check the latest details. When it’s time to book, the goal is that you’ll feel confident—and feel like it was your idea all along. Fair winds and following seas.</p>
        </article>
      </section>

      <section class="cards stack">
        <article class="card">
          <h2>Solo Cruising</h2>
          <p>Cabin picks, safety, and creators who focus on solo travel.</p>
        </article>
      </section>

      <!-- Active article host -->
      <section class="cards stack">
        <article class="card" id="solo-article-host" aria-live="polite">
          <h2>Loading your article…</h2>
          <p>Trimming the sails — this will just take a moment.</p>
        </article>
      </section>
    </div>

    <!-- Right rail -->
    <aside class="rail">
      <section class="cards stack" id="solo-authors-rail" aria-label="Authors">
        <article class="card card-authors">
          <h2>Authors</h2>
          <div id="authors-list" class="authors"></div>
        </article>
      </section>
    </aside>
  </main>

  <footer class="wrap">
    © 2025 In the Wake — A Cruise Traveler’s Logbook
    <span class="version-badge">v3.006.solo.008</span>

    <!-- Old Floating Social Share Bar -->
    <div id="share-bar" class="share-bar" aria-label="Share this page">
      <a class="share twitter"  id="share-x"  target="_blank" rel="noopener">X</a>
      <a class="share facebook" id="share-fb" target="_blank" rel="noopener">Fb</a>
      <a class="share instagram" id="share-ig" href="#">Ig</a>
      <a class="share whatsapp"  id="share-wa" target="_blank" rel="noopener">Wa</a>
      <a class="share wechat"    id="share-wechat" href="#">WeChat</a>
    </div>
  </footer>

  <!-- Share bar visibility + external link hardener + nav aria-current setter -->
  <script>
  (function(){
    const bar=document.getElementById('share-bar');
    function toggle(){ if(window.scrollY>150){bar?.classList.add('visible')} else {bar?.classList.remove('visible')} }
    window.addEventListener('scroll',toggle,{passive:true}); toggle();

    const sameOrigin = location.origin;
    document.addEventListener('click',function(e){
      const a=e.target.closest('a[href]'); if(!a) return;
      try{
        const u=new URL(a.href, location.href);
        if(u.origin!==sameOrigin){ a.setAttribute('target','_blank'); a.setAttribute('rel','noopener'); }
      }catch(_){}
    },{passive:true});

    (function setAriaCurrent(){
      const nav = document.querySelector('.nav[aria-label="Primary"]');
      if(!nav) return;
      const here = location.pathname.replace(/\/+$/,'').toLowerCase();
      for (const a of nav.querySelectorAll('a[href]')) {
        try {
          const url = new URL(a.getAttribute('href'), location.origin);
          const path = url.pathname.replace(/\/+$/,'').toLowerCase();
          if (path === here) { a.setAttribute('aria-current','page'); a.classList.add('is-current'); }
        } catch(_) {}
      }
    })();

    // Detect a11y launcher and nudge share bar up to avoid overlap
    const mo = new MutationObserver(function(){ document.documentElement.classList.add('a11y-launcher-present'); });
    mo.observe(document.documentElement, {subtree:true, childList:true});
  })();
  </script>

  <!-- Solo article loader + deep-link SEO injector + authors rail -->
  <script>
  (function(){
    "use strict";

    const ORIGIN = (location.origin || (location.protocol + '//' + location.host));
    const ARTICLE_BASE = "/solo/articles/";
    const PERMALINK_BASE = ORIGIN + ARTICLE_BASE;

    // Authors
    const RAW_AUTHORS = [
      { id:"ken",  name:"Ken Baker",  url:"https://ken-baker.com",        avatarBase:"/authors/img/ken1",
        socials:[ {label:"Site",href:"https://ken-baker.com"},
                  {label:"IG",href:"https://instagram.com/flickersofmajesty"},
                  {label:"Facebook Solo Travel Group",href:"https://www.facebook.com/share/g/17XBdqRCsM/?mibextid=wwXIfr"},
                  {label:"Community (mobile)",href:"https://m.me/cm/Aba2d_mIzlMxlCA5/?send_source=cm:copy_invite_link"} ]},
      { id:"tina", name:"Tina Maulsby", url:"/authors/tina-maulsby.html", avatarBase:"/authors/img/tina3",
        socials:[ {label:"TikTok",href:"https://www.tiktok.com/@beyondboundarieswithtina"},
                  {label:"Etsy",href:"https://www.etsy.com/shop/YOUR_SHOP?section_id=CRUISE_ONLY"},
                  {label:"Facebook Group",href:"https://www.facebook.com/share/g/17XBdqRCsM/?mibextid=wwXIfr"},
                  {label:"Community (mobile)",href:"https://m.me/cm/Aba2d_mIzlMxlCA5/?send_source=cm:copy_invite_link"} ]}
    ];

    // Articles
    const RAW_ARTICLES = [
      { slug:"freedom-of-your-own-wake",
        title:"The Freedom of Your Own Wake",
        hero: ORIGIN + "/assets/solo/freedom-hero.jpg",
        dek:"A gentle case for sailing alone: rest, rhythm, and room to breathe.",
        authorId:"ken", tags:["solo","tips","reflection"] },
      { slug:"why-i-started-solo-cruising",
        title:"Why I Started Solo Cruising (and Built a Community)",
        hero: ORIGIN + "/authors/tinas-images/ncl-jade.png",
        dek:"From that first solo gangway to a thriving community — lessons, safety, and the joy of sailing on your own terms.",
        authorId:"tina", tags:["solo","story","community","women"] }
    ];

    function normArticle(a){ return { slug:a.slug||"", title:a.title||"", hero:a.hero||"", dek:a.dek||"", authorId:a.authorId||"", tags:Array.isArray(a.tags)?a.tags:[] }; }
    function normAuthor(a){ return { id:a.id||"", name:a.name||"", url:a.url||"", avatarBase:a.avatarBase||"", socials:Array.isArray(a.socials)?a.socials:[] }; }

    const AUTHORS  = RAW_AUTHORS.map(normAuthor);
    const ARTICLES = RAW_ARTICLES.map(normArticle);

    const authorById = Object.fromEntries(AUTHORS.map(a => [a.id, a]));
    const articlesByAuthor = ARTICLES.reduce(function(acc,a){ (acc[a.authorId] = acc[a.authorId] || []).push(a); return acc; }, {});

    // Routing
    const qs   = new URLSearchParams(location.search);
    const hash = (location.hash||"").replace(/^#/, "");
    var slug   = qs.get("a") || hash || "";

    const last = localStorage.getItem("solo:lastSlug");
    if(!slug){
      const pool = ARTICLES.filter(function(a){return a.slug && a.slug!==last;});
      const pick = pool.length ? pool[Math.floor(Math.random()*pool.length)] : ARTICLES[0];
      slug = (pick && pick.slug) || (ARTICLES[0] && ARTICLES[0].slug) || "";
      if(slug) history.replaceState(null, "", location.pathname + "#" + slug);
    }

    const article = ARTICLES.find(function(a){return a.slug===slug;}) || ARTICLES[0];
    localStorage.setItem("solo:lastSlug", article.slug);
    window.__soloArticle = article;

    // Render article
    const host = document.getElementById("solo-article-host");
    if(host){
      fetch(ARTICLE_BASE + encodeURIComponent(article.slug) + ".html", {
        credentials:"omit", cache:"no-store", redirect:"follow"
      })
      .then(function(r){ return r.ok ? r.text() : Promise.reject(r.status); })
      .then(function(html){
        host.innerHTML = html;
        wireShareButtons(article);
        injectArticleSEO(article);
        hydrateShareBar();
        ensureBylineAuthorFallback(article);
      })
      .catch(function(){
        host.innerHTML = '<h2>We hit rough seas loading this article.</h2><p>Try refreshing or <a href="'+ORIGIN+'/solo.html">return to Solo home</a>.</p>';
      });
    }

    // Authors rail
    renderAuthorsRail();

    function renderAuthorsRail(){
      const rail = document.getElementById("authors-list");
      if(!rail) return;
      rail.innerHTML = "";

      const ver = document.querySelector('meta[name="version"]')?.content || "";
      const sorted = AUTHORS.slice().sort(function(a,b){
        const aa = (articlesByAuthor[a.id]||[]).length;
        const bb = (articlesByAuthor[b.id]||[]).length;
        return bb - aa;
      });

      sorted.forEach(function(a){
        const authored = (articlesByAuthor[a.id]||[]);
        const div = document.createElement('div'); div.className = "author";

        const fallbackExt = a.id === "ken" ? "jpg" : "png";
        const webp = a.avatarBase + ".webp" + (ver?("?v="+encodeURIComponent(ver)):"");
        const fall = a.avatarBase + "." + fallbackExt + (ver?("?v="+encodeURIComponent(ver)):"");

        div.innerHTML = ''+
          '<div class="avatar">'+
            '<picture>'+
              '<source type="image/webp" srcset="'+webp+'">'+
              '<img src="'+fall+'" alt="'+escapeHtml(a.name)+'" width="80" height="80" loading="lazy" decoding="async">'+
            '</picture>'+
          '</div>'+
          '<div class="meta">'+
            '<a href="'+(a.url||'#')+'"'+(a.url?' target="_blank" rel="noopener"':'')+'>'+escapeHtml(a.name)+'</a>'+
            '<div class="links">'+
              (a.socials||[]).map(function(s){return '<a href="'+s.href+'" target="_blank" rel="noopener">'+escapeHtml(s.label)+'</a>';}).join('')+
            '</div>'+
          '</div>';
        rail.appendChild(div);

        const roll = document.createElement('div'); roll.className = "roll";
        const max  = Math.min(4, authored.length);
        for(var i=0;i<max;i++){
          const art = authored[(i + Math.floor(Math.random()*authored.length)) % authored.length];
          const aTag = document.createElement('a');
          aTag.href = permalink(art.slug);
          aTag.textContent = art.title;
          aTag.addEventListener('click', function(e){
            e.preventDefault();
            const u = new URL(this.href, location.origin);
            const s = u.pathname.split('/').pop().replace(/\.html$/,'');
            history.pushState(null, "", location.pathname + "#" + s);
            location.reload();
          });
          roll.appendChild(aTag);
        }
        rail.appendChild(roll);
      });
    }

    // Helpers
    function permalink(slug){ return PERMALINK_BASE + encodeURIComponent(slug) + ".html"; }

    function wireShareButtons(a){
      const el = document.querySelector('.byline .share');
      if(!el) return;
      const url = permalink(a.slug);
      el.addEventListener('click', function(e){
        e.preventDefault();
        navigator.clipboard.writeText(url).then(function(){
          el.textContent = "Link copied!";
          setTimeout(function(){ el.textContent = "Share this article"; }, 1500);
        });
      });
    }

    function injectArticleSEO(a){
      if(!(location.search.includes("a=") || location.hash)) return;
      const url = permalink(a.slug);
      setMeta('og:title', a.title + " — In the Wake");
      setMeta('og:description', a.dek || "Solo cruising reflections and tips.");
      setMeta('og:image', a.hero || (ORIGIN + "/assets/index_hero.jpg"));
      setMeta('og:url', url);
      setNameMeta('description', a.dek || "Solo cruising reflections and tips.");
      setMeta('twitter:card','summary_large_image');
      if (a.hero && /\.webp(\?|$)/i.test(a.hero)) { setMeta('og:image:type','image/webp'); }

      const existingLD = document.querySelector('script[type="application/ld+json"].solo-article-ld');
      if (existingLD) existingLD.remove();
      const ld = document.createElement('script');
      ld.type = "application/ld+json";
      ld.className = "solo-article-ld";
      ld.textContent = JSON.stringify({
        "@context":"https://schema.org",
        "@type":"BlogPosting",
        "headline": a.title,
        "description": a.dek || "Solo cruising reflections and tips.",
        "image": a.hero || (ORIGIN + "/assets/index_hero.jpg"),
        "url": url,
        "isPartOf": {"@type":"Blog","name":"Solo Cruising","url": ORIGIN + "/solo.html"}
      });
      document.head.appendChild(ld);

      function setMeta(p,c){
        var m=document.querySelector('meta[property="'+p+'"]');
        if(!m){ m=document.createElement('meta'); m.setAttribute('property',p); document.head.appendChild(m); }
        m.setAttribute('content', c);
      }
      function setNameMeta(n,c){
        var m=document.querySelector('meta[name="'+n+'"]');
        if(!m){ m=document.createElement('meta'); m.setAttribute('name',n); document.head.appendChild(m); }
        m.setAttribute('content', c);
      }
    }

    function ensureBylineAuthorFallback(a){
      const hasByline = !!document.querySelector('footer.byline');
      if(hasByline) return;
      const mounted = document.getElementById('solo-article-host');
      if(!mounted) return;
      const auth = authorById[a.authorId] || null;
      if(!auth) return;

      const ver = document.querySelector('meta[name="version"]')?.content || "";
      const fallbackExt = auth.id === "ken" ? "jpg" : "png";
      const webp = auth.avatarBase + ".webp" + (ver?("?v="+encodeURIComponent(ver)):"");
      const fall = auth.avatarBase + "." + fallbackExt + (ver?("?v="+encodeURIComponent(ver)):"");

      const footer = document.createElement('footer');
      footer.className = "byline";
      footer.innerHTML = ''+
        '<div class="avatar" style="width:48px;height:48px;border-radius:999px;overflow:hidden;flex:none">'+
          '<picture>'+
            '<source type="image/webp" srcset="'+webp+'">'+
            '<img src="'+fall+'" alt="'+escapeHtml(auth.name)+'" width="48" height="48" loading="lazy" decoding="async" style="width:100%;height:100%;object-fit:cover">'+
          '</picture>'+
        '</div>'+
        '<div style="margin-left:.5rem">'+
          '<strong><a href="'+auth.url+'"'+(auth.url?' target="_blank" rel="noopener"':'')+'>'+escapeHtml(auth.name)+'</a></strong>'+
          '<a class="share" href="#" role="button" style="margin-left:.75rem">Share this article</a>'+
        '</div>';
      mounted.appendChild(footer);
    }

    // OLD Share bar hydration (uses deep link or article permalink)
    function hydrateShareBar(){
      const ORI = (location.origin || (location.protocol+'//'+location.host));
      const BASE = "/solo/articles/";
      var url;
      if (window.__soloArticle && window.__soloArticle.slug){
        url = ORI + BASE + window.__soloArticle.slug + ".html";
      } else {
        const qs = new URLSearchParams(location.search);
        const hashSlug = (location.hash||"").replace(/^#/, "");
        if (qs.get("a") || hashSlug){
          const slug = qs.get("a") || hashSlug;
          url = ORI + BASE + encodeURIComponent(slug) + ".html";
        } else {
          url = ORI + "/solo.html";
        }
      }
      const encU = encodeURIComponent(url);
      const text = encodeURIComponent(document.title.replace(/\s*\|.*$/,''));

      const x  = document.getElementById("share-x");
      const fb = document.getElementById("share-fb");
      const ig = document.getElementById("share-ig");
      const wa = document.getElementById("share-wa");
      const wc = document.getElementById("share-wechat");

      if(x)  x.href  = "https://twitter.com/intent/tweet?url="+encU+"&text="+text;
      if(fb) fb.href = "https://www.facebook.com/sharer/sharer.php?u="+encU;
      if(wa) wa.href = "https://wa.me/?text="+text+"%20"+encU;
      if(ig){
        ig.addEventListener("click", function(e){
          e.preventDefault();
          navigator.clipboard.writeText(url).then(function(){
            ig.textContent="Copied!"; setTimeout(function(){ig.textContent="Ig";},1200);
          });
        });
      }
      if(wc){
        wc.addEventListener("click", function(e){
          e.preventDefault();
          navigator.clipboard.writeText(url).then(function(){ alert("Link copied. Share it in WeChat."); });
        });
      }
    }
    window.hydrateShareBar = hydrateShareBar;

    function escapeHtml(s){
      return String(s||"").replace(/[&<>"']/g, function(m){ return ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" })[m]; });
    }
  })();
  </script>
  <!-- SW registration + gentle seeding (same-origin only) -->
<script>
(function(){
  if(!('serviceWorker' in navigator)) return;

  var ver  = document.querySelector('meta[name="version"]')?.content || '';
  var sw   = '/sw.js' + (ver ? ('?v='+encodeURIComponent(ver)) : '');

  // Optional: hint the manifest early
  var l = document.createElement('link');
  l.rel = 'preload'; l.as = 'fetch'; l.href = '/precache-manifest.json'; l.crossOrigin = 'anonymous';
  document.head.appendChild(l);

  window.addEventListener('load', function(){
    navigator.serviceWorker.register(sw, { scope: '/' })
      .then(function(){ return navigator.serviceWorker.ready; })
      .then(function(reg){
        // Light-touch priming: fetch the manifest, then quietly request top URLs.
        fetch('/precache-manifest.json', {cache:'no-store'})
          .then(function(r){ return r.ok ? r.json() : []; })
          .then(function(list){
            if(!Array.isArray(list)) return;
            // Fetch in priority order; SW fetch handler will cache per its strategies.
            list.slice(0, 50).forEach(function(u){
              // Ensure same-origin
              try {
                var url = new URL(u, location.origin);
                if (url.origin === location.origin) fetch(url.href).catch(function(){});
              } catch(_) {}
            });
            // If your sw.js v12 supports it, also nudge it via postMessage (no-op otherwise).
            if (navigator.serviceWorker.controller) {
              try { navigator.serviceWorker.controller.postMessage({type:'SEED_FROM_PAGE', urls:list}); } catch(_){}
            }
          })
          .catch(function(){});
      })
      .catch(function(){ /* ignore */ });
  });
})();
</script>
</body>
</html>
