<!doctype html>
<html lang="en">
<head>
  <!-- ======================================================
       In the Wake — Solo Cruising Index (v3.008.019)
       Standards: Solo_Cruising_Module_Standards_v3.006.solo.001 (+ v3.008 addendum)
       ====================================================== -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="referrer" content="no-referrer">
  <meta name="theme-color" content="#0e6e8e">
  <meta name="page:version" content="v3.008.019">
  <meta name="version" content="v3.008.019">
  <meta name="standards:baseline" content="3.008">
  <meta name="robots" content="index, follow"/>

  <title>Solo Travel — In the Wake (v3.008.019)</title>
  <link rel="canonical" href="https://www.cruisinginthewake.com/solo.html"/>
  <meta name="description" content="Solo cruising tips, faith-scented reflections, and practical guides from real sailings.">

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="In the Wake">
  <meta property="og:url" content="https://www.cruisinginthewake.com/solo.html">
  <meta property="og:title" content="Solo Travel — In the Wake">
  <meta property="og:description" content="Solo cruising tips, faith-scented reflections, and practical guides from real sailings.">
  <meta property="og:image" content="https://www.cruisinginthewake.com/assets/solo/solo-tranquility.jpg?v=3.008.019">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Schema: CollectionPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"CollectionPage",
    "name":"Solo Travel — In the Wake",
    "url":"https://www.cruisinginthewake.com/solo.html",
    "isPartOf":{"@type":"WebSite","name":"In the Wake","url":"https://www.cruisinginthewake.com/"}
  }
  </script>

  <!-- ItemList schema (explicit article index for non-JS bots) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"ItemList",
    "name":"Solo Cruising Articles",
    "itemListElement":[
      {"@type":"ListItem","position":1,"url":"https://www.cruisinginthewake.com/solo/why-i-started-solo-cruising.html"},
      {"@type":"ListItem","position":2,"url":"https://www.cruisinginthewake.com/solo/freedom-of-your-own-wake.html"}
    ]
  }
  </script>

  <!-- Site bundle -->
  <link rel="stylesheet" href="/assets/styles.css?v=3.008.019"/>

  <!-- SOLO host hero + inline-hero card treatment (scoped) -->
  <style id="solo-host-hero-fix">
    #solo-article-host figure.hero,
    #solo-article-host .article-hero,
    #solo-article-host .article-card .hero,
    #solo-article-host figure.inline-hero{
      margin:0 0 1rem 0; padding:10px; border-radius:16px;
      max-width:min(860px,92%); margin-inline:auto; background:#fff !important;
      border:1px solid rgba(8,48,65,.10); box-shadow:0 6px 22px rgba(8,48,65,.08);
    }
    #solo-article-host figure.hero > picture,
    #solo-article-host figure.hero > img,
    #solo-article-host .article-hero > picture,
    #solo-article-host .article-hero > img,
    #solo-article-host figure.inline-hero > picture,
    #solo-article-host figure.inline-hero > img{
      display:block; width:100% !important; height:auto !important; border-radius:12px; object-fit:contain !important;
    }
    #solo-article-host figure.hero > figcaption,
    #solo-article-host .article-hero > figcaption,
    #solo-article-host figure.inline-hero > figcaption{
      position:static !important; inset:auto !important; transform:none !important; float:none !important; display:block !important;
      margin-top:.65rem; padding-top:.45rem; text-align:left;
      border-top:1px dashed rgba(8,48,65,.12);
      font-size:.95rem; line-height:1.4; color:#083041; opacity:.85;
      background:none !important; box-shadow:none !important; border-radius:0 !important;
    }
    #solo-article-host figure.hero > figcaption a,
    #solo-article-host .article-hero > figcaption a,
    #solo-article-host figure.inline-hero > figcaption a{ color:var(--accent,#0e6e8e); font-weight:600; text-decoration:none; }
    #solo-article-host figure.hero > figcaption a:hover,
    #solo-article-host .article-hero > figcaption a:hover,
    #solo-article-host figure.inline-hero > figcaption a:hover{ text-decoration:underline; }
    /* Never paint site header background on article heroes */
    figure.hero, .article-hero, .article-card .hero, figure.inline-hero { background:none !important; }
  </style>

  <!-- Header hero (fallback) -->
  <style>
    .hero{
      background:url('https://www.cruisinginthewake.com/assets/index_hero.jpg?v=3.008.019') center/cover no-repeat !important;
      min-height:320px;
    }
    .hero::before,.hero::after{content:none!important}
    html,body{overflow-x:hidden}
  </style>

  <!-- Two-column layout (sticky rail at ≥980px) -->
  <style id="solo-two-col-layout">
    /* base */
    .wrap.layout{display:grid;grid-template-columns:minmax(0,1fr);gap:24px;align-items:start;}
    .wrap.layout .maincol{order:1;min-width:0;}
    .wrap.layout > aside.rail{order:2;min-width:0;}
    /* force two columns at desktop */
    @media (min-width:980px){
      .wrap.layout{
        grid-template-columns:minmax(0,1fr) 320px !important; /* main | rail */
        gap:32px !important;
      }
      .wrap.layout > aside.rail{
        position:sticky; top:96px; align-self:start;
      }
      .wrap.layout > aside.rail .cards{display:grid;gap:16px;}
      .wrap.layout > aside.rail .card{width:100%;}
    }
    @media (min-width:1400px){
      .wrap.layout{ grid-template-columns:minmax(0,1fr) 360px !important; }
    }
  </style>

  <!-- Topbar + compact nav -->
  <style>
    /* Topbar: skip link + primary nav on one line */
    .topbar{
      display:flex; align-items:center; gap:.75rem;
      padding:.4rem .9rem; border-bottom:1px solid rgba(8,48,65,.08);
      background:#fff; position:relative; z-index:3;
    }
    .topbar .skip-link{
      position:static; clip:auto; width:auto; height:auto; padding:.2rem .5rem;
      border-radius:6px; background:#0e6e8e; color:#fff; text-decoration:none; font-size:.9rem; line-height:1.2;
    }
    .topbar .pill-nav{
      display:flex; gap:.35rem .45rem; flex-wrap:wrap; margin-left:auto;
    }
    .topbar .pill-nav a{
      padding:.26rem .55rem; border-radius:8px; border:1px solid rgba(217,179,130,.6);
      background:#fff; font-size:.92rem; line-height:1.2; text-decoration:none;
    }
    @media(pointer:fine){ .topbar .pill-nav a:hover{ border-style:dashed; } }
    @media(max-width:900px){
      .topbar .pill-nav{flex-wrap:nowrap; overflow:auto; white-space:nowrap; scrollbar-width:thin; -webkit-overflow-scrolling:touch;}
      .topbar .pill-nav a{flex:0 0 auto;}
    }

    /* Header brand row (no nav here; prevents overlap) */
    .navbar{
      max-width:1100px; margin:0 auto; display:flex; align-items:center; gap:.5rem; padding:.45rem .9rem;
    }
    .brand img{height:24px}
    .version-badge{font-size:.7rem; opacity:.8; margin-left:.5rem;}
  </style>
</head>

<body class="page">
  <!-- Topbar: Skip + Primary Nav on one line -->
  <div class="topbar">
    <a href="#content" class="skip-link">Skip to main content</a>
    <nav class="pill-nav" aria-label="Primary">
      <a href="/">Home</a>
      <a href="/ships/">Ships</a>
      <a href="/restaurants.html">Restaurants &amp; Menus</a>
      <a href="/ports.html">Ports</a>
      <a href="/disability-at-sea.html">Disability at Sea</a>
      <a href="/drink-packages.html">Drink Packages</a>
      <a href="/packing-lists.html">Packing Lists</a>
      <a href="/planning.html">Planning</a>
      <a href="/solo.html" aria-current="page">Solo</a>
      <a href="/travel.html">Travel</a>
      <a href="/cruise-lines.html">Cruise Lines</a>
      <a href="/about-us.html">About Us</a>
    </nav>
  </div>

  <!-- Header (brand + hero only; nav lives in the topbar) -->
  <header class="hero-header">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake.png?v=3.008.019" alt="In the Wake wordmark" width="256" height="64"/>
        <span class="version-badge">v3.008.019</span>
      </div>
    </div>
    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.008.019" width="180" height="180" alt="" aria-hidden="true"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake.png?v=3.008.019" width="256" height="64" alt="In the Wake">
        <div class="tagline">A Cruise Traveler’s Logbook</div>
      </div>
      <div class="hero-credit">
        Photo © <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener noreferrer">Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="wrap layout" id="content" role="main" aria-describedby="solo-intro">
    <div class="maincol" aria-label="Solo Articles">
      <section class="cards stack">
        <article class="card card-intro" id="solo-intro">
          <h1>Solo, but Never Alone</h1>
          <p>Here on the open sea, the wake behind us tells a story — not of crowds, but of courage. <strong>In the Wake’s</strong> world-roaming authors chart this course together, penning reflections and real-world helps for those who sail solo.</p>
          <p>In the weeks ahead, our team will be sharing <em>travel logs, lessons, and laughter</em> from journeys across the world’s oceans — all written to help you navigate the beauty and balance of cruising on your own.</p>
          <p>Whether you’re plotting your first voyage or your fiftieth, consider this your friendly harbor: a place to learn, to rest, and to remember that even when you sail solo, you sail in good company.</p>
          <p>Fair winds, following seas, and space to breathe — your solo journey begins here.</p>
          <p class="tiny muted">Standards: Solo Module v3.006.solo.001 (+ v3.008 addendum)</p>

          <!-- Crawlable index -->
          <nav class="visually-hidden" aria-label="Solo articles index">
            <ul>
              <li><a href="/solo/why-i-started-solo-cruising.html">Why I Started Solo Cruising</a></li>
              <li><a href="/solo/freedom-of-your-own-wake.html">The Freedom of Your Own Wake</a></li>
            </ul>
          </nav>

          <!-- No-JS fallback -->
          <noscript>
            <section class="card">
              <h2>Articles</h2>
              <p>JavaScript is off. Open articles directly:</p>
              <ul>
                <li><a href="/solo/why-i-started-solo-cruising.html">Why I Started Solo Cruising</a></li>
                <li><a href="/solo/freedom-of-your-own-wake.html">The Freedom of Your Own Wake</a></li>
              </ul>
            </section>
          </noscript>
        </article>
      </section>

      <!-- Active article host (hash or ?a=slug) -->
      <section class="cards stack">
        <article class="card" id="solo-article-host" aria-live="polite" aria-busy="true">
          <h2>Loading your article…</h2>
          <p>Trimming the sails — this will just take a moment.</p>
        </article>
      </section>

      <!-- Disclosure -->
      <section class="cards stack">
        <article class="card" id="solo-disclosure">
          <h3>Disclosure</h3>
          <p class="pill disclosure">I’ve stood the watch aboard many ships — mostly Royal Caribbean — with more than 150 nights at sea across three oceans and over 30 nations. However these are borrowed winds, soundings taken in <a href="/authors/tina-maulsby.html">Tina's</a> wake, trimmed and charted for those who follow. ~Ken</p>
        </article>
      </section>
    </div>

    <!-- Right rail -->
    <aside class="rail" aria-label="Sidebar">
      <!-- Authors -->
      <section class="cards stack" aria-label="Authors">
        <article class="card card-authors">
          <h2>Our Authors</h2>
          <div id="authors-list" class="authors" aria-live="polite"></div>
        </article>
      </section>

      <!-- Related reading -->
      <section class="cards stack" aria-label="Related Reading">
        <article class="card">
          <h2>Related Reading</h2>
          <div id="related-rail" class="rail-items" aria-live="polite">Loading recommendations…</div>
        </article>
      </section>
    </aside>
  </main>

  <footer class="wrap" role="contentinfo">
    © 2025 In the Wake — A Cruise Traveler’s Logbook
    <span class="version-badge">v3.008.019</span>
    <div class="tiny center">Soli Deo Gloria — All work on this project is offered to God.</div>
  </footer>

  <!-- Primary nav: aria-current -->
  <script>
  (function(){
    var nav = document.querySelector('.topbar .pill-nav[aria-label="Primary"]') || document.querySelector('.topbar .pill-nav'); if(!nav) return;
    var here = location.pathname.replace(/\/+$/,'').toLowerCase();
    var links = nav.querySelectorAll('a[href]');
    for (var i=0;i<links.length;i++){
      try{
        var url = new URL(links[i].getAttribute('href'), location.origin);
        if (url.pathname.replace(/\/+$/,'').toLowerCase() === here) {
          links[i].setAttribute('aria-current','page'); links[i].classList.add('is-current');
        }
      }catch(_){}
    }
  })();
  </script>

  <!-- Solo article loader + SEO injector + hero normalizer + authors rail + related rail -->
  <script>
  (function(){
    "use strict";

    /* --- small CSS safety (unchanged) ---------------------------------- */
    (function ensureSoloHeroCSS(){
      if (document.getElementById('solo-hero-direct-child-fix')) return;
      var css = '\
        #solo-article-host figure.hero > img + img,\
        #solo-article-host .article-hero > img + img,\
        #solo-article-host .article-card .hero > img + img { display: none !important; }';
      var style = document.createElement('style');
      style.id = 'solo-hero-direct-child-fix';
      style.textContent = css;
      document.head.appendChild(style);
    })();

    /* ================ HARDENED LOADER ================================ */
    var ORIGIN         = (location.origin || (location.protocol + '//' + location.host));
    var PERMALINK_BASE = ORIGIN + "/solo/";          // full pages for sharing
    var ARTICLE_BASE   = "/solo/articles/";          // fragments folder
    var ver            = (document.querySelector('meta[name="page:version"]') && document.querySelector('meta[name="page:version"]').content) || "3.008.019";

    /* --- seeds -------------------------------------------------------- */
    var RAW_AUTHORS = [
      { id:"ken",  name:"Ken Baker",  url:"/authors/ken-baker.html", avatarBase:"/authors/img/ken1" },
      { id:"tina", name:"Tina Maulsby", url:"/authors/tina-maulsby.html", avatarBase:"/authors/img/tina3" }
    ];

    var RAW_ARTICLES = [
      { slug:"freedom-of-your-own-wake",
        title:"The Freedom of Your Own Wake",
        hero: ORIGIN + "/assets/articles/freedom-of-your-own-wake.jpg",
        dek:"A gentle case for sailing alone: rest, rhythm, and room to breathe.",
        date:"2025-10-15",
        authorId:"ken", tags:["solo","tips","reflection"] },
      { slug:"why-i-started-solo-cruising",
        title:"Why I Started Solo Cruising (and Built a Community)",
        hero: ORIGIN + "/assets/articles/why-i-started-solo-cruising.jpg",
        dek:"From that first solo gangway to a thriving community — lessons, safety, and the joy of sailing on your own terms.",
        date:"2024-05-31",
        authorId:"tina", tags:["solo","story","community","women"] }
    ];

    /* --- helpers ------------------------------------------------------ */
    function objectFromEntries(list){ var o={}; for(var i=0;i<list.length;i++){ o[list[i][0]]=list[i][1]; } return o; }
    function authorById(arr){ return objectFromEntries(arr.map(function(a){ return [a.id,a]; })); }
    function articlesByAuthor(list){
      var acc={}; for(var i=0;i<list.length;i++){ var a=list[i]; (acc[a.authorId]=acc[a.authorId]||[]).push(a); } return acc;
    }
    function permalink(slug){ return PERMALINK_BASE + encodeURIComponent(slug) + ".html"; }
    function escapeHtml(s){ return String(s||"").replace(/[&<>"']/g,function(m){return({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[m]);}); }

    function normalizeSoloHero(root){
      var scopes = root.querySelectorAll('figure.hero, .article-hero, .article-card .hero, figure.inline-hero');
      for(var i=0;i<scopes.length;i++){
        var media = scopes[i].querySelectorAll(':scope > picture, :scope > img');
        for(var j=0;j<media.length;j++){
          var el=media[j];
          el.removeAttribute('width'); el.removeAttribute('height');
          if (el.tagName==='IMG'){ if(!el.loading) el.loading='lazy'; if(!el.decoding) el.decoding='async'; }
          if (j>0 && el.parentNode){ el.parentNode.removeChild(el); }
        }
      }
    }

    function setMeta(prop, content){
      var m=document.querySelector('meta[property="'+prop+'"]');
      if(!m){ m=document.createElement('meta'); m.setAttribute('property',prop); document.head.appendChild(m); }
      m.setAttribute('content', content);
    }
    function setNameMeta(name, content){
      var m=document.querySelector('meta[name="'+name+'"]');
      if(!m){ m=document.createElement('meta'); m.setAttribute('name',name); document.head.appendChild(m); }
      m.setAttribute('content', content);
    }

    function injectArticleSEO(a){
      // Only when deep-linked (hash or ?a=)
      if(!(location.search.indexOf("a=") >= 0 || location.hash)) return;
      var url = permalink(a.slug);
      document.title = a.title + " | Solo Cruising | In the Wake (v" + ver + ")";
      setNameMeta('description', a.dek || "Solo cruising reflections and tips.");
      setMeta('og:type','article');
      setMeta('og:title', a.title + " — In the Wake");
      setMeta('og:description', a.dek || "Solo cruising reflections and tips.");
      setMeta('og:image', a.hero || (ORIGIN + "/assets/index_hero.jpg"));
      setMeta('og:url', url);
      setNameMeta('twitter:card','summary_large_image');

      // JSON-LD (dynamic)
      var olds = document.querySelectorAll('script[type="application/ld+json"].solo-article-ld');
      for(var i=0;i<olds.length;i++){ olds[i].parentNode.removeChild(olds[i]); }
      var ld = document.createElement('script');
      ld.type = "application/ld+json";
      ld.className = "solo-article-ld";
      ld.textContent = JSON.stringify({
        "@context":"https://schema.org",
        "@type":"BlogPosting",
        "headline": a.title,
        "description": a.dek || "Solo cruising reflections and tips.",
        "image": a.hero || (ORIGIN + "/assets/index_hero.jpg"),
        "url": url,
        "datePublished": a.date || undefined,
        "isPartOf": {"@type":"Blog","name":"Solo Cruising","url": ORIGIN + "/solo.html"}
      });
      document.head.appendChild(ld);
    }

    /* --- pick article -------------------------------------------------- */
    var AUTHORS = RAW_AUTHORS.slice(0);
    var ARTICLES = RAW_ARTICLES.slice(0);
    var __authorsIndex = authorById(AUTHORS);
    var __articlesByAuthor = articlesByAuthor(ARTICLES);

    var qs   = new URLSearchParams(location.search);
    var hash = (location.hash||"").replace(/^#/, "");
    var slug = qs.get("a") || hash || "";
    var last = null;
    try{ last = localStorage.getItem("solo:lastSlug"); }catch(_){}

    if(!slug){
      var pool = ARTICLES.filter(function(a){ return a.slug && a.slug!==last; });
      var pick = pool.length ? pool[Math.floor(Math.random()*pool.length)] : ARTICLES[0];
      slug = (pick && pick.slug) || (ARTICLES[0] && ARTICLES[0].slug) || "";
      if(slug){ history.replaceState(null, "", location.pathname + "#" + slug); }
    }

    var article = (function(){
      for (var i=0;i<ARTICLES.length;i++){ if(ARTICLES[i].slug===slug) return ARTICLES[i]; }
      return ARTICLES[0];
    })();
    try{ localStorage.setItem("solo:lastSlug", article.slug); }catch(_){}
    window.__soloArticle = article;

    /* --- fetch & mount article (fragment only) ------------------------- */
    var host = document.getElementById("solo-article-host");
    if(host){
      var href = ARTICLE_BASE + encodeURIComponent(article.slug) + ".html?v=" + encodeURIComponent(ver);
      fetch(href, { credentials:"omit", cache:"no-store", redirect:"follow" })
        .then(function(r){ if(!r.ok) throw new Error("HTTP "+r.status); return r.text(); })
        .then(function(html){
          // Require a clean <article> partial
          var hasArticle = /<article[\s>]/i.test(html);
          var looksFull  = /<(html|head|body|header)[\s>]/i.test(html);
          if(!hasArticle || looksFull) throw new Error("Not a partial article");

          host.innerHTML = html;
          // scrub any stray full-page elements
          var junk = host.querySelectorAll('html, head, header.hero-header, footer.site, footer.wrap');
          for (var i=0;i<junk.length;i++){ junk[i].parentNode.removeChild(junk[i]); }

          normalizeSoloHero(host);
          injectArticleSEO(article);
          ensureBylineAuthorFallback(article);
          host.setAttribute('aria-busy','false');
        })
        .catch(function(err){
          console.error("[solo] Failed to mount", article.slug, err);
          host.innerHTML =
            '<h2>We hit rough seas loading this article.</h2>'+
            '<p>Try refreshing or <a href="'+ORIGIN+'/solo.html">return to Solo home</a>.</p>';
          host.setAttribute('aria-busy','false');
        });
    }

    /* --- authors rail -------------------------------------------------- */
    function renderAuthorsRail(){
      var rail = document.getElementById("authors-list");
      if(!rail) return;
      rail.innerHTML = "";

      var sorted = AUTHORS.slice(0).sort(function(a,b){
        var ac = (__articlesByAuthor[a.id]||[]).length;
        var bc = (__articlesByAuthor[b.id]||[]).length;
        return bc - ac;
      });

      for (var s=0;s<sorted.length;s++){
        var a = sorted[s];
        var authored = (__articlesByAuthor[a.id]||[]);
        var div = document.createElement('div'); div.className = "author";
        var webp = a.avatarBase + ".webp?v=" + encodeURIComponent(ver);
        var fall = a.avatarBase + ".jpg?v=" + encodeURIComponent(ver);

        div.innerHTML =
          '<div class="avatar">'+
            '<picture>'+
              '<source type="image/webp" srcset="'+webp+'">'+
              '<img src="'+fall+'" alt="'+escapeHtml(a.name)+'" width="80" height="80" loading="lazy" decoding="async">'+
            '</picture>'+
          '</div>'+
          '<div class="meta">'+
            '<a href="'+(a.url||'#')+'"'+(a.url?' target="_blank" rel="noopener noreferrer"':'')+'>'+escapeHtml(a.name)+'</a>'+
          '</div>';

        rail.appendChild(div);

        // small roll of authored links — link to FULL pages, not fragments
        var roll = document.createElement('div'); roll.className = "roll";
        var max  = Math.min(3, authored.length);
        for(var i=0;i<max;i++){
          var art = authored[(i + Math.floor(Math.random()*Math.max(1,authored.length))) % Math.max(1,authored.length)];
          if(!art) break;
          var aTag = document.createElement('a');
          aTag.href = permalink(art.slug); // full page
          aTag.textContent = art.title;
          roll.appendChild(aTag);
        }
        rail.appendChild(roll);
      }
    }

    // hydrate from /data/authors.json if present; 404-safe
    (function loadAuthorsJson(){
      var url = '/data/authors.json?v=' + encodeURIComponent(ver);
      fetch(url, {cache:'no-store'})
        .then(function(r){ if(!r.ok) throw 0; return r.json(); })
        .then(function(j){
          if (j && j.authors && j.authors.length){
            AUTHORS = j.authors.map(function(a){
              return {
                id: (String(a.slug||'').split('-')[0]||a.slug||a.name||'').toLowerCase(),
                name: a.name,
                url: a.url,
                avatarBase: String(a.image||'').replace(/\.(webp|jpg|jpeg|png)(\?.*)?$/,'')
              };
            });
            __authorsIndex = authorById(AUTHORS);
            __articlesByAuthor = articlesByAuthor(ARTICLES);
          }
        })
        .catch(function(){ /* keep RAW_AUTHORS silently */ })
        .finally(function(){ renderAuthorsRail(); });
    })();

    /* --- related reading (prefer external index; fallback local) -------- */
    (function related(){
      var mount = document.getElementById("related-rail");
      if(!mount) return;

      var SRC = "/assets/data/articles/index.json?v=3.008.017";
      var PLACEHOLDER    = "/assets/placeholders/article-thumb.jpg?v=3.008.017";
      var AV_PLACEHOLDER = "/assets/placeholders/author.jpg?v=3.008.017";
      var CONTEXT_TAGS   = ["solo","royal-caribbean","tips","reflection"];

      function normUrl(u){ try { return new URL(u, location.origin).pathname.replace(/\/+$/,''); } catch (e){ return String(u||"").trim(); } }
      function dedupe(arr){
        var seen = Object.create(null);
        var out = [];
        for (var i=0;i<arr.length;i++){
          var key = normUrl(arr[i].url || arr[i].id || "");
          if (!seen[key]){ seen[key]=1; out.push(arr[i]); }
        }
        return out;
      }
      function byContext(list){
        var out=[]; for(var i=0;i<list.length;i++){
          var kws = Array.isArray(list[i].keywords)? list[i].keywords : [];
          for (var k=0;k<kws.length;k++){ if (CONTEXT_TAGS.indexOf(kws[k])>=0){ out.push(list[i]); break; } }
        }
        return out;
      }
      function fmtDate(iso){
        if(!iso) return "";
        try{ return new Date(iso).toLocaleDateString(undefined,{year:"numeric",month:"short",day:"numeric"}); }
        catch(e){ return ""; }
      }
      function card(a){
        var d = fmtDate(a.date);
        var isPlaceholder = !(a.image && String(a.image).trim());
        var img = isPlaceholder ? PLACEHOLDER : a.image;
        var imgAlt = isPlaceholder ? 'Placeholder image' : (a.title||'Article image');
        var author = a.author || {};
        var avatarSrc = author.image || AV_PLACEHOLDER;
        var avatarAlt = author.name ? author.name : 'Default author portrait';
        // IMPORTANT: link to FULL PAGES on solo/
        var to = a.url && /\/solo\/articles\//.test(a.url) ? a.url.replace('/solo/articles/','/solo/').replace(/\.html$/,'') + '.html' : (a.url||'#');

        return '<article class="rail-item">\
          <a class="thumb" href="'+to+'">\
            <img src="'+img+'" alt="'+escapeHtml(imgAlt)+'" width="112" height="72" style="width:112px;height:72px;object-fit:cover;border-radius:.5rem;display:block;">\
          </a>\
          <div class="meta">\
            <h4><a href="'+to+'">'+escapeHtml(a.title||"")+'</a></h4>\
            <p class="tiny muted">'+escapeHtml(d)+(author.name ? ' · <img class="avatar" src="'+avatarSrc+'" alt="'+escapeHtml(avatarAlt)+'" width="18" height="18"><a class="author" href="'+(author.url||'#')+'">'+escapeHtml(author.name)+'</a>' : '')+'</p>\
            <p class="tiny">'+escapeHtml(a.excerpt||"")+'</p>\
          </div>\
        </article>';
      }
      function render(list){
        mount.innerHTML = list.map(card).join('') || '<div class="tiny muted">No related items yet.</div>';
        // image fallbacks
        var imgs = mount.querySelectorAll(".rail-item .thumb img");
        for (var i=0;i<imgs.length;i++){
          imgs[i].addEventListener("error",function(){ if(this.dataset.fallback) return; this.dataset.fallback="1"; this.src=PLACEHOLDER; },{once:true});
        }
        var avs = mount.querySelectorAll(".rail-item .avatar");
        for (var j=0;j<avs.length;j++){
          avs[j].addEventListener("error",function(){ if(this.dataset.fallback) return; this.dataset.fallback="1"; this.src=AV_PLACEHOLDER; },{once:true});
        }
      }

      var localSeed = ARTICLES.map(function(a){
        var auth = __authorsIndex[a.authorId] || {};
        return { id:a.slug, title:a.title, url:permalink(a.slug), date:a.date,
                 excerpt:a.dek, image:a.hero, author:{ name:auth.name, url:auth.url } };
      });

      fetch(SRC,{cache:"no-store"})
        .then(function(r){ return r.ok ? r.json() : Promise.reject(); })
        .then(function(json){
          var list = Array.isArray(json && json.articles) ? json.articles : [];
          list = byContext(dedupe([].concat(list, localSeed))).slice(0,5);
          render(list);
        })
        .catch(function(){
          var list = byContext(dedupe(localSeed)).slice(0,3);
          render(list);
        });
    })();

    /* --- prevent duplicate compass inside mounted article -------------- */
    (function ensureSingleCompass(){
      var host = document.getElementById('solo-article-host');
      if (!host) return;
      var all = host.querySelectorAll('.hero-compass');
      for (var i=0;i<all.length;i++){ all[i].parentNode.removeChild(all[i]); }
    })();

    /* --- byline fallback ------------------------------------------------ */
    function ensureBylineAuthorFallback(a){
      if (document.querySelector('#solo-article-host footer.byline')) return;
      var mounted = document.getElementById('solo-article-host'); if(!mounted) return;
      var auth = __authorsIndex[a.authorId] || null; if(!auth) return;

      var webp = auth.avatarBase + ".webp?v=" + encodeURIComponent(ver);
      var fall = auth.avatarBase + ".jpg?v=" + encodeURIComponent(ver);

      var footer = document.createElement('footer');
      footer.className = "byline";
      footer.innerHTML =
        '<div class="avatar" style="width:48px;height:48px;border-radius:999px;overflow:hidden;flex:none">'+
          '<picture>'+
            '<source type="image/webp" srcset="'+webp+'">'+
            '<img src="'+fall+'" alt="'+escapeHtml(auth.name)+'" width="48" height="48" loading="lazy" decoding="async" style="width:100%;height:100%;object-fit:cover">'+
          '</picture>'+
        '</div>'+
        '<div style="margin-left:.5rem">'+
          '<strong><a href="'+(auth.url||'#')+'"'+(auth.url?' target="_blank" rel="noopener noreferrer"':'')+'>'+escapeHtml(auth.name)+'</a></strong>'+
          '<a class="share" href="#" role="button" style="margin-left:.75rem">Share this article</a>'+
        '</div>';
      mounted.appendChild(footer);

      // share button copy
      var el = footer.querySelector('.share');
      if(el){
        var url = permalink(a.slug);
        el.addEventListener('click', function(e){
          e.preventDefault();
          if (navigator.clipboard && navigator.clipboard.writeText){
            navigator.clipboard.writeText(url).then(function(){
              el.textContent = "Link copied!";
              setTimeout(function(){ el.textContent = "Share this article"; }, 1500);
            });
          } else {
            window.prompt("Copy this link:", url);
          }
        });
        el.setAttribute('role','button'); el.setAttribute('tabindex','0');
        el.addEventListener('keydown', function(e){ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); el.click(); }});
      }
    }

  })();
  </script>
</body>
</html>
