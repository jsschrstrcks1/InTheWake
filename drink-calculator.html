<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="version" content="10.0.0"/>
<title>Royal Caribbean Drink Package Calculator 2025 | Is It Worth It?</title>
<meta name="description" content="Compare Soda, Refreshment, and Deluxe vs √†-la-carte with live break-even chart. Free Royal Caribbean drink calculator with Crown & Anchor support."/>
<link rel="canonical" href="https://cruisinginthewake.com/drink-calculator.html"/>

<!-- Favicon / PWA -->
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/in_the_wake_icon_32x32.png">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#0e6e8e">
  <meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' 'nonce-RANDOM_NONCE' https://cdn.jsdelivr.net;
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https:;
  font-src 'self' https://cdn.jsdelivr.net;
  connect-src 'self' https://api.frankfurter.app https://api.exchangerate.host;
  frame-ancestors 'none';
  base-uri 'self';
  form-action 'self';
">

<!-- Performance -->
<link rel="preconnect" href="https://api.frankfurter.app">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

<!-- Chart.js + Module Loader -->
<script type="module">
  import CONFIG from '/assets/js/modules/config.js';
  import { Security } from '/assets/js/modules/security.js';
  import SafeStorage from '/assets/js/modules/storage.js';
  import Validation from '/assets/js/modules/validation.js';
  import currency from '/assets/js/modules/currency.js';
  
  // Initialize
  document.addEventListener('DOMContentLoaded', async () => {
    await currency.init();
    
    // Expose globally
    window.ITW = {
      CONFIG,
      Security,
      SafeStorage,
      Validation,
      currency
    };
    
    // Dispatch ready event
    document.dispatchEvent(new Event('itw:modules-ready'));
  });
</script>


<!-- 4. Load calculator (after modules) -->
<script src="/assets/js/drink-math.js" type="module" defer></script>
<script src="/assets/js/drink-calculator.app.js" defer></script>
<script src="/assets/js/calculator.ui.js" defer></script>
<!-- Critical CSS (inline for performance) -->
<style>
  <?php include 'assets/css/critical.css'; ?>
</style>

<!-- Deferred CSS -->
<link rel="preload" href="/assets/css/calculator.css?v=1.0.0" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/assets/css/components.css?v=1.0.0" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
  <link rel="stylesheet" href="/assets/css/calculator.css?v=1.0.0">
  <link rel="stylesheet" href="/assets/css/components.css?v=1.0.0">
</noscript>
  
  <style>
/* Critical CSS inline */
:root {
  --sea: #0a3d62;
  --accent: #0e6e8e;
  --card: #fff;
  --bd: #e5e7eb;
  --foam: #e6f4f8;
  --rope: #d9b382;
  --shadow: 0 2px 6px rgba(8,48,65,.08);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, sans-serif;
  line-height: 1.5;
  color: #083041;
  background: #f8fbfc;
}

.wrap {
  max-width: 1100px;
  margin: 0 auto;
  padding: 20px 14px;
}

.card {
  background: var(--card);
  border: 2px solid var(--rope);
  border-radius: 12px;
  padding: 1rem;
  margin: 0.8rem 0;
  box-shadow: var(--shadow);
}

.sr-only {
  position: absolute;
  left: -9999px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* Loading state */
.loading {
  text-align: center;
  padding: 2rem;
  color: #64748b;
}

.loading::after {
  content: '';
  display: inline-block;
  width: 2rem;
  height: 2rem;
  border: 3px solid #cbd5e1;
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin-left: 0.5rem;
  vertical-align: middle;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
</style>

<!-- Full styles loaded after -->
<link rel="stylesheet" href="/assets/css/calculator.css?v=10.0.0">
</head>

<body>
<noscript>
  <div style="position:fixed;top:0;left:0;right:0;z-index:10000;padding:1rem;background:#fef3c7;border-bottom:3px solid #f59e0b;text-align:center;font-weight:700">
    ‚ö†Ô∏è This calculator requires JavaScript. Please enable it and reload.
  </div>
</noscript>

<a href="#content" class="sr-only">Skip to main content</a>

<!-- ARIA Live Regions -->
<div id="a11y-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
<div id="a11y-alerts" role="alert" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

<header class="hero-header" role="banner">
  <div class="navbar">
    <div class="brand">
      <img src="/assets/logo_wake.png" width="256" height="64" alt="In the Wake">
      <span class="tiny version-badge">v10.0.0</span>
    </div>
    <nav class="itw-nav" aria-label="Primary">
      <div class="nav-item"><a class="chip" href="/">Home</a></div>
      <div class="nav-item"><a class="chip" href="/drink-calculator.html" aria-current="page">Calculator</a></div>
      <div class="nav-item"><a class="chip" href="/about-us.html">About</a></div>
    </nav>
  </div>
</header>

<main class="wrap" id="content">
  <div class="loading" id="loading-state">
    <span>Loading calculator</span>
  </div>
  
  <section id="calculator-app" style="display:none;">
    <h1>Royal Caribbean Drink Package Calculator</h1>
    
    <div class="banner" role="status" aria-live="polite">
      <span id="best-chip" class="badge">Calculating...</span>
      <span id="best-text" class="small"></span>
    </div>
    
    <p id="fallback-banner" hidden class="small" style="background:#fff7ed;border:1px solid #fed7aa;border-radius:6px;padding:.5rem">
      ‚ö†Ô∏è Live prices unavailable; using defaults
    </p>
    
    <section class="card inputs" aria-labelledby="calc-title">
      <h2 id="calc-title">
        <span id="totals">Calculating...</span>
        <small class="small"> ‚Äî includes 18% gratuity</small>
      </h2>
      
      <div class="bd">
        <!-- Currency Selector -->
        <div class="controls-inline">
          <label for="currency-select">Display currency</label>
          <select id="currency-select">
            <option value="USD">USD $</option>
            <option value="GBP">GBP ¬£</option>
            <option value="EUR">EUR ‚Ç¨</option>
            <option value="CAD">CAD $</option>
            <option value="AUD">AUD $</option>
          </select>
        </div>
        
        <hr style="border:0;border-top:1px dashed var(--bd);margin:12px 0"/>
        
        <!-- Basic Inputs -->
        <div class="row">
          <label for="input-days">Cruise days</label>
          <input id="input-days" type="text" inputmode="numeric" value="7" data-input="days">
        </div>
        
        <div class="row">
          <label for="input-seadays">Sea days</label>
          <input id="input-seadays" type="text" inputmode="numeric" value="3" data-input="seadays">
        </div>
        
        <!-- Sea Day Weighting -->
        <fieldset style="border:1px solid var(--bd);padding:12px;border-radius:10px;margin-top:12px">
          <legend style="font-weight:800">Sea/Port Variability</legend>
          
          <div class="row">
            <label>
              <input type="checkbox" id="sea-toggle" checked data-input="seaapply">
              Apply weighting
            </label>
            <div class="controls-inline">
              <label for="sea-weight">¬±%</label>
              <input id="sea-weight" type="range" min="0" max="40" value="20" data-input="seaweight">
              <span id="sea-weight-val">20%</span>
            </div>
          </div>
        </fieldset>
        
        <!-- Group -->
        <fieldset style="border:1px solid var(--bd);padding:12px;border-radius:10px;margin-top:12px">
          <legend style="font-weight:800">Group in stateroom</legend>
          
          <div class="row">
            <label for="input-adults">Adults (21+)</label>
            <input id="input-adults" type="text" inputmode="numeric" value="1" data-input="adults">
          </div>
          
          <div class="row">
            <label for="input-minors">Minors (under 21)</label>
            <input id="input-minors" type="text" inputmode="numeric" value="0" data-input="minors">
          </div>
        </fieldset>
        
        <!-- Drinks -->
        <fieldset style="border:1px solid var(--bd);padding:12px;border-radius:10px;margin-top:12px">
          <legend style="font-weight:800">Daily drinks (average)</legend>
          
          <div class="row"><label>Soda</label><input data-input="soda" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Specialty coffee</label><input data-input="coffee" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Premium tea</label><input data-input="teaprem" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Fresh juice</label><input data-input="freshjuice" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Mocktail</label><input data-input="mocktail" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Energy drink</label><input data-input="energy" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Milkshake</label><input data-input="milkshake" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Bottled water</label><input data-input="bottledwater" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Beer</label><input data-input="beer" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Wine</label><input data-input="wine" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Cocktail</label><input data-input="cocktail" type="text" inputmode="decimal" value="0"></div>
          <div class="row"><label>Spirits</label><input data-input="spirits" type="text" inputmode="decimal" value="0"></div>
        </fieldset>
        
        <!-- Chart -->
        <div id="breakeven-wrap" style="margin-top:18px">
          <canvas id="breakeven-chart" width="900" height="320" aria-label="Package comparison chart"></canvas>
          <div id="range-note" class="tiny muted"></div>
        </div>
        
        <!-- Category Breakdown -->
        <div id="category-breakdown" class="category-summary" hidden>
          <h4>üí∞ Where Your Money Goes (per day)</h4>
          <div class="category-grid" id="category-grid"></div>
        </div>
        
        <!-- Actions -->
        <div class="controls-inline" style="margin-top:16px">
          <button class="btn" type="button" onclick="window.print()">Print Results</button>
          <button class="btn ghost" type="button" onclick="window.shareScenario()">Share</button>
          <button class="btn" type="button" onclick="window.resetInputs()">Reset</button>
        </div>
      </div>
    </section>
    
    <!-- Group Breakdown -->
    <section class="card" id="group-breakdown" hidden>
      <h2>Group Breakdown (Per Person)</h2>
      <table style="width:100%;border-collapse:collapse">
        <thead>
          <tr><th>Traveler</th><th>Package</th><th>Daily</th><th>Trip</th></tr>
        </thead>
        <tbody id="group-table-body"></tbody>
      </table>
    </section>
  </section>
</main>

<footer class="wrap" style="border-top:2px solid var(--bd);padding-top:1.5rem;text-align:center">
  <p>¬© 2025 In the Wake. All rights reserved.</p>
  <p class="tiny"><a href="/terms.html">Terms</a> | <a href="/privacy.html">Privacy</a></p>
</footer>

<script>
// Show calculator when core is ready
window.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    const loading = document.getElementById('loading-state');
    const app = document.getElementById('calculator-app');
    
    if (loading) loading.style.display = 'none';
    if (app) app.style.display = 'block';
  }, 500);
});
</script>

</body>
</html>
