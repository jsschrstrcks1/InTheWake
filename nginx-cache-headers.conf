# Nginx Cache Headers Configuration
# Add this to your nginx server block
# Long-term cache for versioned assets (1 year)
# Soli Deo Gloria

# Versioned CSS and JS - cache for 1 year
location ~* \.(css|js)$ {
    expires 1y;
    add_header Cache-Control "public, max-age=31536000, immutable";
}

# Images - cache for 1 year
location ~* \.(webp|png|jpg|jpeg|svg|ico)$ {
    expires 1y;
    add_header Cache-Control "public, max-age=31536000, immutable";
}

# JSON data files - cache for 1 day with revalidation
location ~* \.json$ {
    expires 1d;
    add_header Cache-Control "public, max-age=86400, must-revalidate";
}

# HTML files - cache for 1 hour with revalidation
location ~* \.html$ {
    expires 1h;
    add_header Cache-Control "public, max-age=3600, must-revalidate";
}

# Manifest files - cache for 30 days
location ~* \.(webmanifest|manifest)$ {
    expires 30d;
    add_header Cache-Control "public, max-age=2592000";
}

# Security headers (apply to all responses)
add_header X-Frame-Options "SAMEORIGIN" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "no-referrer-when-downgrade" always;

# Enable gzip compression
gzip on;
gzip_vary on;
gzip_types text/plain text/css text/xml text/javascript application/javascript application/json image/svg+xml;
gzip_min_length 1000;
