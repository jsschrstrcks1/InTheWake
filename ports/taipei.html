<!--
Soli Deo Gloria
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="ai-summary" content="First-person logbook guide to Taipei (Keelung) cruise port with tips for visiting night markets, Jiufen, Taroko Gorge, temples, and experiencing Taiwan's warm hospitality and incredible food."/>
  <meta name="last-reviewed" content="2025-12-14"/>
  <meta name="content-protocol" content="ICP-Lite v1.0"/>
  <title>Taipei (Keelung) Port Guide — Night Markets & Temple Treasures | In the Wake</title>
  <meta name="description" content="First-person logbook guide to Taipei via Keelung Port — night markets, Jiufen's mountain charm, Taroko Gorge, Longshan Temple, and discovering Taiwan's incredible food culture."/>
  <link rel="canonical" href="https://cruisinginthewake.com/ports/taipei.html"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/in_the_wake_icon_32x32.png"/>
  <!-- Service Worker Registration -->
  <script>
  if('serviceWorker' in navigator){
    window.addEventListener('load',()=>navigator.serviceWorker.register('/sw.js').catch(()=>{}));
  }
  </script>

  <link rel="stylesheet" href="/assets/styles.css"/>

  <!-- Leaflet CSS for interactive maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <link rel="stylesheet" href="/assets/css/components/port-map.css?v=2.0.0"/>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://cruisinginthewake.com/"},
      {"@type": "ListItem", "position": 2, "name": "Ports", "item": "https://cruisinginthewake.com/ports.html"},
      {"@type": "ListItem", "position": 3, "name": "Taipei (Keelung)", "item": "https://cruisinginthewake.com/ports/taipei.html"}
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "How far is Keelung Port from Taipei city center?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Keelung Port is about 45 minutes to 1 hour from downtown Taipei by taxi, bus, or train. The train is the most reliable option — frequent service runs from Keelung Station to Taipei Main Station for about $2 USD."
        }
      },
      {
        "@type": "Question",
        "name": "Is Jiufen worth visiting from Keelung?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Absolutely. Jiufen is only 30 minutes from Keelung port and offers stunning mountain views, historic teahouses, and charming lantern-lit streets. It's said to have inspired scenes in Spirited Away. Go early to beat the crowds."
        }
      },
      {
        "@type": "Question",
        "name": "What should I eat at a Taipei night market?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Must-tries include stinky tofu (more delicious than it smells!), oyster omelet, beef noodle soup, bubble tea, scallion pancakes, and xiao long bao (soup dumplings). Don't miss fresh fruit smoothies and shaved ice desserts."
        }
      },
      {
        "@type": "Question",
        "name": "Do I need cash or can I use credit cards in Taipei?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Carry cash for night markets, street vendors, and small shops. Many restaurants and department stores accept cards, but Taiwan is still largely cash-based. ATMs are plentiful and easy to use with international cards."
        }
      },
      {
        "@type": "Question",
        "name": "Is the Keelung port walkable to the city center?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! Keelung's Miaokou Night Market is just a 10-15 minute walk from the cruise terminal, making it one of the most convenient port-to-attraction experiences in Asia. The famous Zhongzheng Park is also within walking distance."
        }
      }
    ]
  }
  </script>

  <!-- LCP Optimization: Preload critical hero images -->
  <link rel="preload" as="image" href="/assets/logo_wake_560.png" fetchpriority="high"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg?v=3.010.400" fetchpriority="high"/>

  <!-- Swiper CSS/JS (primary + CDN fallback) -->
  <script>
  (function ensureSwiper(){
    function addCSS(h){ const l=document.createElement('link'); l.rel='stylesheet'; l.href=h; document.head.appendChild(l); }
    function addJS(src, ok, fail){
      const s=document.createElement('script'); s.src=src; s.async=true; s.onload=ok; s.onerror=fail||function(){}; document.head.appendChild(s);
    }
    const primaryCSS="https://cruisinginthewake.com/vendor/swiper/swiper-bundle.min.css";
    const primaryJS ="https://cruisinginthewake.com/vendor/swiper/swiper-bundle.min.js";
    const cdnCSS    ="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css";
    const cdnJS     ="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js";
    addCSS(primaryCSS);
    addJS(primaryJS, function(){ window.__swiperReady=true; }, function(){ addCSS(cdnCSS); addJS(cdnJS, function(){ window.__swiperReady=true; }); });
  })();
  </script>
</head>
<body class="page">
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <!-- ARIA Live Regions -->
  <div id="a11y-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  <div id="a11y-alerts" role="alert" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

  <header class="hero-header" role="banner">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
        <span class="tiny version-badge" aria-label="Site version V1.Beta">V1.Beta</span>
      </div>
            <nav class="site-nav" aria-label="Main site navigation">
        <a class="nav-pill" href="/">Home</a>

        <!-- Planning Dropdown -->
        <div class="nav-dropdown" id="nav-planning">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Planning <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/planning.html">Planning (overview)</a>
            <a href="/ships.html">Ships</a>
            <a href="/restaurants.html">Restaurants &amp; Menus</a>
            <a href="/ports.html">Ports</a>
            <a href="/drink-packages.html">Drink Packages</a>
            <a href="/drink-calculator.html">Drink Calculator</a>
            <a href="/stateroom-check.html">Stateroom Check</a>
            <a href="/cruise-lines.html">Cruise Lines</a>
            <a href="/packing-lists.html">Packing Lists</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-dropdown" id="nav-travel">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Travel <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/travel.html">Travel (overview)</a>
            <a href="/solo.html">Solo</a>
          </div>
        </div>

        <a class="nav-pill" href="/tools/port-tracker.html">Port Logbook</a>
        <a class="nav-pill" href="/tools/ship-tracker.html">Ship Logbook</a>
        <a class="nav-pill" href="/search.html">Search</a>
        <a class="nav-pill" href="/about-us.html">About</a>
      </nav></div>

    <!-- Hero -->
    <div class="hero">
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.400" width="180" height="180" alt="" aria-hidden="true" decoding="async"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline" aria-hidden="true">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <main class="wrap page-grid" id="main-content" role="main">
    <nav aria-label="Breadcrumb" style="grid-column: 1 / -1; margin-bottom: 1rem;"><ol style="list-style: none; padding: 0; margin: 0; font-size: 0.9rem; color: #666;"><li style="display: inline;"><a href="/">Home</a> &rsaquo; </li><li style="display: inline;"><a href="/ports.html">Ports</a> &rsaquo; </li><li style="display: inline;" aria-current="page">Taipei (Keelung)</li></ol></nav>

    <div style="grid-column: 1; grid-row: 1;">
    <div class="port-hero">
        <div class="port-hero-image">
          <img src="/ports/img/taipei/taipei-hero.webp" alt="Taipei skyline featuring Taipei 101 tower rising above the city" loading="eager" fetchpriority="high" onerror="this.onerror=null; this.src='/assets/brand/placeholder-port.webp';"/>
          <div class="port-hero-overlay">
            <h1 class="port-hero-title">Taipei (Keelung)</h1>
          </div>
        </div>
        <p class="port-hero-credit">Photo: <a href="https://commons.wikimedia.org/wiki/Category:Taipei" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA)</p>
      </div>

    <article class="card"><h1>Taipei (Keelung): Where Night Markets Meet Mountain Temples</h1>

      <div class="logbook-entry clearfix">
        <p>The first thing that struck me about arriving in Keelung wasn't the port itself — it was the warm drizzle (they call this the "rainy port" for good reason) and the immediate, overwhelming kindness of every single person I encountered. Taiwan has a reputation as one of Asia's friendliest destinations, and after spending a day exploring from Keelung to Taipei's night markets to the mountain village of Jiufen, I understood why cruisers consistently rank this port among their absolute favorites.</p>

        <p>Keelung Port has welcomed ships since 1886, making it one of Asia's historic maritime gateways. But what makes it special today isn't history — it's the perfect combination of convenience (Keelung's own Miaokou Night Market is a 10-minute walk from the ship!), accessibility (45 minutes by train to Taipei's modern heart), and nearby treasures like Jiufen's lantern-lit teahouses perched impossibly on mountain slopes.</p>

        <div class="poignant-highlight">
          <strong>The Moment That Stays With Me:</strong> Sitting in a 100-year-old teahouse in Jiufen's A-Mei Tea House, watching the rain fall on red lanterns while sipping oolong tea so fragrant it felt like drinking a cloud. Below me, the East China Sea stretched gray and endless. The owner told me this view inspired scenes in Miyazaki's <em>Spirited Away</em>, and I believed every word — magic feels close in Taiwan.
        </div>

        <p>What surprised me most was the food. Not just how good it was (I knew that beforehand), but how generous, how unpretentious, how joyfully the vendors at Shilin Night Market insisted I try samples before buying. Oyster omelets, stinky tofu that smelled terrible and tasted incredible, beef noodle soup so rich I thought about it for weeks afterward, bubble tea served with a smile — Taiwan's food culture isn't about Michelin stars; it's about warmth, flavor, and sharing.</p>
      </div>

      <!-- Port Essentials -->
      <section class="port-section">
        <h3>Port Essentials</h3>
        <p class="tiny" style="margin-bottom: 0.75rem; font-style: italic; color: #678;">What you need to know before you dock.</p>

        <ul>
          <li><strong>Terminal:</strong> Keelung Cruise Terminal — modern facility in northern Taiwan's historic port city</li>
          <li><strong>Distance to Taipei:</strong> 45 minutes to 1 hour by train, bus, or taxi (about 30 km / 19 miles)</li>
          <li><strong>Distance to Jiufen:</strong> 30 minutes by taxi or bus from Keelung Port</li>
          <li><strong>Tender:</strong> No — ships dock directly at the pier</li>
          <li><strong>Currency:</strong> New Taiwan Dollar (NT$ or TWD); credit cards accepted in major stores</li>
          <li><strong>Language:</strong> Mandarin Chinese; English signage common in Taipei, less so in Keelung</li>
          <li><strong>Time Zone:</strong> CST (UTC+8) — no daylight saving time</li>
          <li><strong>Best Season:</strong> October–December (warm, less rain); avoid July–September (typhoon season)</li>
          <li><strong>Port History:</strong> Established 1886 under Qing Dynasty; major Pacific shipping hub</li>
        </ul>
      </section>

      <!-- Getting Around -->
      <section class="port-section">
        <h3>Getting Around</h3>
        <p class="tiny" style="margin-bottom: 0.75rem; font-style: italic; color: #678;">Taiwan's public transportation is excellent and affordable.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Train to Taipei</h4>
        <p>Keelung Station is about 10 minutes from the port by taxi (NT$150-200 / $5-7). Frequent trains run to Taipei Main Station — the journey takes 45 minutes to 1 hour and costs about NT$60 ($2). Buy tickets at the station; trains run every 15-20 minutes. This is the most reliable option.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Taipei MRT (Metro)</h4>
        <p>Once in Taipei, the MRT is spotless, efficient, and cheap. Get an EasyCard (rechargeable transit card) at any MRT station — it works on metro, buses, and even convenience stores. Fares run NT$20-50 ($0.65-$1.65).</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Taxis</h4>
        <p>Metered and honest. Flag fall is NT$70 ($2.30), and a ride from port to Keelung train station costs about NT$150-200. To Jiufen: NT$400-500 ($13-16). Drivers rarely speak English, so have your destination written in Chinese characters.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Buses to Jiufen</h4>
        <p>Bus 788 or 1062 from Keelung Station to Jiufen Old Street takes about 30 minutes and costs NT$30-50 ($1-1.65). Buses run frequently. This is the budget-friendly option if you're comfortable with local transit.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Walking in Keelung</h4>
        <p>Miaokou Night Market is just 10-15 minutes on foot from the cruise terminal — one of the most convenient port-to-attraction walks in Asia. Zhongzheng Park (with the giant Guanyin statue) is also walkable.</p>
      </section>

      <!-- Top Experiences -->
      <section class="port-section">
        <h3>Top Experiences</h3>
        <p class="tiny" style="margin-bottom: 0.75rem; font-style: italic; color: #678;">What I'd do with limited time.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Jiufen Old Street</h4>
        <p>This mountain village 30 minutes from Keelung is absolutely enchanting — narrow stone staircases, red lanterns, ocean views, and historic teahouses. A-Mei Tea House is the most famous (said to inspire <em>Spirited Away</em>). Go early morning to avoid afternoon crowds. Don't miss taro balls and sweet potato desserts.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Miaokou Night Market (Keelung)</h4>
        <p>Just 10 minutes from the ship, this is one of Taiwan's most famous night markets. Must-tries: nutritional sandwich (a sweet peanut-pork pastry), crab soup, tempura, and bubble tea. Open afternoon through late evening. Expect crowds but amazing food.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Shilin Night Market (Taipei)</h4>
        <p>If you make it to Taipei, Shilin is the largest and most famous night market. Oyster omelets, stinky tofu, beef noodle soup, fried chicken, shaved ice — sensory overload in the best possible way. Take the MRT to Jiantan Station. Open evenings only.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Longshan Temple (Taipei)</h4>
        <p>One of Taiwan's oldest and most beautiful temples (built 1738). The ornate carvings, incense smoke, and devoted worshippers create an atmosphere of profound reverence. Free entry. Dress modestly. Take MRT to Longshan Temple Station.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Taipei 101</h4>
        <p>Once the world's tallest building, this 508-meter tower offers stunning city views from the 89th floor observatory. Book tickets online to skip lines. Sunset timing is magical. Budget: NT$600 ($19) for adults.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">National Palace Museum (Taipei)</h4>
        <p>One of the world's greatest collections of Chinese art and artifacts — over 700,000 pieces spanning 8,000 years. The famous jade cabbage and meat-shaped stone are must-sees. Allow 2-3 hours minimum. Take MRT to Shilin Station, then bus or taxi.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Zhongzheng Park (Keelung)</h4>
        <p>Hilltop park with a massive white Guanyin (Goddess of Mercy) statue overlooking Keelung harbor. The views are spectacular, and the 22.5-meter statue is impressive. Walkable from the cruise terminal (uphill), or take a short taxi ride.</p>

        <h4 style="margin-top: 1rem; color: var(--ink, #1a2a3a);">Taroko Gorge (Full-Day Excursion)</h4>
        <p>If your ship stays overnight or you're on a longer call, Taroko National Park's marble gorge is one of Taiwan's natural wonders — dramatic cliffs, temples carved into rock, turquoise rivers. It's 2-3 hours from Keelung, so this requires a full-day shore excursion through the ship or private tour.</p>
      </section>

      <!-- Interactive Port Map -->
      <section class="port-section port-map-section" id="port-map-section">
        <h3>Taipei/Keelung Area Map</h3>
        <p class="map-intro">Interactive map showing Keelung cruise terminal, Taipei attractions, Jiufen, and locations mentioned in this guide. Click any marker for details and directions.</p>
        <div id="taipei-port-map" class="port-map-container" role="application" aria-label="Interactive map of Taipei and Keelung area">
          <noscript>
            <p style="padding: 2rem; text-align: center; color: #678;">
              Enable JavaScript to view the interactive map.
            </p>
          </noscript>
        </div>
      </section>

      <!-- Practical Tips -->
      <section class="port-section">
        <h3>Practical Tips</h3>
        <p class="tiny" style="margin-bottom: 0.75rem; font-style: italic; color: #678;">Things I wish I'd known.</p>

        <ul>
          <li><strong>Bring Cash:</strong> Night markets, street vendors, and small shops operate cash-only. ATMs are plentiful (7-Eleven and FamilyMart convenience stores have them). International cards work fine.</li>
          <li><strong>Weather:</strong> Keelung is called the "rainy port" for a reason — pack a light rain jacket or umbrella regardless of forecast. Weather changes quickly in the mountains.</li>
          <li><strong>Temple Etiquette:</strong> Remove hats, speak quietly, don't point feet at Buddha statues. It's fine to take photos unless signs prohibit it. Small donations are appreciated but not required.</li>
          <li><strong>Language Barrier:</strong> English is limited outside Taipei's tourist areas. Download Google Translate offline and have your destination written in Chinese characters. Taiwanese are incredibly patient and helpful despite the language gap.</li>
          <li><strong>Tipping:</strong> Not expected or customary in Taiwan. Service charges are sometimes included at nicer restaurants, but street food and taxis don't expect tips.</li>
          <li><strong>Sim Cards / WiFi:</strong> Free WiFi is common in Taipei MRT stations and convenience stores. If you need data, prepaid tourist SIM cards are available at the airport and some convenience stores.</li>
          <li><strong>Transportation Apps:</strong> Download the Taiwan Railway app for train schedules. Google Maps works well for navigation. Uber isn't widely used — stick with metered taxis.</li>
          <li><strong>Return Time:</strong> Allow extra time to get back to the ship. Traffic between Taipei and Keelung can be unpredictable, especially late afternoon. Build in a 2-hour buffer if exploring Taipei.</li>
        </ul>
      </section>

      <!-- FAQ Section -->
      <section class="port-section">
        <h3>Frequently Asked Questions</h3>

        <p><strong>Q: How far is Keelung Port from Taipei city center?</strong><br/>
        A: About 45 minutes to 1 hour by train, bus, or taxi. The train is the most reliable option — frequent service runs from Keelung Station to Taipei Main Station for about NT$60 (roughly $2 USD).</p>

        <p><strong>Q: Is Jiufen worth visiting from Keelung?</strong><br/>
        A: Absolutely. Jiufen is only 30 minutes from Keelung port and offers stunning mountain views, historic teahouses, and charming lantern-lit streets. It's said to have inspired scenes in <em>Spirited Away</em>. Go early to beat the crowds.</p>

        <p><strong>Q: What should I eat at a Taipei night market?</strong><br/>
        A: Must-tries include stinky tofu (more delicious than it smells!), oyster omelet, beef noodle soup, bubble tea, scallion pancakes, and xiao long bao (soup dumplings). Don't miss fresh fruit smoothies and shaved ice desserts.</p>

        <p><strong>Q: Do I need cash or can I use credit cards in Taipei?</strong><br/>
        A: Carry cash for night markets, street vendors, and small shops. Many restaurants and department stores accept cards, but Taiwan is still largely cash-based. ATMs are plentiful and easy to use with international cards.</p>

        <p><strong>Q: Is the Keelung port walkable to the city center?</strong><br/>
        A: Yes! Keelung's Miaokou Night Market is just a 10-15 minute walk from the cruise terminal, making it one of the most convenient port-to-attraction experiences in Asia. The famous Zhongzheng Park is also within walking distance (uphill).</p>

        <p><strong>Q: Is Taiwan safe for cruise passengers?</strong><br/>
        A: Extremely safe. Taiwan has very low crime rates and is considered one of Asia's safest destinations. Solo travelers, including women, consistently report feeling very secure.</p>
      </section>

      <p style="margin-top: 2rem;"><a href="/ports.html">&larr; Back to Ports Guide</a></p>
    </article>
    </div>

    <aside class="rail" style="grid-column: 2; grid-row: 1; align-self: start;">
      <!-- At a Glance -->
      <section class="card" aria-labelledby="glance-heading">
        <h3 id="glance-heading">At a Glance</h3>
        <div class="at-a-glance-grid">
          <div class="at-a-glance-item">
            <strong>Country</strong>
            <span>Taiwan</span>
          </div>
          <div class="at-a-glance-item">
            <strong>Region</strong>
            <span>Asia</span>
          </div>
          <div class="at-a-glance-item">
            <strong>Language</strong>
            <span>Mandarin Chinese</span>
          </div>
          <div class="at-a-glance-item">
            <strong>Currency</strong>
            <span>TWD (NT$)</span>
          </div>
          <div class="at-a-glance-item">
            <strong>Coordinates</strong>
            <span>25.1276°N, 121.7392°E</span>
          </div>
          <div class="at-a-glance-item">
            <strong>Pier</strong>
            <span>Keelung Cruise Terminal</span>
          </div>
          <div class="at-a-glance-item">
            <strong>To Taipei</strong>
            <span>45 min by train</span>
          </div>
          <div class="at-a-glance-item">
            <strong>Best For</strong>
            <span>Night Markets, Temples</span>
          </div>
          <div class="at-a-glance-item">
            <strong>Port Established</strong>
            <span>1886</span>
          </div>
          <div class="at-a-glance-item">
            <strong>Walking Distance</strong>
            <span>Miaokou Market (15 min)</span>
          </div>
        </div>
      </section>

      <!-- Author Card -->
      <section class="card author-card-vertical" aria-labelledby="author-heading">
        <h3 id="author-heading">About the Author</h3>
        <a href="/authors/ken-baker.html" aria-label="View Ken Baker's profile">
          <picture>
            <source srcset="/authors/img/ken1.webp?v=3.010.400" type="image/webp"/>
            <img class="author-avatar" src="/authors/img/ken1_96.webp" srcset="/authors/img/ken1_96.webp 1x, /authors/img/ken1_192.webp 2x" width="96" height="96" alt="Author photo" decoding="async" loading="lazy"/>
          </picture>
        </a>
        <h4><a href="/authors/ken-baker.html">Ken Baker</a></h4>
        <p class="tiny">Founder of In the Wake; writer and editor of the logbook.</p>
        <p class="tiny"><a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a></p>
      </section>

      <!-- Nearby Ports Rail -->
      <section class="card" aria-labelledby="nearby-ports-title">
        <h3 id="nearby-ports-title">Nearby Ports</h3>
        <p class="tiny" style="margin-bottom: 0.75rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Other ports in this region:
        </p>
        <div id="nearby-ports" class="rail-list" aria-live="polite"></div>
      </section>

      <!-- Recent Articles rail -->
      <section class="card" aria-labelledby="recent-rail-title">
        <h3 id="recent-rail-title">Recent Stories</h3>
        <p class="tiny" style="margin-bottom: 1rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Real cruising experiences, practical guides, and heartfelt reflections from our community.
        </p>
        <div id="recent-rail" class="rail-list" aria-live="polite"></div>
        <p id="recent-rail-fallback" class="tiny" style="display:none">Loading articles...</p>
      </section>

      <!-- Whimsical Distance Units -->
      <section class="card" id="whimsical-units-container" style="background:#f7fdff;border:1px solid #e0f0f5;border-radius:12px;padding:1.25rem;">
      </section>
    </aside>
  </main>

  <footer class="wrap" role="contentinfo">
    <p>&copy; 2025 In the Wake &middot; A Cruise Traveler's Logbook &middot; All rights reserved.</p>
    <p class="tiny" style="margin-top: 0.5rem;">
      <a href="/privacy.html">Privacy</a> &middot;
      <a href="/terms.html">Terms</a> &middot;
      <a href="/about-us.html">About</a> &middot;
      <a href="/accessibility.html">Accessibility &amp; WCAG 2.1 AA Commitment</a>
    </p>
    <p class="tiny center" style="opacity:0;position:absolute;pointer-events:none;" aria-hidden="true">Soli Deo Gloria — Every pixel and part of this project is offered as worship to God, in gratitude for the beautiful things He has created for us to enjoy. ✝️</p>
  </footer>

  <script>
    // Load recent articles
    (async function() {
      try {
        const response = await fetch('/assets/data/articles/index.json');
        const articles = await response.json();
        const rail = document.getElementById('recent-rail');

        if (rail && articles && articles.length > 0) {
          rail.innerHTML = articles.slice(0, 5).map(article => `
            <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #e0e8f0;">
              <h4 style="margin: 0 0 0.25rem; font-size: 0.95rem;">
                <a href="${article.url}">${article.title}</a>
              </h4>
              <p style="margin: 0; font-size: 0.8rem; color: #666;">${article.date}</p>
            </div>
          `).join('');
        }
      } catch (err) {
        console.log('Could not load articles:', err);
      }
    })();
  </script>

  <script>
  (function(){
    "use strict";

    /* ===== Recent Articles Rail ===== */
    (async function recentRail(){
      const rail = document.getElementById('recent-rail');
      if(!rail) return;

      const fallback = document.getElementById('recent-rail-fallback');
      if(fallback) fallback.style.display = '';

      async function fetchJSONWithFallback(urls){
        for (const u of urls){
          try{
            const res = await fetch(u, { credentials: 'omit', cache: 'no-cache' });
            if (res.ok) return await res.json();
          }catch(err){

          }
        }
        return null;
      }

      const pick = (obj, keys, fallback=null)=>{ for(const k of keys){ if(obj && obj[k] != null) return obj[k]; } return fallback; };

      function setImageWithFallback(imgEl, primary, altPaths=[]){
        if(!imgEl) return;
        const stamp='v=3.010.400';
        const tried=new Set();
        const queue=[primary,...altPaths].filter(Boolean).map(p => p.includes('?')?p+'&'+stamp:p+'?'+stamp);
        function tryNext(){
          const next=queue.shift();
          if(!next){ imgEl.removeAttribute && imgEl.removeAttribute('onerror'); return; }
          if(tried.has(next)) return tryNext();
          tried.add(next);
          imgEl.src=next;
        }
        imgEl.onerror=tryNext;
        tryNext();
      }

      const raw = await fetchJSONWithFallback(['/assets/data/articles/index.json','/assets/data/articles.json']);
      if(!raw) {
        if(fallback) {
          fallback.textContent = 'Unable to load articles';
          fallback.style.display = '';
        }
        return;
      }

      const items = Array.isArray(raw?.articles) ? raw.articles : (Array.isArray(raw) ? raw : []);
      if(!items.length) return;

      const here = location.pathname.replace(/\/+$/,'');
      const view = items.filter(p=>{
        const href = pick(p,['url','path'],'#');
        const norm = (href||'').replace(/\/+$/,'');
        return norm && norm !== here;
      }).slice(0,6);

      rail.innerHTML = view.map(p=>{
        const title = pick(p,['title','name'],'Article');
        const href  = pick(p,['url','path'],'#');
        const excerpt = pick(p,['excerpt','description'],'');
        return `
          <article class="card article-card">
            <div class="article-card-grid">
              <div class="article-thumb-wrap">
                <img class="article-thumb" alt="" decoding="async" loading="lazy">
              </div>
              <div class="article-card-body">
                <h4><a href="\${href}">\${title}</a></h4>
                \${excerpt ? `<p class="tiny excerpt">\${excerpt}</p>` : ''}
              </div>
            </div>
            <a href="\${href}" class="pill read-more">Read Article →</a></article>`;
      }).join('');

      const cards = [...rail.querySelectorAll('article.card')];
      cards.forEach((card,i)=>{
        const p = view[i] || {};
        const el = card.querySelector('img.article-thumb');
        const href  = (pick(p,['url','path'],'')||'').toLowerCase();
        const title = (pick(p,['title','name'],'')||'').toLowerCase();

        let primary = pick(p, ['thumb','thumbnail','image','cover','img'], null);

        // FORCE override for Top-20
        if (/(top-20|first-?cruise-?questions)/.test(href) || /top\s*20.*first.*cruise.*questions/.test(title)){
          primary = '/assets/articles/thumbs/top-20-questions/cover.webp';
        }
        // Friendly specifics
        if(!primary && (/freedom-of-your-own-wake/.test(href) || /freedom of your own wake/.test(title))){
          primary = '/assets/articles/thumbs/freedom-of-your-own-wake.webp';
        }
        if(!primary && (/why-i-started-solo-cruising/.test(href) || /why i started solo cruising/.test(title))){
          primary = '/assets/articles/thumbs/why-i-started-solo-cruising.webp';
        }
        if(!primary && (/\/travel(\.html)?$/.test(href) || /\btravel\b/.test(title))){
          primary = '/assets/articles/travel/cover.jpg';
        }

        // Heuristic fallback
        if(!primary){
          const slugify = s => (s||'').toLowerCase().replace(/https?:\/\/[^/]+/,'').replace(/[#?].*$/,'').split('/').filter(Boolean).pop()||'';
          const guess = slugify(href) || slugify(title);
          if(guess) primary = `/assets/articles/\${guess}/cover.jpg`;
        }

        const alts = [];
        if(primary){
          const base = primary.replace(/\.(jpg|jpeg|png|webp)$/i,'');
          alts.push(`\${base}.jpeg`, `\${base}.JPG`, `\${base}.webp`, `\${base}.png`);
        }
        setImageWithFallback(el, primary || '/assets/index_hero.webp', alts);
      });

      if(fallback) fallback.style.display = 'none';

      // Announce to screen readers
      const status = document.getElementById('a11y-status');
      if(status) {
        status.textContent = `\${view.length} recent articles loaded`;
      }
    })();
  })();
  </script>

  <!-- Navigation dropdown functionality -->
  <script>
  (function() {
    'use strict';
    var dropdowns = document.querySelectorAll('.nav-dropdown');
    function toggleDropdown(dropdown) {
      var isOpen = dropdown.classList.contains('open');
      closeAllDropdowns();
      if (!isOpen) {
        dropdown.classList.add('open');
        var btn = dropdown.querySelector('button');
        if (btn) btn.setAttribute('aria-expanded', 'true');
      }
    }
    function closeAllDropdowns() {
      dropdowns.forEach(function(dd) {
        dd.classList.remove('open');
        var btn = dd.querySelector('button');
        if (btn) btn.setAttribute('aria-expanded', 'false');
      });
    }
    dropdowns.forEach(function(dropdown) {
      var btn = dropdown.querySelector('button');
      if (btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          toggleDropdown(dropdown);
        });
        btn.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') { closeAllDropdowns(); btn.focus(); }
          if (e.key === 'ArrowDown') {
            e.preventDefault();
            dropdown.classList.add('open');
            btn.setAttribute('aria-expanded', 'true');
            var firstLink = dropdown.querySelector('.dropdown-menu a');
            if (firstLink) firstLink.focus();
          }
        });
      }
      var menu = dropdown.querySelector('.dropdown-menu');
      if (menu) {
        menu.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') { closeAllDropdowns(); if (btn) btn.focus(); }
        });
      }
    });
    document.addEventListener('click', function(e) {
      var isInsideDropdown = false;
      dropdowns.forEach(function(dd) { if (dd.contains(e.target)) isInsideDropdown = true; });
      if (!isInsideDropdown) closeAllDropdowns();
    });
  })();
  </script>

  <!-- Nearby Ports Script -->
  <script>window.currentPortId = 'taipei';</script>
  <script src="/assets/js/nearby-ports.js"></script>

  <!-- Whimsical Distance Units Script -->
  <script src="/assets/js/whimsical-port-units.js"></script>

  <!-- Leaflet JS for interactive maps -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="/assets/js/modules/port-map.js"></script>

  <!-- Initialize Taipei Port Map -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof PortMap !== 'undefined' && typeof L !== 'undefined') {
      PortMap.init({
        containerId: 'taipei-port-map',
        portSlug: 'taipei'
      });
    }
  });
  </script>

</body>
</html>
