<!doctype html>
<html lang="en">
<head>
  <!--
  Soli Deo Gloria
  All work on this project is offered as a gift to God.
  -->

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>

  <title>Grandeur of the Seas — In the Wake (v3.006.017)</title>
  <meta name="version" content="v3.006.017"/>
  <meta name="description" content="A practical, creator-curated look at Royal Caribbean’s Grandeur of the Seas: venues, dining, cabins, accessibility notes, tips, photos, and cross-links to ports and restaurants."/>
  <meta name="theme-color" content="#0e6e8e"/>
  <meta name="robots" content="index,follow"/>

  <!-- Canonical -->
  <link rel="canonical" href="https://www.cruisinginthewake.com/ships/rcl/grandeur-of-the-seas.html"/>

  <!-- Open Graph -->
  <meta property="og:type" content="website"/>
  <meta property="og:site_name" content="In the Wake"/>
  <meta property="og:url" content="https://www.cruisinginthewake.com/ships/rcl/grandeur-of-the-seas.html"/>
  <meta property="og:title" content="Grandeur of the Seas — In the Wake"/>
  <meta property="og:description" content="Royal Caribbean’s Grandeur of the Seas, presented in our ‘gold standard’ layout: quick facts, venues, menus, photos, accessibility notes, and smart cross-links."/>
  <meta property="og:image" content="https://www.cruisinginthewake.com/assets/ships/grandeur-of-the-seas-hero.jpg?v=3.006.017"/>
  <meta property="og:image:alt" content="Grandeur of the Seas underway at sea"/>
  <meta property="og:image:width" content="1600"/>
  <meta property="og:image:height" content="900"/>

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="Grandeur of the Seas — In the Wake"/>
  <meta name="twitter:description" content="Royal Caribbean’s Grandeur of the Seas with venues, menus, cabins, tips, photos, and cross-links to ports & restaurants."/>
  <meta name="twitter:image" content="https://www.cruisinginthewake.com/assets/ships/grandeur-of-the-seas-hero.jpg?v=3.006.017"/>

  <!-- JSON-LD: WebPage + Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Grandeur of the Seas — In the Wake",
    "url": "https://www.cruisinginthewake.com/ships/rcl/grandeur-of-the-seas.html",
    "description": "A practical, creator-curated look at Royal Caribbean’s Grandeur of the Seas: venues, dining, cabins, accessibility notes, tips, photos, and cross-links to ports and restaurants.",
    "isPartOf": {"@type":"WebSite","name":"In the Wake","url":"https://www.cruisinginthewake.com"},
    "image": "https://www.cruisinginthewake.com/assets/ships/grandeur-of-the-seas-hero.jpg?v=3.006.017",
    "publisher": {"@type":"Organization","name":"In the Wake","logo":{"@type":"ImageObject","url":"https://www.cruisinginthewake.com/assets/brand/logo.png"}},
    "breadcrumb": {
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"Home","item":"https://www.cruisinginthewake.com/"},
        {"@type":"ListItem","position":2,"name":"Ships","item":"https://www.cruisinginthewake.com/ships/"},
        {"@type":"ListItem","position":3,"name":"Grandeur of the Seas","item":"https://www.cruisinginthewake.com/ships/rcl/grandeur-of-the-seas.html"}
      ]
    }
  }
  </script>

  <!-- Standards helper: normalize same-origin absolutes to avoid CORS/redirects -->
  <script>
    (function(){
      const ORIGIN=(location.origin||(location.protocol+'//'+location.host)).replace(/\/$/,'');
      window._abs=function(p){p=String(p||''); if(!p.startsWith('/')) p='/'+p; return ORIGIN+p;};
      addEventListener('DOMContentLoaded',function(){
        const sel=[
          'a[href^="https://www.cruisinginthewake.com/"]',
          'img[src^="https://www.cruisinginthewake.com/"]',
          'link[href^="https://www.cruisinginthewake.com/"]',
          'script[src^="https://www.cruisinginthewake.com/"]'
        ].join(',');
        document.querySelectorAll(sel).forEach(el=>{
          const attr=el.hasAttribute('href')?'href':'src';
          try{ const u=new URL(el.getAttribute(attr)); el.setAttribute(attr, ORIGIN+u.pathname+u.search+u.hash); }catch(_){}
        });
      },{once:true});
    })();
  </script>

  <!-- Unified CSS (cache-busted MUST) -->
  <link rel="stylesheet" href="https://www.cruisinginthewake.com/assets/styles.css?v=3.006.017"/>
  <link rel="preload" as="image" href="https://www.cruisinginthewake.com/assets/compass_rose.svg?v=3.006.017"/>
  <link rel="preconnect" href="https://www.youtube.com">
  <link rel="preconnect" href="https://i.ytimg.com">

  <!-- Page-local trims only (no hero/filter overrides) -->
  <style>
    .brand-title{display:none!important}
    .grid-2{display:grid;gap:1rem}
    @media (min-width:980px){.grid-2{grid-template-columns:1fr 1fr}}
    .photo-grid{display:grid;gap:.75rem;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .photo-grid img{border-radius:12px}
    .tiny-muted{font-size:.86rem;color:#567}
    .kv{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
    .kv div{padding:.45rem .6rem;border:1px dashed var(--rope);border-radius:10px;background:#fff}
    /* Watermark */
    body::before{
      content:"";position:fixed;inset:auto 0 0 0;margin:auto;width:min(60vw,900px);height:min(60vh,900px);
      background:url('https://www.cruisinginthewake.com/assets/watermark.png') center/contain no-repeat;
      opacity:.08;pointer-events:none;z-index:0
    }
    main, header, footer, section, nav{position:relative;z-index:1}

    /* Fuel Your Voyage mini styles (keeps your look) */
    .voyage-tips-wrapper{margin-top:1rem}
    .voyage-tips ul{margin:.5rem 0 .75rem 1rem}
    .voyage-tips .btn{
      display:inline-block;background:var(--accent,#0e6e8e);color:#fff;
      padding:.5rem 1rem;border-radius:8px;text-decoration:none;margin:.25rem;
    }
    .voyage-tips .btn:hover{background:#0a3d62}
  </style>

  <!-- Reduced motion + SW -->
  <style>@media (prefers-reduced-motion:reduce){*{animation-duration:.001ms!important;transition-duration:.001ms!important}}</style>
  <script>if('serviceWorker' in navigator){addEventListener('load',()=>navigator.serviceWorker.register('/sw.js').catch(()=>{}));}</script>

  <!-- Swiper (video carousel) -->
  <link rel="stylesheet" href="https://unpkg.com/swiper@10/swiper-bundle.min.css"/>
</head>

<body class="page no-hero-filter">
  <a class="skip-link" href="#content">Skip to content</a>

  <header class="hero-header">
    <div class="navbar">
      <div class="brand">
        <img src="https://www.cruisinginthewake.com/assets/logo_wake.png" alt="In the Wake"/>
        <span class="version-badge">v3.006.017</span>
      </div>
      <nav class="pill-nav pills" aria-label="Primary">
        <a href="https://www.cruisinginthewake.com/">Home</a>
        <a href="https://www.cruisinginthewake.com/ships/">Ships</a>
        <a href="https://www.cruisinginthewake.com/restaurants/">Restaurants &amp; Menus</a>
        <a href="https://www.cruisinginthewake.com/ports.html">Ports</a>
        <a href="https://www.cruisinginthewake.com/disability-at-sea.html">Disability at Sea</a>
        <a href="https://www.cruisinginthewake.com/drink-packages.html">Drink Packages</a>
        <a href="https://www.cruisinginthewake.com/packing-lists.html">Packing Lists</a>
        <a href="https://www.cruisinginthewake.com/planning.html">Planning</a>
        <a href="https://www.cruisinginthewake.com/solo.html">Solo Travel</a>
        <a href="https://www.cruisinginthewake.com/travel.html">Travel Tips</a>
        <a href="https://www.cruisinginthewake.com/cruise-lines.html">Cruise Lines</a>
        <a href="https://www.cruisinginthewake.com/about-us.html">About Us</a>
      </nav>
    </div>

    <div class="hero" role="img" aria-label="Open ocean at sunrise">
      <div class="latlon-grid" aria-hidden="true"></div>
      <img class="hero-compass" src="https://www.cruisinginthewake.com/assets/compass_rose.svg?v=3.006.017" alt="" aria-hidden="true"/>
      <div class="hero-title">
        <img class="logo" src="https://www.cruisinginthewake.com/assets/logo_wake.png" alt="In the Wake">
        <div class="tagline">A Cruise Traveler’s Logbook</div>
      </div>
      <div class="hero-credit">
        <a class="pill long" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <main class="wrap" id="content">

    <!-- Welcome / Quick Facts -->
    <section class="card">
      <h1>Grandeur of the Seas</h1>
      <div class="kv" role="list">
        <div role="listitem"><strong>Class:</strong> Vision</div>
        <div role="listitem"><strong>Launched / Refreshed:</strong> 1996 · most recent refresh varies by shipyard</div>
        <div role="listitem"><strong>Gross Tonnage:</strong> ~73,800 GT</div>
        <div role="listitem"><strong>Guests (dbl occ.):</strong> ~1,996</div>
      </div>
      <p class="tiny-muted" style="margin-top:.5rem">Numbers are rounded; check Royal Caribbean’s specs for the latest refit notes and capacity adjustments.</p>
    </section>

    <!-- Photos (your originals) -->
    <section class="card" aria-labelledby="photosHeading">
      <h2 id="photosHeading">A First Look</h2>
      <div class="photo-grid">
        <figure>
          <img src="https://www.cruisinginthewake.com/assets/ships/grandeur-of-the-seas%20-%203.jpeg?v=3.006.017" alt="Grandeur — at Labadee in the rain"/>
          <figcaption class="tiny">Photo © <a href="https://flickersofmajesty.com/" target="_blank" rel="noopener">Flickers of Majesty</a></figcaption>
        </figure>
        <figure>
          <img src="https://www.cruisinginthewake.com/assets/ships/grandeur-of-the-seas%20-%201.jpeg?v=3.006.017" alt="Grandeur — through the trees"/>
          <figcaption class="tiny">Photo © <a href="https://flickersofmajesty.com/" target="_blank" rel="noopener">Flickers of Majesty</a></figcaption>
        </figure>
        <figure>
          <img src="https://www.cruisinginthewake.com/assets/ships/grandeur-of-the-seas%20-%202.jpeg?v=3.006.017" alt="Grandeur — in the fog"/>
          <figcaption class="tiny">Photo © <a href="https://flickersofmajesty.com/" target="_blank" rel="noopener">Flickers of Majesty</a></figcaption>
        </figure>
      </div>
    </section>

    <!-- Why Book -->
    <section class="card" aria-labelledby="whyHeading">
      <h2 id="whyHeading">Why book Grandeur of the Seas?</h2>
      <p>Imagine drifting into a world where every sunrise promises a fresh adventure, and the ocean’s rhythm syncs perfectly with your own. That’s the quiet magic of <em>Grandeur of the Seas</em>, Royal Caribbean’s intimate Vision-class favorite—classic in character, vibrant in feel, and effortless to navigate. You’re never far from an ocean view, a live band, or a sincere hello from crew who remember your name.</p>
      <p>Families find easy together-time here: kids claim bragging rights on the <strong>Rock Climbing Wall</strong>, teens stake out the arcade, and everyone reconnects over poolside movies under the stars. Couples lean into slow sunsets and unhurried dinners—whether that’s a five-course splurge at <strong>Chef’s Table</strong> or a relaxing evening in the glass-covered <strong>Solarium</strong>. First-timers and solo travelers love the scale: big-ship fun without the “where am I?” moments.</p>
      <p>Dining spans the globe, from easy, fresh choices at <strong>Windjammer</strong> to sushi and small plates at <strong>Izumi</strong>, with the <strong>Main Dining Room</strong> anchoring each evening’s ritual. After dinner, the curtain rises on productions and lounges buzz with comedians, game shows, and live music. It’s the sweet spot Royal does so well—daytime energy and nighttime unwind—crafted for travelers who want value without compromise.</p>
      <p class="tiny">Sailings vary by season; check itineraries out of Tampa and the Caribbean for current routes.</p>
    </section>

    <!-- Dining (static venue cards keeping your structure) -->
    <section class="card" aria-labelledby="diningHeading">
      <h2 id="diningHeading">Dining & Lounges</h2>
      <p class="tiny">Dress: <strong>Smart casual by default</strong>. Formal night welcome across the ship; <em>Chef’s Table</em> encourages formal attire.</p>
      <div class="grid-3">
        <a class="venue-card" href="https://www.cruisinginthewake.com/restaurants/main-dining-room.html">
          <span class="vthumb"><img alt="Main Dining Room"/></span>
          <span class="vbody"><strong>Main Dining Room</strong><br><span class="tiny">Included · classic menus, two levels</span></span>
        </a>
        <a class="venue-card" href="https://www.cruisinginthewake.com/restaurants/windjammer.html">
          <span class="vthumb"><img alt="Windjammer Marketplace"/></span>
          <span class="vbody"><strong>Windjammer Marketplace</strong><br><span class="tiny">Included · global buffet</span></span>
        </a>
        <a class="venue-card" href="https://www.cruisinginthewake.com/restaurants/chops-grille.html">
          <span class="vthumb"><img alt="Chops Grille"/></span>
          <span class="vbody"><strong>Chops Grille</strong><br><span class="tiny">Premium · classic steakhouse</span></span>
        </a>
        <a class="venue-card" href="https://www.cruisinginthewake.com/restaurants/izumi.html">
          <span class="vthumb"><img alt="Izumi"/></span>
          <span class="vbody"><strong>Izumi</strong><br><span class="tiny">Premium · sushi & small plates</span></span>
        </a>
        <a class="venue-card" href="https://www.cruisinginthewake.com/restaurants/cafe-promenade.html">
          <span class="vthumb"><img alt="Café Promenade"/></span>
          <span class="vbody"><strong>Café Promenade</strong><br><span class="tiny">Included · coffee, snacks, late-night bites</span></span>
        </a>
        <a class="venue-card" href="https://www.cruisinginthewake.com/restaurants/chefs-table.html">
          <span class="vthumb"><img alt="Chef’s Table"/></span>
          <span class="vbody"><strong>Chef’s Table</strong><br><span class="tiny">Premium · formal encouraged · paired courses</span></span>
        </a>
      </div>
    </section>

    <!-- Ken’s Logbook (full text restored) -->
    <section class="card note-kens-logbook" aria-labelledby="logbookHeading" id="logbook">
      <h2 id="logbookHeading">A note from Ken’s Logbook — a personal review</h2>
      <div id="logbook-body">
        <p>
          We sailed <em>Grandeur of the Seas</em> in an ocean-view stateroom—bright - with views of epic sunrises; a great way to start each morning. Dining was a highlight: <strong>Chops Grille</strong> delivered a fantastic filet, and the <strong>Main Dining Room</strong> impressed with thoughtful pacing and spot-on recommendations. Service all around was warm and proactive: Miguel (Philippines) at Chops provided truly excellent, personable care; at Guest Services, Vincent D’Cruz resolved our requests quickly and professionally; and in <strong>Windjammer</strong>, Vergel noticed a morning pattern and brought fresh eggs to our table before we asked—a small kindness that says a lot about this crew.
        </p>
        <p>
          We tried <strong>Taste of Royal</strong>: the tuna tartare was tasty; shrimp could have used a touch more heat; the fried cheesecake stole the show. (Pro tip: the Saint Peter’s spritzer really pops if you squeeze the orange wedge.) Our Eastern Caribbean itinerary hit Aruba, Curaçao, and Bonaire. We snorkeled in Aruba (hello, flamingos), toured the Curaçao distillery and a sun-warmed cave, and in Bonaire took a quick taxi to <a href="https://buddydive.com/" target="_blank" rel="noopener">Buddy Dive Center</a>—great value rentals (as of Nov 2024), clear water, and a drop-off reef that rewards confident snorkelers and divers. Labadee beach time was still fun despite weather nixing our planned dive excursion. So we took in the Local Artists - who can be VERY assertive; a firm “no, thanks” works in at least three languages.
        </p>
        <p>
          Embark and debark in Fort Lauderdale were smooth, though port driving/parking can be confusing and pricey—off-port parking plus a taxi often beats the on-site rates. In the evenings, we caught <em>Broadway Rhythm &amp; Rhyme</em> and <em>Tango Buenos Aires</em>—the latter stood out with world-class dancing and vocals. Bottom line: <em>Grandeur</em> delivers that extra dose of personal connection big ships can’t replicate, backed by classic Royal fun and friendly, attentive service.
        </p>
      </div>
    </section>

    <!-- Videos -->
    <section class="card" aria-labelledby="videosHeading">
      <h2 id="videosHeading">Watch: Grandeur Highlights</h2>
      <p class="tiny">Swipe through videos to explore the ship and staterooms.</p>
      <div class="swiper" aria-label="Featured video carousel">
        <div class="swiper-wrapper" id="featuredVideos"></div>
        <div class="swiper-pagination" aria-hidden="true"></div>
        <div class="swiper-button-prev" aria-label="Previous slide"></div>
        <div class="swiper-button-next" aria-label="Next slide"></div>
      </div>
    </section>

    <!-- Deck plans + live tracker -->
    <section class="grid-2">
      <section class="card" aria-labelledby="deckPlansHeading">
        <h2 id="deckPlansHeading">Ship Layout (Deck Plans)</h2>
        <p>Pin your stateroom, elevators, dining, and venues before you sail.</p>
        <p><a class="pillbtn" href="https://www.royalcaribbean.com/cruise-ships/grandeur-of-the-seas/deck-plans" target="_blank" rel="noopener">Open Official Deck Plans →</a></p>
      </section>

      <!-- Hybrid VesselFinder: widget with resilient iframe fallback -->
      <section class="card itinerary" aria-labelledby="liveTrackHeading" data-name="GRANDEUR-OF-THE-SEAS" data-imo="9102978">
        <h2 id="liveTrackHeading">Where Is Grandeur Right Now?</h2>
        <p>Live position, speed, and next port.</p>
        <div id="vf-map" role="region" aria-label="Live ship map for Grandeur of the Seas" style="width:100%;height:300px;background:var(--sky)"></div>
        <iframe id="vf-fallback" class="hidden" title="Live ship tracker for Grandeur of the Seas" width="100%" height="300" frameborder="0" loading="lazy" allowfullscreen></iframe>
        <p class="tiny">Tip: The map refreshes automatically while this tab is open.</p>
      </section>
    </section>

    <!-- Footer note -->
    <section class="card center" style="margin-top:1rem">
      <p class="tiny">All pages are offered as a gift to God. <em>Soli Deo Gloria.</em></p>
    </section>
  </main>

  <footer class="wrap" style="padding:1rem 0">
    <div class="tiny">© 2025 In the Wake — A Cruise Traveler’s Logbook</div>
  </footer>

  <!-- JS: Swiper + Videos -->
  <script src="https://unpkg.com/swiper@10/swiper-bundle.min.js"></script>
  <script>
    (function initCarousel() {
      const DATA = [
        {"id":"-NS3BhWqzD4","title":"Grandeur of the Seas — Full Ship Walkthrough (4K)"},
        {"id":"iIo4HNqNzbs","title":"Top Things To Do on Grandeur of the Seas"},
        {"id":"tXQ8hic0O_U","title":"Accessible Stateroom & Wheelchair Walkthrough"},
        {"id":"kYAwcRPmH5c","title":"Interior Room Tour — Grandeur"},
        {"id":"1PgDMCgw6uI","title":"Ocean View Stateroom Tour — Grandeur"},
        {"id":"0YONwODd98c","title":"Balcony & Interior Quick Tour — Grandeur"},
        {"id":"HAxiXR-IMmk","title":"Junior Suite 7650 — Aft Balcony Tour"},
        {"id":"KXCJePjqEY4","title":"Grand Suite (1-Bedroom) Tour — 2025"},
        {"id":"ZEz-jOvRq7c","title":"Grand Suite (2-Bedroom) 8084 — Tour"},
        {"id":"GByj5lFpAPU","title":"Owner’s Suite 8502 — Cabin Tour"},
        {"id":"Z70a-ViIjTc","title":"Royal Suite 8500 — Tour & Review"}
      ];
      const wrap = document.getElementById('featuredVideos');
      DATA.forEach(v=>{
        const slide=document.createElement('div');
        slide.className='swiper-slide';
        slide.innerHTML = `<iframe title="${v.title}" src="https://www.youtube.com/embed/${v.id}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading="lazy"></iframe>`;
        wrap.appendChild(slide);
      });
      new Swiper('.swiper',{
        loop:false,
        pagination:{el:'.swiper-pagination',clickable:true},
        navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev'},
        a11y:{enabled:true}
      });
    })();
  </script>

  <!-- Inject “Fuel Your Voyage” at the 60% mark of the logbook -->
  <script>
    (function injectFuelAtSixty(){
      const host=document.getElementById('logbook-body'); if(!host) return;
      const FUEL_HTML = `
<div class="voyage-tips-wrapper">
  <div class="card voyage-tips" aria-label="Voyage planning tips">
    <h2 class="card-title">Fuel Your Voyage</h2>
    <div class="card-content">
      <h3>Drink Packages</h3>
      <ul>
        <li>Deluxe Beverage Package: ~$60/day for premium drinks</li>
        <li>Refreshment Package: Non-alcoholic options</li>
        <li>Soda Package: all the Freestyle Machine options</li>
      </ul>
      <h3>Pack Like a Pro</h3>
      <ul>
        <li>Shawl for chilly theater nights</li>
        <li>Swimwear for pool deck</li>
        <li>Comfortable shoes for shore tours</li>
      </ul>
      <div class="button-group" aria-label="Voyage planning links">
        <a href="https://www.cruisinginthewake.com/drink-packages.html" class="btn" aria-label="View all drink package options">View Drink Options</a>
        <a href="https://www.cruisinginthewake.com/packing-lists.html" class="btn" aria-label="Access complete packing guide">Packing Guide</a>
      </div>
    </div>
  </div>
</div>`;
      // Insert once as the reader passes ~60% of the logbook scroll height
      let inserted=false;
      function tryInsert(){
        if(inserted) return;
        const sec=document.getElementById('logbook'); if(!sec) return;
        const r=sec.getBoundingClientRect();
        const total=sec.scrollHeight;
        const seen=sec.scrollTop + sec.clientHeight;
        const pct=seen/total;
        if(pct>=0.60 || r.top<window.innerHeight*0.2){
          const div=document.createElement('div');
          div.innerHTML=FUEL_HTML;
          // place after ~60% of existing paragraphs
          const paras=[...host.querySelectorAll('p')];
          const idx=Math.max(0,Math.min(paras.length, Math.round(paras.length*0.60)));
          const ref=paras[idx]||paras[paras.length-1]||host.lastChild;
          host.insertBefore(div, ref?ref.nextSibling:null);
          inserted=true; sec.removeEventListener('scroll',tryInsert); window.removeEventListener('scroll',tryInsert);
        }
      }
      // Observe scroll both on window and section for robustness
      const sec=document.getElementById('logbook');
      sec.addEventListener('scroll',tryInsert,{passive:true});
      window.addEventListener('scroll',tryInsert,{passive:true});
      // Also attempt once after load (for short content)
      setTimeout(tryInsert,500);
    })();
  </script>

  <!-- Hybrid VesselFinder (widget + iframe fallback, cache-busting) -->
  <script>
    (function hybridVF(){
      const card=document.querySelector('.card.itinerary'); if(!card) return;
      const name=(card.getAttribute('data-name')||'').trim();
      const imo=(card.getAttribute('data-imo')||'').trim();
      const mapEl=document.getElementById('vf-map');
      const iFr=document.getElementById('vf-fallback');
      const base="https://www.vesselfinder.com/vessels/"+encodeURIComponent(name)+"-IMO-"+imo+"#map";
      const bust=u=>u+(u.includes('?')?'&':'?')+'ts='+(Date.now());

      function useIframe(){
        if(!iFr) return;
        iFr.src=bust(base);
        iFr.classList.remove('hidden');
        if(mapEl) mapEl.style.display='none';
      }

      const s=document.createElement('script');
      s.src=bust("https://www.vesselfinder.com/aismap.js");
      s.async=true;

      const stallTimer=setTimeout(useIframe, 4500);
      s.onload=function(){
        try{
          clearTimeout(stallTimer);
          if(window.AISMap && mapEl){
            new AISMap(mapEl,{width:"100%",height:300,zoom:8,names:true,show_track:1,track_days:1,vessel:"IMO:"+imo});
            setTimeout(function(){
              if(!mapEl.querySelector('canvas,svg')) useIframe();
            },2500);
          } else {
            useIframe();
          }
        }catch(_){ useIframe(); }
      };
      s.onerror=function(){ clearTimeout(stallTimer); useIframe(); };
      document.head.appendChild(s);
    })();
  </script>
</body>
</html>
