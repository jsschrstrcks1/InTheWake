<!doctype html>
<html lang="en">
<head>
<!-- ai-breadcrumbs
     entity: Princess Cruises
     type: Cruise Line Comparison
     parent: /cruise-lines.html
     category: Cruise Line Information
     updated: 2025-11-18
     expertise: Cruise line comparisons, fleet analysis, policy research, cruise planning
     target-audience: Cruise line comparison shoppers, first-time cruisers, travel planners
     answer-first: Princess: destination-driven itineraries, MedallionClass technology, gracious service, Sphere Class ships with refreshed poolscapes, Movies Under the Stars.
     core-facts: MedallionClass technology (keyless staterooms, contactless payment); Sphere Class (newest ships); signature experiences include Movies Under the Stars, Chef's Table, Sanctuary adults-only retreat
     decisions-informed: which Princess ship class suits your style; how MedallionClass improves onboard experience; whether Sanctuary and specialty dining upgrades are worth it
     -->
  <!--
    In the Wake — Princess Cruises (v3.007a)
    Reverently prepared. Soli Deo Gloria.
  -->

  <!-- Analytics -->
  <script defer src="https://cloud.umami.is/script.js"
          data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>

  <!-- Standards: absolute URL + origin normalizer -->
  <script>
  (function(){
    const ORIGIN=(location.origin||(location.protocol+"//"+location.host)).replace(/\/$/,'');
    window._abs=p=>{p=String(p||''); if(!p.startsWith('/')) p='/'+p; return ORIGIN+p};
    document.addEventListener('DOMContentLoaded',()=>{
      const sel=[
        'a[href^="https://www.cruisinginthewake.com/"]',
        'img[src^="https://www.cruisinginthewake.com/"]',
        'link[href^="https://www.cruisinginthewake.com/"]',
        'script[src^="https://www.cruisinginthewake.com/"]'
      ].join(',');
      document.querySelectorAll(sel).forEach(el=>{
        const attr=el.hasAttribute('href')?'href':'src';
        try{ const u=new URL(el.getAttribute(attr));
             el.setAttribute(attr, ORIGIN+u.pathname+u.search+u.hash);
        }catch(_){}
      });
    },{once:true});
  })();
  </script>

  <!-- External link hardening -->
  <script>
  document.addEventListener('click',e=>{
    const a=e.target.closest&&e.target.closest('a[href]'); if(!a) return;
    try{ const u=new URL(a.href,location.href);
         if(u.origin!==location.origin){ a.target='_blank'; a.rel='noopener'; }
    }catch(_){}
  },{capture:true});
  </script>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Princess — In the Wake (v3.007a)</title>
  <meta name="version" content="3.010.300"/>
  <meta name="description" content="Princess Cruises at a glance — Sphere Class highlights, venues, MedallionClass notes, and practical traveler insight."/>
  <meta name="robots" content="index,follow"/>

  <!-- ICP-Lite v1.0: AI-First Metadata -->
  <meta name="ai-summary" content="Princess Cruises guide: destination-driven itineraries, MedallionClass technology, gracious service, Sphere Class ships, Movies Under the Stars, Chef's Table, and Sanctuary adults-only retreat."/>
  <meta name="last-reviewed" content="2025-11-18"/>
  <meta name="content-protocol" content="ICP-Lite v1.0"/>

  <!-- Canonical / Social -->
  <link rel="canonical" href="https://www.cruisinginthewake.com/cruise-lines/princess.html"/>
  <meta property="og:type" content="website"/>
  <meta property="og:site_name" content="In the Wake"/>
  <meta property="og:url" content="https://www.cruisinginthewake.com/cruise-lines/princess.html"/>
  <meta property="og:title" content="Princess Cruises — In the Wake"/>
  <meta property="og:description" content="Ship classes, dining venues, accessibility notes, and honest guidance for Princess itineraries."/>
  <meta property="og:image" content="https://www.cruisinginthewake.com/assets/social/cruise-lines-hero.jpg?v=3.007a"/>
  <meta name="twitter:card" content="summary_large_image"/>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[
    {"@type":"ListItem","position":1,"name":"Home","item":"https://www.cruisinginthewake.com/"},
    {"@type":"ListItem","position":2,"name":"Cruise Lines","item":"https://www.cruisinginthewake.com/cruise-lines/"},
    {"@type":"ListItem","position":3,"name":"Princess","item":"https://www.cruisinginthewake.com/cruise-lines/princess.html"}
  ]}
  </script>

  <!-- JSON-LD: WebPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Princess Cruises — In the Wake",
    "url": "https://www.cruisinginthewake.com/cruise-lines/princess.html",
    "description": "Princess Cruises guide: destination-driven itineraries, MedallionClass technology, gracious service, Sphere Class ships, Movies Under the Stars, and specialty dining."
  }
  </script>

  <!-- JSON-LD: FAQPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is MedallionClass on Princess Cruises?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "MedallionClass is Princess's digital technology platform featuring the Ocean Medallion wearable device. It enables keyless stateroom entry, contactless payment, on-demand services, and personalized experiences throughout the ship."
        }
      },
      {
        "@type": "Question",
        "name": "What is Movies Under the Stars on Princess?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Movies Under the Stars is Princess's signature poolside cinema experience, featuring first-run films and classics shown on a giant LED screen under the night sky, with complimentary popcorn and blankets provided."
        }
      },
      {
        "@type": "Question",
        "name": "What ship classes does Princess Cruises operate?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Princess operates the Sphere Class (newest, launched 2023), Royal Class, Grand Class, and earlier classes. The Sphere Class ships (Sun Princess, Star Princess) feature redesigned spaces and enhanced amenities."
        }
      },
      {
        "@type": "Question",
        "name": "What is The Sanctuary on Princess ships?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The Sanctuary is an adults-only retreat featuring premium lounge chairs, attentive service, light meals, and beverages. It's a tranquil escape from the main pool areas with a nominal daily fee."
        }
      }
    ]
  }
  </script>

  <!-- SiteCache + SW -->
  <script src="/assets/js/site-cache.js" defer></script>
  <script>
  if('serviceWorker' in navigator){
    addEventListener('load',()=>navigator.serviceWorker.register('/sw.js').catch(()=>{}));
  }
  </script>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/styles.css?v=3.007a"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg"/>

  <!-- Page styles (single hero; no duplication with global .hero) -->
  <style>
    :root{ --rope:#D9B382; --ink:#0f2a3a; --foam:#eef7fb; --accent:#0e6e8e; }
    body.page{ background:linear-gradient(var(--foam),#fff 240px); color:var(--ink); }

    /* keep the global hero, just gentle vibrancy */
    .hero-header .hero{ filter:saturate(1.18) contrast(1.06) brightness(1.04); }
    .hero::before,.hero::after{ content:none!important; }

    .brand-title{ display:none!important; } /* hide legacy brand-title blocks */

    /* Subtle watermark for cards */
    .card{ position:relative; overflow:hidden }
    .card::after{
      content:""; position:absolute; inset:0; margin:auto;
      width:min(60%,360px); height:min(60%,360px);
      background:url('/assets/watermark.png') center/contain no-repeat;
      opacity:.06; pointer-events:none;
    }

    /* Local grids */
    .grid{ display:grid; gap:1rem; }
    .grid.gallery{ grid-template-columns:1fr; }
    @media (min-width:800px){ .grid.gallery{ grid-template-columns:repeat(2,minmax(0,1fr)); } }

    .badge{ display:inline-block; font-size:.78rem; padding:.1rem .45rem; border:1px solid var(--rope);
            border-radius:999px; background:#fff; margin-left:.35rem; }

    /* Search */
    .search{ display:flex; gap:.5rem; flex-wrap:wrap; align-items:center; }
    .search input[type="search"]{ flex:1 1 260px; padding:.55rem .7rem; border:1px solid #cfe1ea; border-radius:10px; }
    .search button{ padding:.55rem .8rem; border:1px dashed var(--rope); border-radius:10px; background:#fff; cursor:pointer; }
    #searchResults .result{ padding:.6rem .7rem; border:1px solid var(--rope); border-radius:12px; background:#fff; }
  /* Header / Hero */
  .hero-header {
    position: relative;
    border-bottom: 6px double var(--rope);
    background: #eaf6f6;
    z-index: 9000;
  }

  .navbar {
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    align-items: flex-end;
    gap: .6rem;
    padding: .5rem .9rem .35rem;
    position: relative;
    z-index: 2000;
    overflow: visible;
  }

  .brand {
    display: flex;
    align-items: flex-end;
    gap: .6rem;
  }

  .brand img {
    height: 28px;
    width: auto;
  }

  .version-badge {
    font-size: .72rem;
    opacity: .8;
    color: var(--text-muted);
  }
  
    /* Page Grid Layout */
    .page-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
      align-items: start;
    }
    @media (min-width: 980px) {
      .page-grid {
        grid-template-columns: 1fr 320px;
      }
    }
    .rail {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .author-card-vertical {
      text-align: center;
    }
    .author-card-vertical .author-avatar {
      width: 96px;
      height: 96px;
      border-radius: 12px;
      object-fit: cover;
      margin: 0 auto 1rem;
    }
    .author-card-vertical h4 {
      margin: 0.5rem 0 0.25rem;
    }
    .author-card-vertical p {
      margin: 0.25rem 0;
    }
    .rail-list {
      display: grid;
      gap: 1rem;
    }

  </style>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Ken Baker",
  "url": "https://inthewake.com/about/ken-baker.html",
  "jobTitle": "Cruise Research Analyst & Data Specialist",
  "description": "Cruise industry analyst specializing in ship comparisons, deck plan analysis, and dining venue research.",
  "knowsAbout": [
    "Cruise Ship Analysis",
    "Deck Plans",
    "Royal Caribbean",
    "Cruise Dining",
    "Ship Comparisons"
  ]
}
</script>
</head>

<body class="page">
  <a class="skip-link" href="#content">Skip to main content</a>

  <header class="hero-header">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
        <span class="version-badge tiny">v3.007a</span>
      </div>
            <nav class="site-nav" aria-label="Main site navigation">
        <a class="nav-pill" href="/">Home</a>

        <!-- Planning Dropdown -->
        <div class="nav-dropdown" id="nav-planning">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Planning <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/planning.html">Planning (overview)</a>
            <a href="/ships.html">Ships</a>
            <a href="/restaurants.html">Restaurants &amp; Menus</a>
            <a href="/ports.html">Ports</a>
            <a href="/drink-packages.html">Drink Packages</a>
            <a href="/drink-calculator.html">Drink Calculator</a>
            <a href="/stateroom-check.html">Stateroom Check</a>
            <a href="/cruise-lines.html">Cruise Lines</a>
            <a href="/packing-lists.html">Packing Lists</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-dropdown" id="nav-travel">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Travel <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/travel.html">Travel (overview)</a>
            <a href="/solo.html">Solo</a>
          </div>
        </div>

        <a class="nav-pill" href="/tools/port-tracker.html">Port Logbook</a>
        <a class="nav-pill" href="/tools/ship-tracker.html">Ship Logbook</a>
        <a class="nav-pill" href="/search.html">Search</a>
        <a class="nav-pill" href="/about-us.html">About</a>
      </nav>
      
    </div>

    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="latlon-grid" aria-hidden="true"></div>
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.300" width="180" height="180" alt="" aria-hidden="true" decoding="async"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline" aria-hidden="true">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <main class="wrap page-grid" id="content">
  <div>
    <!-- ICP-Lite v1.0: Answer-First Content -->
    <section class="icp-header card" aria-labelledby="line-name">
      <h1 id="line-name">Princess Cruises</h1>
      <p class="answer-line"><strong>Quick Answer:</strong> Come back new. Imagine standing on the deck of the majestic Sun Princess, the Northern Lights dancing above as you sip a warm latte, or sharing a romantic dinner under Santorini's golden sunset. Princess Cruises invites you to experience effortless elegance, where destination discovery meets MedallionClass technology and signature moments like Movies Under the Stars transform ordinary getaways into stories you'll share for years.</p>

      <div class="fit-guidance">
        <h2>Is Princess Right for You?</h2>
        <p>Princess invites cruisers who value gracious service, destination-focused itineraries, and thoughtful conveniences that make every moment effortless. MedallionClass technology quietly removes friction — your stateroom door unlocks as you approach, drinks arrive poolside via the app, and you can track loved ones throughout the ship. It's the kind of innovation that doesn't demand attention; it simply makes everything better.</p>
        <p>The newest Sphere Class ships (Sun Princess, Star Princess) feature redesigned poolscapes with a glass-domed Piazza, the first-ever Dome multisensory experience, and dining venues that rival land-based restaurants. Dive into Alaska's wild beauty with expert-led excursions to Denali, explore Japan's cherry blossoms, or savor global flavors at the World Fresh Marketplace. The Sanctuary adults-only retreat offers tranquility when you need it; Movies Under the Stars brings magic when you want it.</p>
        <p>Perfect for couples celebrating milestones, multigenerational families who appreciate varied dining, and destination enthusiasts who want Alaska, Mediterranean, Japan, and Australia done with expertise. Formal nights exist but are never mandatory — this is relaxed sophistication, not rigid tradition.</p>
      </div>

      <div class="key-facts">
        <h2>Key Facts at a Glance</h2>
        <ul>
          <li><strong>Brand Identity:</strong> "Come Back New" — effortless elegance, destination discovery, personalized technology</li>
          <li><strong>Ship Classes:</strong> Sphere Class (newest, 2023), Royal Class, Grand Class, and heritage vessels</li>
          <li><strong>Signature Technology:</strong> MedallionClass (keyless entry, contactless payment, location-aware services)</li>
          <li><strong>Signature Experiences:</strong> Movies Under the Stars, The Sanctuary, <a href="/restaurants/chefs-table.html">Chef's Table</a>, The Dome, Lotus Spa</li>
          <li><strong>Best For:</strong> Destination enthusiasts, couples, multigenerational families, Alaska/Japan/Mediterranean travelers</li>
          <li><strong>Homeports:</strong> <a href="/ports/los-angeles.html">Los Angeles</a>, <a href="/ports/seattle.html">Seattle</a>, <a href="/ports/port-everglades.html">Fort Lauderdale</a>, <a href="/ports/galveston.html">Galveston</a>, and more</li>
        </ul>
      </div>
    </section>

    <section class="card">
      <h2>Gallery</h2>
      <div class="grid gallery">
        <figure>
          <img src="https://jsschrstrcks1.github.io/assets/cruise-lines/princess-hero-1.jpg" alt="Princess Cruises ship at sea">
          <figcaption class="tiny">Image: Wikimedia Commons — replace with final credited media.</figcaption>
        </figure>
        <figure>
          <img src="https://jsschrstrcks1.github.io/assets/cruise-lines/princess-hero-2.jpg" alt="Princess Cruises deck view">
          <figcaption class="tiny">Image: Wikimedia Commons — replace with final credited media.</figcaption>
        </figure>
      </div>
    </section>

    <section id="classes" class="card">
      <h2>Ship Classes</h2>
      <div class="grid">
        <div class="card">
          <h3>Sphere Class <span class="badge">launched 2023</span></h3>
          <ul>
            <li><a href="https://jsschrstrcks1.github.io/ships/princess-star-princess.html">Star Princess</a></li>
            <li><a href="https://jsschrstrcks1.github.io/ships/princess-sun-princess.html">Sun Princess</a></li>
          </ul>
        </div>
      </div>
    </section>

    <section id="ships" class="card">
      <h2>Ships A–Z</h2>
      <ul>
        <li><a href="https://jsschrstrcks1.github.io/ships/princess-star-princess.html">Star Princess</a></li>
        <li><a href="https://jsschrstrcks1.github.io/ships/princess-sun-princess.html">Sun Princess</a></li>
      </ul>
    </section>

    <!-- The Princess Experience -->
    <section class="card" aria-labelledby="experience-h">
      <h2 id="experience-h">The Princess Experience</h2>
      <p>Princess cruises feel different from the moment you board — there's a warmth to the service, a quiet confidence that knows exactly what gracious hospitality looks like. MedallionClass technology works in the background while the crew works in the foreground, greeting you by name and anticipating needs you didn't know you had.</p>
      <p>Evening brings Movies Under the Stars, blankets wrapped around your shoulders as first-run films play on a giant poolside screen. The Chef's Table offers an immersive culinary journey for special occasions. And Alaska — where Princess has sailed for over 50 years — comes alive through naturalist programs, glacier-watching from the deck, and rail connections to Denali that no other cruise line can match.</p>
      <p>What cruisers say: <em>"Our Alaska cruise was magical — glacier hikes and MedallionClass service made it feel like the ship was built just for us."</em></p>
    </section>

    <!-- Coming Soon -->
    <section id="coming" class="card">
      <h2>Detailed Ship Guides Coming Soon</h2>
      <p>We're charting comprehensive guides to the Princess fleet — ship class comparisons, MedallionClass tips that actually save time, dining venue analysis, and <a href="/accessibility.html">accessibility</a> observations. Everything you need to come back new. Check back soon, or visit <a href="https://www.princess.com" target="_blank" rel="noopener">Princess.com</a> to explore current sailings.</p>
    </section>

    <section id="search" class="card">
      <h2>Search Ships</h2>
      <div class="search" role="search">
        <input id="shipSearch" type="search" placeholder="Type a ship name… (tolerates typos)" aria-label="Search Princess ships"/>
        <button id="btnSearch" type="button">Search</button>
      </div>
      <div id="searchResults" class="grid" aria-live="polite" aria-busy="false"></div>
    </section>

    <!-- ICP-Lite v1.0: FAQ Section -->
    <section class="card faq" aria-labelledby="faq-heading">
      <h2 id="faq-heading">Frequently Asked Questions</h2>

      <div class="faq-item">
        <h3>What is MedallionClass on Princess Cruises?</h3>
        <p>MedallionClass is Princess's digital technology platform featuring the Ocean Medallion wearable device. It enables keyless stateroom entry, contactless payment, on-demand services, and personalized experiences throughout the ship.</p>
      </div>

      <div class="faq-item">
        <h3>What is Movies Under the Stars on Princess?</h3>
        <p>Movies Under the Stars is Princess's signature poolside cinema experience, featuring first-run films and classics shown on a giant LED screen under the night sky, with complimentary popcorn and blankets provided.</p>
      </div>

      <div class="faq-item">
        <h3>What ship classes does Princess Cruises operate?</h3>
        <p>Princess operates the Sphere Class (newest, launched 2023), Royal Class, Grand Class, and earlier classes. The Sphere Class ships (Sun Princess, Star Princess) feature redesigned spaces and enhanced amenities.</p>
      </div>

      <div class="faq-item">
        <h3>What is The Sanctuary on Princess ships?</h3>
        <p>The Sanctuary is an adults-only retreat featuring premium lounge chairs, attentive service, light meals, and beverages. It's a tranquil escape from the main pool areas with a nominal daily fee.</p>
      </div>
    </section>

    <section class="card">
      <h3>Image Credits</h3>
      <p class="tiny">Hero and supplemental images: Wikimedia Commons (place final, specific attributions upon publication).</p>
    </section>
  </div>

    <!-- RIGHT RAIL -->
    <aside class="rail" role="complementary" aria-label="Author & articles">
      <section class="card author-card-vertical" aria-labelledby="author-heading">
        <h3 id="author-heading">About the Author</h3>
        <a href="/authors/ken-baker.html" aria-label="View Ken Baker's profile">
          <picture>
            <source srcset="/authors/img/ken1.webp?v=3.010.300" type="image/webp"/>
            <img class="author-avatar" src="/authors/img/ken1_96.webp" srcset="/authors/img/ken1_96.webp 1x, /authors/img/ken1_192.webp 2x" width="96" height="96" alt="Author photo" style="border-radius: 12px;" decoding="async" loading="lazy"/>
          </picture>
        </a>
        <h4><a href="/authors/ken-baker.html">Ken Baker</a></h4>
        <p class="tiny">Founder of In the Wake; writer and editor of the logbook.</p>
        <p class="tiny">
          <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a>
        </p>
      </section>

      <section class="card" aria-labelledby="recent-rail-title">
        <h3 id="recent-rail-title">Recent Stories</h3>
        <p class="tiny" style="margin-bottom: 1rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Real cruising experiences, practical guides, and heartfelt reflections from our community.
        </p>
        <div id="recent-rail" class="rail-list" aria-live="polite"></div>
        <p id="recent-rail-fallback" class="tiny" style="display:none">Loading articles…</p>
      </section>
    </aside>
  </main>

    <footer class="wrap" role="contentinfo">
    <p>© 2025 In the Wake · A Cruise Traveler's Logbook · All rights reserved.</p>
    <p class="tiny" style="margin-top: 0.5rem;">
      <a href="/privacy.html">Privacy</a> ·
      <a href="/terms.html">Terms</a> ·
      <a href="/about-us.html">About</a> ·
      <a href="/accessibility.html">Accessibility &amp; WCAG 2.1 AA Commitment</a>
    </p>
    <p class="tiny center" style="opacity:0;position:absolute;pointer-events:none;" aria-hidden="true">Soli Deo Gloria — Every pixel and part of this project is offered as worship to God, in gratitude for the beautiful things He has created for us to enjoy. ✝️</p>
  </footer>

  <!-- Tiny, self-contained typo-tolerant ship search -->
  <script>
  (function(){
    const DATA = [
      {name:"Sun Princess",  url:"princess-sun-princess.html",  aliases:["Sun Priness","Sun Princces"]},
      {name:"Star Princess", url:"princess-star-princess.html", aliases:["Star Priness","Star Princces"]}
    ];
    const $=s=>document.querySelector(s);
    const norm=s=>String(s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').trim();

    function score(q, text){
      if(!q) return 0.1;
      if(text.startsWith(q)) return 0.1;
      if(text.includes(q))   return 0.3;
      // one-edit tolerance
      const a=text, b=q; let i=0,j=0,err=0;
      while(i<a.length && j<b.length){
        if(a[i]===b[j]){i++;j++;continue;}
        if(++err>1) return 10;
        (a.length>b.length)?i++:(a.length<b.length)?j++:(i++,j++);
      }
      return 0.6;
    }

    function setup(){
      const input=$('#shipSearch'), btn=$('#btnSearch'), out=$('#searchResults');
      if(!input||!btn||!out) return;
      function run(){
        const q=norm(input.value);
        out.setAttribute('aria-busy','true');
        const items = DATA.map(d=>{
          const cand=[d.name].concat(d.aliases||[]);
          const sc = Math.min(...cand.map(c=>score(q, norm(c))));
          return {d, sc};
        }).filter(x=>!q || x.sc<10).sort((a,b)=>a.sc-b.sc).slice(0,12);
        out.innerHTML = items.length
          ? items.map(x=>`<a class="result" href="${x.d.url}"><strong>${x.d.name}</strong><br><small>${(x.d.aliases||[]).join(', ')}</small></a>`).join('')
          : `<div class="result"><em>No matches yet. Try “Sun Princess”.</em></div>`;
        out.setAttribute('aria-busy','false');
      }
      input.addEventListener('input', ()=>{ clearTimeout(input._t); input._t=setTimeout(run,90); });
      btn.addEventListener('click', run);
      run();
    }
    (document.readyState==='loading')?document.addEventListener('DOMContentLoaded',setup,{once:true}):setup();
  })();
  </script>

  <!-- Navigation dropdown functionality -->
  <script>
  (function() {
    'use strict';
    var dropdowns = document.querySelectorAll('.nav-dropdown');
    function toggleDropdown(dropdown) {
      var isOpen = dropdown.classList.contains('open');
      closeAllDropdowns();
      if (!isOpen) {
        dropdown.classList.add('open');
        var btn = dropdown.querySelector('button');
        if (btn) btn.setAttribute('aria-expanded', 'true');
      }
    }
    function closeAllDropdowns() {
      dropdowns.forEach(function(dd) {
        dd.classList.remove('open');
        var btn = dd.querySelector('button');
        if (btn) btn.setAttribute('aria-expanded', 'false');
      });
    }
    dropdowns.forEach(function(dropdown) {
      var btn = dropdown.querySelector('button');
      if (btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          toggleDropdown(dropdown);
        });
        btn.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') { closeAllDropdowns(); btn.focus(); }
          if (e.key === 'ArrowDown') {
            e.preventDefault();
            dropdown.classList.add('open');
            btn.setAttribute('aria-expanded', 'true');
            var firstLink = dropdown.querySelector('.dropdown-menu a');
            if (firstLink) firstLink.focus();
          }
        });
      }
      var menu = dropdown.querySelector('.dropdown-menu');
      if (menu) {
        menu.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') { closeAllDropdowns(); if (btn) btn.focus(); }
        });
      }
    });
    document.addEventListener('click', function(e) {
      var isInsideDropdown = false;
      dropdowns.forEach(function(dd) { if (dd.contains(e.target)) isInsideDropdown = true; });
      if (!isInsideDropdown) closeAllDropdowns();
    });
  })();
  </script>

  <!-- Recent Articles Rail -->
  <script>
  (function(){
    "use strict";
    (async function recentRail(){
      const rail = document.getElementById('recent-rail');
      if(!rail) return;
      const fallback = document.getElementById('recent-rail-fallback');
      if(fallback) fallback.style.display = '';
      try {
        const res = await fetch('/assets/data/articles/index.json', { credentials: 'omit', cache: 'no-cache' });
        if(!res.ok) throw new Error('Failed');
        const articles = await res.json();
        if(fallback) fallback.style.display = 'none';
        rail.innerHTML = articles.slice(0, 4).map(a => 
          '<div style="margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px solid #e0e8f0;">' +
          '<h4 style="margin:0 0 .25rem;font-size:.95rem;"><a href="' + a.url + '">' + a.title + '</a></h4>' +
          '</div>'
        ).join('');
      } catch(err) {
        if(fallback) fallback.textContent = 'Unable to load articles';
      }
    })();
  })();
  </script>
</body>
</html>
