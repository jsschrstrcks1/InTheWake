<!doctype html>
<html lang="en">
<head>
  <!-- Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WZP891PZXJ"></script>
  <script>
    window.dataLayer=window.dataLayer||[];
    function gtag(){dataLayer.push(arguments);}
    gtag('js',new Date()); gtag('config','G-WZP891PZXJ');
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Royal Caribbean — Fleet (v2.203)</title>
  <link rel="stylesheet" href="https://www.cruisinginthewake.com/assets/styles.css?v=2.234"/>

  <!-- Minor page styles + rail grid -->
  <style>
    .fleet-grid { display:grid; gap:.9rem }
    @media (min-width:1060px){ .fleet-grid { grid-template-columns: minmax(0,1fr) 360px; } }
    .cards { display:grid; grid-template-columns: repeat(auto-fill, minmax(260px,1fr)); gap:.9rem; }
    .ship-card { display:grid; grid-template-columns:96px 1fr; gap:.6rem; align-items:start;
                 border:2px solid var(--rope); border-radius:14px; padding:.6rem; background:#fff; }
    .ship-card .thumb { width:96px; height:64px; overflow:hidden; border-radius:10px;
                        background:#eef4f6; border:1px solid #dfe7ea; }
    .ship-card .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
    .pill-row{display:flex; gap:.5rem; flex-wrap:wrap}
    .pill-row a{ padding:.4rem .7rem; border:1px solid var(--rope); border-radius:999px; background:#fff; text-decoration:none; font-weight:600 }
  </style>

  <!-- Rail article image fallback needs this once -->
  <style>
    .rail{display:grid; gap:.9rem}
    .rail-item{display:grid; grid-template-columns:112px 1fr; gap:.75rem; align-items:start}
    .rail-item .thumb img{display:block;width:112px;height:72px;object-fit:cover;border-radius:.5rem}
    .rail-item .avatar{width:20px;height:20px;border-radius:50%;vertical-align:middle;margin-right:.25rem}
  </style>

  <!-- Simple brand hero -->
  <style>
    .hero{ position:relative; background:url('https://www.cruisinginthewake.com/assets/index_hero.jpg') center/cover no-repeat; min-height:220px }
    .hero-credit{ position:absolute; right:.85rem; bottom:.85rem }
    .hero-credit .pill{ display:inline-block; padding:.45rem .7rem; border-radius:999px; background:#fff; border:1px solid var(--rope); font-weight:600 }
  </style>
</head>

<body class="page">
  <header class="hero-header">
    <div class="navbar">
      <div class="brand">
        <img src="https://www.cruisinginthewake.com/assets/logo_wake.png" alt="In the Wake wordmark"/>
      </div>
      <nav class="nav">
        <a href="https://www.cruisinginthewake.com/">Home</a>
        <a href="https://www.cruisinginthewake.com/ships/ships.html" aria-current="page">Ships</a>
        <a href="https://www.cruisinginthewake.com/ports.html">Ports</a>
        <a href="https://www.cruisinginthewake.com/packing-lists.html">Packing Lists</a>
        <a href="https://www.cruisinginthewake.com/solo.html">Solo</a>
        <a href="https://www.cruisinginthewake.com/travel.html">Travel</a>
        <a href="https://www.cruisinginthewake.com/about-us.html">About</a>
      </nav>
    </div>

    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="hero-credit"><a class="pill" href="https://instagram.com/flickersofmajesty" target="_blank" rel="noopener">Photo © Flickers of Majesty</a></div>
    </div>
  </header>

  <main class="wrap fleet-grid" id="content">
    <!-- LEFT -->
    <div>
      <section class="card">
        <h1>Royal Caribbean Ships — At a Glance</h1>
        <p class="tiny muted">This list renders only ships that have **verified images** in our library. As more imagery is verified, more cards will appear.</p>

        <div class="cards" id="fleet-cards" aria-live="polite"></div>
        <p class="tiny muted" id="fleet-note" style="margin-top:.5rem">Showing ships with verified images only.</p>
      </section>

      <section class="card">
        <h2>Explore by Cruise Line</h2>
        <div class="pill-row">
          <a href="/cruise-lines.html">All Cruise Lines</a>
          <a href="/cruise-lines.html#royal-caribbean">Royal Caribbean</a>
        </div>
      </section>
    </div>

    <!-- RIGHT RAIL -->
    <aside class="rail" aria-label="Right rail">
      <section class="card">
        <h3>From the Journal</h3>
        <div id="journal-rail"></div>
      </section>
    </aside>
  </main>

  <footer class="wrap" role="contentinfo">
    © 2025 In the Wake — A Cruise Traveler’s Logbook
    <p class="tiny center" style="margin-top:.5rem">Soli Deo Gloria — may every pixel and paragraph bear His reflection, this site is offered as worship to God.</p>
  </footer>

  <!-- IMAGE INDEX (exactly from your list; only used for verified cards) -->
  <script>
  // Helper: make absolute & URL-encode spaces safely
  const abs = (p)=> {
    if(!p) return '';
    const base = p.startsWith('/') ? p : '/'+p;
    // encode only the path segments (keeps slashes)
    return base.split('/').map((seg,i)=> i===0?'':encodeURIComponent(seg)).join('/');
  };

  // Map ship slug -> preferred image (we’ll not render if image is missing)
  const SHIP_IMAGES = {
    "enchantment-of-the-seas": "/ships/assets/enchantment-of-the-seas1.jpg",
    "grandeur-of-the-seas": "/ships/assets/grandeur-of-the-seas1.jpg",
    "rhapsody-of-the-seas": "/ships/assets/rhapsody-of-the-seas1.jpg",
    "sovereign-of-the-seas": "/ships/assets/sovereign-of-the-seas1.jpg",
    "vision-of-the-seas": "/ships/assets/vision-of-the-seas1.jpg",
    "allure-of-the-seas": "ships/assets/images/allure-of-the-seas-3.jpg",
    "adventure-of-the-seas": "ships/rcl/images/Adventure_of_the_Seas2.jpg"
  };

  // Minimal dataset (we render only if we have an image above)
  const FLEET = [
    { name:"Adventure of the Seas", slug:"adventure-of-the-seas", class:"Voyager" },
    { name:"Allure of the Seas", slug:"allure-of-the-seas", class:"Oasis" },
    { name:"Enchantment Of The Seas", slug:"enchantment-of-the-seas", class:"Vision" },
    { name:"Grandeur Of The Seas", slug:"grandeur-of-the-seas", class:"Vision" },
    { name:"Rhapsody Of The Seas", slug:"rhapsody-of-the-seas", class:"Vision" },
    { name:"Sovereign Of The Seas", slug:"sovereign-of-the-seas", class:"Sovereign" },
    { name:"Vision Of The Seas", slug:"vision-of-the-seas", class:"Vision" }
  ];

  function shipCard(s) {
    const imgPath = SHIP_IMAGES[s.slug];
    if(!imgPath) return ''; // not verified; skip
    const src = abs(imgPath);
    const fallback = "/assets/index_hero.jpg";
    return `
      <article class="ship-card">
        <div class="thumb">
          <img src="${src}" alt="${s.name}"
               onerror="this.onerror=null;this.src='${fallback}'">
        </div>
        <div>
          <h4 style="margin:.1rem 0 .25rem 0">${s.name}</h4>
          <div class="tiny muted"><span class="badge" style="background:#e6f4f8;border:1px solid var(--rope);border-radius:999px;padding:.05rem .45rem">${s.class||'—'}</span></div>
          <div class="tiny muted">• Debut: —</div>
          <div class="tiny muted">• Cap: —</div>
        </div>
      </article>`;
  }

  (function renderFleet(){
    const mount = document.getElementById('fleet-cards');
    mount.innerHTML = FLEET.map(shipCard).filter(Boolean).join('') || '<p class="tiny muted">No verified images yet.</p>';
  })();
  </script>

  <!-- Journal rail (hard fallbacks; ensures Top 20 has a thumb) -->
  <script>
  (function(){
    const V='2.203';
    const mount=document.getElementById('journal-rail');
    const sources=[
      '/assets/data/articles.json?v='+V,
      '/assets/data/articles/index.json?v='+V,
      '/solo/articles/index.json?v='+V
    ];
    const SEED=[
      {
        url:'/solo/articles/freedom-of-your-own-wake.html',
        title:'Freedom of Your Own Wake',
        date:'2024-08-13',
        dek:'On choosing solitude without being alone.',
        image:'/assets/index_hero.jpg',
        author:{name:'Ken Baker',url:'/authors/ken-baker.html',image:'/authors/img/ken1.webp'}
      },
      {
        url:'/travel/tina-planning-grace-and-margin.html',
        title:'Why I Started Solo Cruising',
        date:'2024-05-31',
        dek:'From that first solo gangway to a thriving community — freedom found at sea.',
        image:'/assets/articles/tina/cover.jpg',
        author:{name:'Tina Maulsby',url:'/authors/tina.html',image:'/authors/img/author.webp'}
      },
      {
        url:'/travel.html#top-20-questions',
        title:'Top 20 First-Cruise Questions (Answered)',
        date:'2025-10-16',
        dek:'A first-person guide to planning, packing, ports, and ship life.',
        image:'/assets/articles/top-20-questions/cover.jpg',
        fallback:'/assets/index_hero.jpg',
        author:{name:'Ken Baker',url:'/authors/ken-baker.html',image:'/authors/img/ken1.webp'}
      }
    ];
    function normalize(payload){
      const list=Array.isArray(payload?.articles)?payload.articles:(Array.isArray(payload)?payload:[]);
      return list.map(a=>({
        url:a.url||a.permalink||'#',
        title:a.title||a.headline||'Article',
        dek:a.dek||a.description||a.excerpt||'',
        date:a.datePublished||a.date||'',
        image:a.image||'',
        fallback:a.fallback||'',
        author:a.author||a.by||null
      })).filter(a=>a.url&&(/[/.]/.test(a.url)));
    }
    async function tryFetch(u){ try{const r=await fetch(u,{cache:'no-store'}); if(!r.ok) throw 0; return normalize(await r.json()); }catch(_){return [];} }
    const safeDate=d=>isNaN(Date.parse(d))?'':new Date(d).toLocaleDateString();
    function card(a){
      const img=a.image||a.fallback||'/assets/index_hero.jpg';
      const avatar=a.author?.image||'/authors/img/author.webp'; const name=a.author?.name||''; const url=a.author?.url||'#';
      return `<article class="rail-item">
        <a class="thumb" href="${a.url}">
          <img src="${img}" alt="${a.title}" onerror="this.onerror=null;this.src='${a.fallback||'/assets/index_hero.jpg'}'">
        </a>
        <div class="meta">
          <h4><a href="${a.url}">${a.title}</a></h4>
          <p class="tiny muted">${a.date?safeDate(a.date):''}${name?` · <img class="avatar" src="${avatar}" alt="${name}" onerror="this.onerror=null;this.src='/authors/img/author.webp'"> <a href="${url}">${name}</a>`:''}</p>
          ${a.dek?`<p class="tiny">${a.dek}</p>`:''}
        </div>
      </article>`;
    }
    (async function boot(){
      let items=[];
      for(const s of sources){ items=await tryFetch(s); if(items.length) break; }
      if(!items.length) items=SEED;
      mount.innerHTML=items.slice(0,3).map(card).join('');
    })();
  })();
  </script>
</body>
</html>
