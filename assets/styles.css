/* ===== In the Wake — Unified Styles (v3.004) ===== */
:root{
  --sea:#0a3d62; --foam:#e6f4f8; --rope:#d9b382; --ink:#083041; --sky:#f7fdff; --accent:#0e6e8e;
  --grid-stroke: rgba(255,255,255,.24);
  --grid-label: rgba(255,255,255,.85);
  --grid-outline: rgba(8,48,65,.35);
  --compass-tint: invert(39%) sepia(9%) saturate(1063%) hue-rotate(151deg) brightness(92%) contrast(89%);
}

*{ box-sizing:border-box }
html,body{ margin:0; padding:0 }
body{
  font-family: ui-sans-serif,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  color:var(--ink); background:var(--sky); line-height:1.55;
}
a{ color:var(--accent); text-decoration:none }
a:hover{ text-decoration:underline }
img{ max-width:100%; height:auto; display:block }

/* ===== Header + Nav ===== */
.hero-header{ position:relative; border-bottom:6px double var(--rope); background:#eaf6f6 }
.navbar{
  max-width:1100px; margin:0 auto;
  display:flex; gap:.6rem; padding:.5rem .9rem .35rem;
  align-items:flex-end; position:relative; z-index:5;
}
.brand{ display:flex; align-items:flex-end; gap:.6rem }
.brand img{ height:28px; width:auto; display:block }
.brand-title{ font-weight:700; color:var(--ink); font-size:.95rem }
.version-badge{ font-size:.72rem; opacity:.8; margin-left:.35rem }

/* Pills nav — centered globally */
.site-header .pill-nav.pills{
  justify-content:center; margin-left:auto; margin-right:auto;
  max-width:none; width:100%; text-align:center;
}
@media (min-width:980px){
  .site-header .pill-nav.pills{
    flex-wrap:nowrap; gap:.45rem;
  }
  .site-header .pill-nav.pills a{
    font-size:.92rem; padding:.32rem .64rem;
  }
}
@media (max-width:979.98px){
  .site-header .pill-nav.pills{ justify-content:center; }
}
.pills a{
  padding:.35rem .7rem; border-radius:10px; border:1px dashed var(--rope);
  background:#fff; font-size:.9rem; color:var(--accent);
}
.pills a:hover{ background:#f9fdfd; text-decoration:none }

/* ===== Full-bleed hero ===== */
.hero{
  position:relative; width:100vw; margin-left:calc(50% - 50vw);
  min-height:clamp(200px, 24vw, 340px);
  background:url('/assets/index_hero.jpg') 50% 50% / cover no-repeat;
  display:flex; align-items:flex-end; overflow:hidden; isolation:isolate;
}
body.no-hero-filter .hero,
.hero-header .hero,
.hero-header .hero *{ filter:none!important; mix-blend-mode:normal!important; opacity:1!important }
.hero::before,.hero::after{ content:none!important }

/* Grid overlay */
.latlon-grid{ position:absolute; inset:0; z-index:1; pointer-events:none }
.latlon-grid svg{ width:100%; height:100% }
.hero .latlon-grid .grid-lines{ stroke:var(--grid-stroke); vector-effect:non-scaling-stroke }
.hero .latlon-grid .grid-labels text{
  fill:var(--grid-label); paint-order:stroke; stroke:var(--grid-outline);
  stroke-width:.4px; vector-effect:non-scaling-stroke;
  letter-spacing:.2px; font-size:2.2px;
}
@media (max-width:900px){ .hero .latlon-grid .grid-labels text{ font-size:2.0px } }
@media (max-width:700px){ .hero .latlon-grid .grid-labels text{ font-size:1.9px } }
@media (max-width:520px){ .hero .latlon-grid .grid-labels text{ font-size:1.7px } }

/* Compass */
.hero-compass{
  position:absolute; right:min(3vw,1rem); top:.5rem;
  width:86px; opacity:.95; z-index:2;
  filter:var(--compass-tint) drop-shadow(0 2px 6px rgba(0,0,0,.25));
  pointer-events:none;
}

/* Ship lockup + tagline */
.hero-title{
  position:absolute; left:min(3vw,1rem); bottom:clamp(.6rem,2vw,1.4rem);
  z-index:3; display:flex; align-items:flex-end; gap:.6rem;
  text-shadow:0 2px 6px rgba(0,0,0,.45);
}
.hero-title .logo{
  width:clamp(189px,23.1vw,378px);
  max-width:min(45vw,520px);
  filter:drop-shadow(0 3px 8px rgba(0,0,0,.45));
}
.hero .tagline{
  position:absolute; left:50%; transform:translateX(-50%);
  bottom:clamp(.55rem,1.6vw,1.1rem);
  font-weight:700; letter-spacing:.2px; color:#e6f4f8;
  text-shadow:0 2px 6px rgba(0,0,0,.45);
  font-size:clamp(.9rem,1.5vw,1.35rem); white-space:nowrap; z-index:3;
}

/* Hero credit */
.hero-credit{
  position:absolute; right:.85rem; bottom:.85rem; z-index:4;
}
.hero-credit .pill.long{
  display:inline-block; padding:.45rem .7rem; border-radius:999px;
  background:#fff; border:1px solid var(--rope); font-weight:600; color:#0a3d62;
  box-shadow:0 1.5px 6px rgba(8,48,65,.15); text-decoration:none;
}
.hero-credit .pill.long:hover{ background:#f9fdfd }

/* ===== Content + cards ===== */
.wrap{ max-width:1100px; margin:0 auto; padding:20px 14px 36px; }
.card{
  background:#fff; border:2px solid var(--rope); border-radius:14px;
  padding:1rem; margin:.8rem 0; box-shadow:0 2px 6px rgba(8,48,65,.08);
  position:relative; overflow:hidden;
  opacity:0; transform:translateY(12px);
  transition:opacity .4s ease, transform .4s ease;
}
.card.visible{ opacity:1; transform:translateY(0); }
h1,h2,h3{ color:var(--sea) }

/* ===== Motto Styling — v3.004 (contrast fix) ===== */
.motto {
  font-style: italic;
  font-size: 1.1rem;
  color: var(--sea, #0a3d62);
  text-align: left;
  padding: 0.4rem 0.6rem;
  margin: 0.4rem 0 1rem;
  border-left: 4px solid var(--rope, #d9b382);
  background: rgba(14,110,142,0.08);
  border-radius: 0 8px 8px 0;
  font-weight: 500;
  opacity: 0.98;
  transition: background .3s ease, opacity .3s ease;
}
.motto:hover {
  background: rgba(14,110,142,0.14);
  opacity: 1;
}
@media (prefers-color-scheme: dark) {
  .motto {
    color: var(--foam, #e6f4f8);
    border-left-color: var(--foam, #d9b382);
    background: rgba(255,255,255,0.1);
  }
  .motto:hover { background: rgba(255,255,255,0.18); }
}

/* ===== Shared grids ===== */
.grid-2{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:1rem; }
@media (max-width:900px){ .grid-2{ grid-template-columns:1fr; } }

.grid-3{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:1.2rem;
}
@media (max-width:900px){ .grid-3{ grid-template-columns:1fr; } }

/* ===== Buttons ===== */
.btn{
  display:inline-block; padding:.5rem .8rem; border-radius:999px;
  border:1px solid var(--accent); color:var(--accent);
  text-decoration:none; font-size:.95rem; line-height:1;
}
.btn:hover{ background:var(--accent); color:#fff; }

/* ===== Floating Social Share Bar ===== */
.share-bar{
  position:fixed; right:.9rem; bottom:1.4rem;
  display:flex; flex-direction:column; gap:.5rem; z-index:999;
  opacity:0; transform:translateY(15px);
  transition:opacity .45s ease, transform .45s ease;
}
.share-bar.visible{ opacity:1; transform:translateY(0); }
.share-bar .share{
  background:var(--ink,#083041); color:#fff; text-decoration:none;
  padding:.45rem .7rem; border-radius:10px; font-size:.85rem; line-height:1;
  box-shadow:0 2px 6px rgba(0,0,0,.25); text-align:center; transition:background .25s ease;
}
.share-bar .share:hover{ background:var(--accent,#0e6e8e); }
@media (prefers-reduced-motion:reduce){ .share-bar{ transition:none!important } }

/* ===== Responsive tweaks ===== */
@media (max-width:600px){
  .hero{ min-height:clamp(170px,30vw,300px) }
  .hero-title .logo{ width:clamp(170px,36vw,320px) }
}
/* ===== v3.006 additions (restored utilities & modules) ===== */

/* Utilities */
.pill{
  display:inline-block; padding:.35rem .6rem; border:1px dashed var(--rope);
  border-radius:999px; background:#fff; font-size:.9rem;
}
.tiny{ font-size:.8rem; color:#345 }
.small{ font-size:.9rem; color:#345 }
.button-group{ display:flex; justify-content:center; gap:.7rem; flex-wrap:wrap }
.hidden{ display:none !important }

/* Skip link */
.skip-link{
  position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  left:.75rem; top:.75rem; width:auto; height:auto; padding:.5rem .75rem;
  background:#fff; color:var(--sea); border:2px solid var(--rope); border-radius:10px;
  box-shadow:0 2px 8px rgba(0,0,0,.2); z-index:9999;
}

/* Header pills: enable horizontal scroll on small screens */
@media (max-width: 979.98px){
  .site-header .pill-nav.pills{
    white-space:nowrap; overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none;
  }
  .site-header .pill-nav.pills::-webkit-scrollbar{ display:none }
  .site-header .pill-nav.pills > a{ flex:0 0 auto }
}

/* Prose */
.prose{ line-height:1.65; color:var(--ink) }
.prose h3{ margin:1.1rem 0 .4rem; color:var(--sea) }
.prose p{ margin:.65rem 0 }
.prose ul{ padding-left:1.1rem; margin:.5rem 0 }
.prose li{ margin:.35rem 0 }
figure figcaption{ font-size:.8rem; color:#546; margin-top:.35rem }

/* Dining card */
.card-hero{ width:100%; border-radius:12px; margin-bottom:12px }
.venues.two-col{ display:grid; gap:1rem }
@media (min-width:760px){ .venues.two-col{ grid-template-columns:1fr 1fr } }
.venue-list{ margin:.25rem 0 0 1.1rem }
.venue-list a{ color:inherit; text-decoration:none; border-bottom:1px dotted #c9d7de }
.venue-list a:hover{ border-bottom-color:#7ba0b2 }

/* Stats under First Look */
.ship-stats.card.mini{ margin-top:.6rem }
.stats-grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:.4rem .8rem; font-size:.95rem }
.stat-line{ display:flex; gap:.35rem; justify-content:space-between; border-bottom:1px dashed #e4e9ec; padding:.2rem 0 }
.stat-key{ color:#355; font-weight:600 } .stat-val{ color:#024 }

/* Swiper helpers */
.swiper{ width:100%; max-width:820px; margin:0 auto }
.swiper-slide iframe{ width:100%; aspect-ratio:16/9; display:block; border:0; border-radius:12px }
.swiper .swiper-button-prev, .swiper .swiper-button-next, .swiper .swiper-pagination{ z-index:4 }
.carousel-fallback .swiper-button-prev,
.carousel-fallback .swiper-button-next,
.carousel-fallback .swiper-pagination{ display:none !important }

/* Related & class pills rows */
.class-pills, .related-pills{ display:flex; gap:.5rem; flex-wrap:wrap; justify-content:center; }

/* Ships hub cards */
.ship-card{
  display:grid; grid-template-columns:96px 1fr; gap:.6rem; align-items:center;
  padding:.6rem; border:2px solid var(--rope); border-radius:14px; background:#fff;
  text-decoration:none; color:inherit; box-shadow:0 2px 6px rgba(8,48,65,.08);
}
.ship-card .thumb{ width:96px; height:64px; overflow:hidden; border-radius:10px; background:#eef4f6; border:1px solid #dfe7ea }
.ship-card .thumb img{ width:100%; height:100%; object-fit:cover }
.ship-card .thumb img.thumb-fallback{ object-fit:contain; padding:6px; background:#fff }
.ship-card .body{ display:flex; align-items:center; gap:.5rem; flex-wrap:wrap }
.ship-card .badge{ font-size:.72rem; background:#e6f4f8; border:1px solid var(--rope); border-radius:999px; padding:.1rem .5rem }
.ship-card.historical .badge.hist{ background:#fff4f1; border-color:#e2a58b }
.ship-card.is-disabled{ opacity:.7; pointer-events:none }

/* Optional page-scoped watermark */
.note-kens-logbook::after{
  content:""; position:absolute; inset:0; margin:auto; width:min(60%,360px); height:min(60%,360px);
  background:url('/assets/watermark.png') center/contain no-repeat; opacity:.12; pointer-events:none;
}
