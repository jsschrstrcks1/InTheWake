<!doctype html>
<html lang="en">
<head>
<!-- ai-breadcrumbs
     entity: Service Worker Cache Health
     type: Information Page
     parent: /
     category: General Information
     updated: 2025-11-15
     expertise: Cruise travel, planning, research
     target-audience: Cruise travelers, vacation planners, research-oriented cruisers
     answer-first: Information and resources about Service Worker Cache Health.
     -->
  <meta charset="utf-8" />
  <title>Service Worker Cache Health — In the Wake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow">
  <meta name="ai-summary" content="Internal diagnostic tool for monitoring service worker cache health and status.">
  <meta name="last-reviewed" content="2025-11-19">
  <meta name="content-protocol" content="ICP-Lite v1.0">
    <link rel="stylesheet" href="/assets/styles.css?v=3.010.300"/>
  <style>
  /* Header / Hero */
  .hero-header {
    position: relative;
    border-bottom: 6px double var(--rope);
    background: #eaf6f6;
    z-index: 9000;
  }

  .navbar {
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    align-items: flex-end;
    gap: .6rem;
    padding: .5rem .9rem .35rem;
    position: relative;
    z-index: 2000;
    overflow: visible;
  }

  .brand {
    display: flex;
    align-items: flex-end;
    gap: .6rem;
  }

  .brand img {
    height: 28px;
    width: auto;
  }

  .version-badge {
    font-size: .72rem;
    opacity: .8;
    color: var(--text-muted);
  }

    :root{
      --ink:#0a3d62;
      --muted:#6b7c8a;
      --bg:#f7f9fb;
      --card:#ffffff;
      --accent:#0e6e8e;
      --accent-2:#0a5a75;
      --danger:#8a1d1d;
      --ok:#136f3a;
      --border:#dfe7ea;
      --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      --round: 12px;
    }
    *{ box-sizing: border-box; }
    body{
      margin:0;
      font: 15px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color: var(--ink);
      background: var(--bg);
    }
    header{
      padding: 1.25rem 1rem;
      background: #fff;
      border-bottom: 1px solid var(--border);
      position: sticky; top:0; z-index:10;
    }
    .wrap{ max-width: 1000px; margin: 0 auto; }
    h1{ margin:0 0 .25rem; font-size: 1.35rem; }
    .sub{ color: var(--muted); font-size: .95rem; }
    main{ padding: 1rem; }
    .grid{ display:grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    .card{
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--round);
      padding: 1rem;
      box-shadow: 0 1px 2px rgba(0,0,0,.03);
    }
    .card h3{ margin:.2rem 0 .7rem; font-size:1rem; }
    .stat{ display:flex; justify-content:space-between; margin:.35rem 0; }
    .muted{ color: var(--muted); }
    .mono{ font-family: var(--mono); font-size: .92rem; }
    .pill{
      display:inline-block; padding:.25rem .6rem; border-radius:999px; border:1px solid var(--border); background:#fff; margin:.2rem .2rem .2rem 0;
      font-size:.85rem;
    }
    .btn{
      appearance:none; border:1px solid var(--border); background: var(--accent); color:#fff; padding:.5rem .8rem; border-radius:10px; cursor:pointer;
      font-weight:600;
    }
    .btn.secondary{ background:#fff; color:var(--accent); }
    .btn.danger{ background: var(--danger); border-color: #b74444; }
    .row{ display:flex; gap:.5rem; flex-wrap:wrap; align-items:center; }
    pre{ white-space:pre-wrap; word-break:break-word; background:#f4f6f8; border:1px solid var(--border); padding:.75rem; border-radius:8px; margin:.5rem 0 0; }
    table{ width:100%; border-collapse:collapse; }
    td,th{ border-bottom:1px solid var(--border); padding:.4rem .5rem; text-align:left; font-size:.95rem; }
    th{ color:var(--muted); font-weight:600; }
    footer{ padding: 2rem 1rem; color: var(--muted); }
    code{ background:#f4f6f8; border:1px solid var(--border); padding:.15rem .35rem; border-radius:6px; }

  .nav {
    flex: 1 1 auto;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: .5rem;
    white-space: nowrap;
    flex-wrap: nowrap;
    overflow: visible;
    padding-inline: .75rem;
  }

  @media (max-width: 768px) {
    .nav {
      justify-content: flex-start;
      overflow-x: auto;
      scrollbar-width: thin;
      -webkit-overflow-scrolling: touch;
    }

  }
  </style>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Ken Baker",
  "url": "https://inthewake.com/about/ken-baker.html",
  "jobTitle": "Cruise Research Analyst & Data Specialist",
  "description": "Cruise industry analyst specializing in ship comparisons, deck plan analysis, and dining venue research.",
  "knowsAbout": [
    "Cruise Ship Analysis",
    "Deck Plans",
    "Royal Caribbean",
    "Cruise Dining",
    "Ship Comparisons"
  ]
}
</script>

  <style>
    /* Navigation */
    .nav {
      flex: 1 1 auto;
      min-width: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      white-space: nowrap;
      flex-wrap: nowrap;
      overflow: visible;
      padding-inline: .75rem;
    }

    @media (max-width: 768px) {

    }

    .navbar {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      gap: .6rem;
      padding: .5rem .9rem .35rem;
      align-items: flex-end;
      position: relative;
      z-index: 5;
    }

    .brand {
      display: flex;
      align-items: flex-end;
      gap: .6rem;
    }

    .brand img {
      height: 28px;
      width: auto;
      display: block;
    }

    .version-badge {
      font-size: .72rem;
      opacity: .8;
      margin-left: .35rem;
    }
  </style>

  <!-- LCP Optimization: Preload critical hero images -->
  <link rel="preload" as="image" href="/assets/logo_wake_560.png" fetchpriority="high"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg?v=3.010.300" fetchpriority="high"/>
</head>
<body>
<header class="site-header hero-header" role="banner">
<div class="navbar">
  <div class="brand">
    <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
    <span class="tiny version-badge">V1.Beta</span>
  </div>

    <!-- Hero section -->
    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="latlon-grid" aria-hidden="true"></div>
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.300" width="180" height="180" alt="" aria-hidden="true"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill long" href="https://instagram.com/flickersofmajesty">Photo © Flickers of Majesty</a>
      </div>
    </div>
</header>

        <nav class="site-nav" aria-label="Main site navigation">
        <a class="nav-pill" href="/">Home</a>

        <!-- Planning Dropdown -->
        <div class="nav-dropdown" id="nav-planning">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Planning <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/planning.html">Planning (overview)</a>
            <a href="/ships.html">Ships</a>
            <a href="/restaurants.html">Restaurants &amp; Menus</a>
            <a href="/ports.html">Ports</a>
            <a href="/drink-packages.html">Drink Packages</a>
            <a href="/drink-calculator.html">Drink Calculator</a>
            <a href="/stateroom-check.html">Stateroom Check</a>
            <a href="/cruise-lines.html">Cruise Lines</a>
            <a href="/packing-lists.html">Packing Lists</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-dropdown" id="nav-travel">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Travel <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/travel.html">Travel (overview)</a>
            <a href="/solo.html">Solo</a>
          </div>
        </div>

        <a class="nav-pill" href="/tools/port-tracker.html">Port Logbook</a>
        <a class="nav-pill" href="/tools/ship-tracker.html">Ship Logbook</a>
        <a class="nav-pill" href="/search.html">Search</a>
        <a class="nav-pill" href="/about-us.html">About</a>
      </nav></div>

  <header>
    <div class="wrap">
      <h1>Service Worker Cache Health</h1>
      <div class="sub">Admin · <span class="mono">/admin/reports/sw-health.html</span></div>
    </div>
  </header>
  <!-- Tab button -->
<button class="tab-btn" id="tab-security-btn" data-tab="security" type="button">Security</button>

<!-- Panel container (starts hidden; JS will fill it) -->
<section id="tab-security" class="tab-panel" hidden>
  <div id="security-root" class="card"></div>
</section>

  <main class="wrap" id="app">
    <section class="grid" aria-label="summary">
      <div class="card">
        <h3>Overview</h3>
        <div class="stat"><span>SW Version</span><strong id="swver" class="mono">—</strong></div>
        <div class="stat"><span>Storage Used</span><strong id="usage">—</strong></div>
        <div class="stat"><span>Quota</span><strong id="quota">—</strong></div>
        <div class="row" style="margin-top:.6rem">
          <button class="btn" id="refresh">Refresh</button>
          <button class="btn secondary" id="view-errors">View Errors</button>
          <button class="btn danger" id="clear-nonpre">Clear Non-Precache</button>
        </div>
      </div>

      <div class="card">
        <h3>Buckets</h3>
        <table>
          <thead><tr><th>Bucket</th><th>Cache Name</th><th>Count</th></tr></thead>
          <tbody id="bucket-rows">
            <tr><td colspan="3" class="muted">Loading…</td></tr>
          </tbody>
        </table>
      </div>

      <div class="card">
        <h3>Health Probe</h3>
        <div class="muted">Raw <code>/__sw_health</code> response</div>
        <pre id="health">—</pre>
      </div>
      <div class="card">
        <h3>Calculator Status</h3>
        <div class="stat">
          <span>Pricing Data</span>
          <strong id="calc-status" class="mono">...</strong>
        </div>
        <div class="stat">
          <span>Data Age</span>
          <strong id="calc-age" class="mono">...</strong>
        </div>
        <div class="stat">
          <span>Confidence</span>
          <strong id="calc-conf" class="mono">...</strong>
        </div>
        <div class="row" style="margin-top:.6rem">
          <button class="btn secondary" id="force-refresh-calc">Force Refresh Calc Data</button>
        </div>
      </div>
    </section>

    <section class="card" style="margin-top:1rem">
      <h3>Sample URLs (first 10 per bucket)</h3>
      <div id="samples" class="muted">No sample listing in this view. Use DevTools Application → Cache Storage for full inspection.</div>
    </section>

    <section class="card" style="margin-top:1rem">
      <h3>Error Log</h3>
      <div class="muted">Click <b>View Errors</b> to load the last entries captured by <code>sw.js</code>.</div>
      <pre id="errors" style="display:none"></pre>
    </section>
  </main>

  <footer class="wrap">
    Tip: Open DevTools → <b>Application</b> → <b>Service Workers</b> to manually inspect/ unregister.  
    Use <code>caches.keys()</code> in Console to list all cache names.
  </footer>

  <!-- Navigation Dropdown Script -->
  <script src="/assets/js/dropdown.js"></script>

  <!-- In-App Browser Detection & Escape Banner -->
  <script src="/assets/js/in-app-browser-escape.js"></script>
</body>
</html>
