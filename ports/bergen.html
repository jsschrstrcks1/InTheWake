<!--
Soli Deo Gloria
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="ai-summary" content="First-person logbook guide to Bergen with tips for Bryggen wharf, Mount Fløyen funicular, and fish market."/>
  <meta name="last-reviewed" content="2025-11-21"/>
  <meta name="content-protocol" content="ICP-Lite v1.0"/>
  <title>Bergen Port Guide — Hanseatic Wharf & Gateway to Fjords | In the Wake</title>
  <meta name="description" content="First-person logbook guide to Bergen, Norway — colorful Bryggen wharf houses, Mount Fløyen funicular, fish market, and gateway to the fjords."/>
  <link rel="canonical" href="https://cruisinginthewake.com/ports/bergen.html"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/in_the_wake_icon_32x32.png"/>
  <!-- Service Worker Registration -->
  <script>
  if('serviceWorker' in navigator){
    window.addEventListener('load',()=>navigator.serviceWorker.register('/sw.js').catch(()=>{}));
  }
  </script>

  <link rel="stylesheet" href="/assets/styles.css"/>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://cruisinginthewake.com/"},
      {"@type": "ListItem", "position": 2, "name": "Ports", "item": "https://cruisinginthewake.com/ports.html"},
      {"@type": "ListItem", "position": 3, "name": "Bergen", "item": "https://cruisinginthewake.com/ports/bergen.html"}
    ]
  }
  </script>
  <style>
    /* Page Grid Layout (2-column with right rail) */
    .page-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
      align-items: start;
    }

    @media (min-width: 980px) {
      .page-grid {
        grid-template-columns: 1fr 360px;
      }
    }

    .rail {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .rail-list {
      display: grid;
      gap: 1rem;
    }

    .logbook-entry { font-size: 1.05rem; line-height: 1.8; color: #134; }
    .logbook-entry p { margin-bottom: 1.25rem; }
    .poignant-highlight { background: linear-gradient(135deg, #f0f9ff 0%, #e6f4f8 100%); border-left: 4px solid var(--accent, #0e6e8e); padding: 1.25rem 1.5rem; margin: 1.5rem 0; border-radius: 0 12px 12px 0; font-style: italic; }
    .port-section { margin: 2rem 0; padding: 1.25rem; background: #f7fdff; border-radius: 12px; border: 1px solid #e0f0f5; }
    .port-section h3 { margin-top: 0; color: var(--sea, #0a3d62); }
  
    .author-card-vertical {
      text-align: center;
    }
    .author-card-vertical .author-avatar {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      object-fit: cover;
      margin: 0 auto 1rem;
    }
    .author-card-vertical h4 {
      margin: 0.5rem 0 0.25rem;
    }
    .author-card-vertical p {
      margin: 0.25rem 0;
    }

    /* Hero image for port page */
    .port-hero {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }

    /* Inline images in text */
    .inline-image {
      float: right;
      width: 45%;
      max-width: 320px;
      margin: 0 0 1rem 1.5rem;
      border-radius: 10px;
      box-shadow: 0 3px 12px rgba(0,0,0,0.12);
    }

    .inline-image-left {
      float: left;
      width: 45%;
      max-width: 320px;
      margin: 0 1.5rem 1rem 0;
      border-radius: 10px;
      box-shadow: 0 3px 12px rgba(0,0,0,0.12);
    }

    @media (max-width: 680px) {
      .inline-image, .inline-image-left {
        float: none;
        width: 100%;
        max-width: 100%;
        margin: 1rem 0;
      }
    }

    /* Gallery grid */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin: 1.5rem 0;
    }

    .gallery-item {
      margin: 0;
      border-radius: 12px;
      overflow: hidden;
      background: #f7fdff;
      box-shadow: 0 3px 12px rgba(0,0,0,0.08);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .gallery-item:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }

    .gallery-item img {
      width: 100%;
      height: 220px;
      object-fit: cover;
      display: block;
    }

    .gallery-item figcaption {
      padding: 1rem;
      font-size: 0.9rem;
      color: #345;
      line-height: 1.5;
    }

    .gallery-item .photo-credit {
      font-size: 0.75rem;
      color: #678;
      margin-top: 0.5rem;
    }
  </style>

  <!-- LCP Optimization: Preload critical hero images -->
  <link rel="preload" as="image" href="/ports/img/bergen/bergen-1.jpeg" fetchpriority="high"/>
  <link rel="preload" as="image" href="/assets/logo_wake_560.png" fetchpriority="high"/>
</head>
<body class="page">
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <!-- ARIA Live Regions -->
  <div id="a11y-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  <div id="a11y-alerts" role="alert" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

  <header class="hero-header" role="banner">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
        <span class="tiny version-badge" aria-label="Site version 3.010.300">v3.010.300</span>
      </div>
            <nav class="site-nav" aria-label="Main site navigation">
        <a class="nav-pill" href="/">Home</a>

        <!-- Planning Dropdown -->
        <div class="nav-dropdown" id="nav-planning">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Planning <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/planning.html">Planning (overview)</a>
            <a href="/ships.html">Ships</a>
            <a href="/restaurants.html">Restaurants &amp; Menus</a>
            <a href="/ports.html">Ports</a>
            <a href="/drink-packages.html">Drink Packages</a>
            <a href="/drink-calculator.html">Drink Calculator</a>
            <a href="/stateroom-check.html">Stateroom Check</a>
            <a href="/cruise-lines.html">Cruise Lines</a>
            <a href="/packing-lists.html">Packing Lists</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-dropdown" id="nav-travel">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Travel <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/travel.html">Travel (overview)</a>
            <a href="/solo.html">Solo</a>
          </div>
        </div>

        <a class="nav-pill" href="/tools/port-tracker.html">Port Logbook</a>
        <a class="nav-pill" href="/tools/ship-tracker.html">Ship Logbook</a>
        <a class="nav-pill" href="/search.html">Search</a>
        <a class="nav-pill" href="/about-us.html">About</a>
      </nav></div>

    <!-- Hero -->
    <div class="hero">
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.300" width="180" height="180" alt="" aria-hidden="true" decoding="async"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline" aria-hidden="true">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <main class="wrap page-grid" id="main-content" role="main">
    <nav aria-label="Breadcrumb" style="margin-bottom: 1rem;"><ol style="list-style: none; padding: 0; margin: 0; font-size: 0.9rem; color: #666;"><li style="display: inline;"><a href="/">Home</a> &rsaquo; </li><li style="display: inline;"><a href="/ports.html">Ports</a> &rsaquo; </li><li style="display: inline;" aria-current="page">Bergen</li></ol></nav>
    <section class="page-intro" style="grid-column: 2; grid-row: 1; margin-bottom: 1.5rem;">
      <p class="answer-line" style="margin: 0.75rem 0; padding: 0.5rem 0.75rem; border-left: 3px solid var(--rope, #d9b382); background: #f7fdff; border-radius: 8px;">
        <strong>Quick Answer:</strong> Bergen is seven mountains, colorful Hanseatic wharf houses, and rain that somehow makes everything more beautiful – the gateway to the fjords.
      </p>
    </section>

    <div style="grid-column: 1;">
    <article class="card">
      <!-- Port Hero Image -->
      <img class="port-hero" src="/ports/img/bergen/bergen-1.jpeg" alt="Bergen - Heart of the Fjords with colorful waterfront" fetchpriority="high"/>

      <h1>Bergen: My Gateway to the Fjords</h1>
      <div class="logbook-entry">
        <img class="inline-image" src="/ports/img/bergen/bergen-2.jpeg" alt="View over Store Lungegårdsvann in Bergen" loading="lazy"/>
        <p>We sailed into the harbor at dawn with Bryggen's crooked wooden façades glowing like gingerbread against the mist. The funicular up Mount Fløyen was waiting – ten minutes later we stood above the cloud layer watching the city sparkle below while goats grazed on the roof of the station restaurant. Back down we wandered the UNESCO-listed Bryggen alleys – timber beams creaking, the smell of tar and salt, tiny galleries tucked between 300-year-old warehouses.</p>

        <img class="inline-image-left" src="/ports/img/bergen/bergen-3.jpeg" alt="Bergen panorama from the mountains" loading="lazy"/>
        <p>We had lunch at the fish market – the freshest salmon sashimi of my life eaten standing up, washed down with Aquavit that tasted like Christmas. In the afternoon we went back to the Fløibanen because we couldn't resist, this time hiking the ridge trail through pine forest that smelled like gin. Bergen rains a lot (it did, three times), but every shower left rainbows over the fjord and made the colors pop even more. The pros: compact, ridiculously pretty, and genuinely Norwegian. The cons: that rain is real, but Norwegians just smile and keep walking.</p>

        <div class="poignant-highlight">
          <strong>The Moment That Stays With Me:</strong> Standing on Fløyen in complete silence while low cloud poured over the ridge like dry ice and the first sunbeam hit Bryggen far below, turning the whole city gold for exactly thirty perfect seconds.
        </div>
      </div>

      <section class="port-section">
        <h3>Getting Around Bergen</h3>
        <p>Ship docks 5-minute walk <span class="distance-fun">approximately 33 school buses, 16 blue whales end-to-end, or 352 emperor penguins stacked skyward</span> from the fish market and Bryggen. Everything is walkable or quick funicular ride.</p>
      </section>

      <section class="port-section">
        <h3>Depth Soundings Ashore</h3>
        <p class="tiny" style="margin-bottom: 0.5rem; font-style: italic; color: #678;">Practical tips before you step off the ship.</p>
        <p>Bergen's weather changes every ten minutes – a light rain jacket lives in my day bag and has never once been unnecessary.</p>
      </section>

      <section class="port-section">
        <h3>Frequently Asked Questions</h3>
        <p><strong>Q: Is Bergen worth it?</strong><br/>A: The prettiest city in Norway, full stop.</p>
        <p><strong>Q: Best thing?</strong><br/>A: Fløibanen funicular + Bryggen wander.</p>
        <p><strong>Q: How long on Fløyen?</strong><br/>A: 2–3 hours including short hike.</p>
        <p><strong>Q: Walk from port?</strong><br/>A: Yes – right into the postcard.</p>
      </section>

      <!-- Photo Gallery -->
      <section class="port-section" style="background: transparent; border: none; padding: 0;">
        <h3>Bergen Gallery</h3>
        <div class="gallery-grid">
          <figure class="gallery-item">
            <img src="/ports/img/bergen/bergen-5.jpeg" alt="Bergen waterfront view" loading="lazy"/>
            <figcaption>
              Bergen's iconic waterfront where colorful wooden houses meet the harbor.
              <div class="photo-credit">Photo: <a href="https://commons.wikimedia.org/wiki/File:Bergen_(24654157362).jpg" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY 2.0)</div>
            </figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="/ports/img/bergen/bergen-6.jpeg" alt="Bergen harbor panorama" loading="lazy"/>
            <figcaption>
              Seven mountains surround Bergen, earning it the nickname "City Between Seven Mountains."
              <div class="photo-credit">Photo: <a href="https://commons.wikimedia.org/wiki/File:Bergen_(24654170912).jpg" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY 2.0)</div>
            </figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="/ports/img/bergen/bergen-7.jpeg" alt="Bergen fjord islands" loading="lazy"/>
            <figcaption>
              The fjords and islands around Bergen offer endless natural beauty.
              <div class="photo-credit">Photo: <a href="https://commons.wikimedia.org/wiki/File:2010-08-06_-_Bergen_-_Panoramafahrt_-_Inseln_und_Fjorde_-_panoramio_(1).jpg" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</div>
            </figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="/ports/img/bergen/bergen-8.jpeg" alt="Bergen coastal panorama" loading="lazy"/>
            <figcaption>
              Cruising the waters around Bergen reveals Norway's stunning coastal landscape.
              <div class="photo-credit">Photo: <a href="https://commons.wikimedia.org/wiki/File:2010-08-06_-_Bergen_-_Panoramafahrt_-_Inseln_und_Fjorde_-_panoramio.jpg" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</div>
            </figcaption>
          </figure>
        </div>
      </section>
    </article>
  </div>
  <aside class="rail" style="grid-column: 2;">
        <section class="card author-card-vertical" aria-labelledby="author-heading">
      <h3 id="author-heading">About the Author</h3>
      <a href="/authors/ken-baker.html" aria-label="View Ken Baker's profile">
        <picture>
          <source srcset="/authors/img/ken1.webp?v=3.010.300" type="image/webp"/>
          <img class="author-avatar" src="/authors/img/ken1_96.webp" srcset="/authors/img/ken1_96.webp 1x, /authors/img/ken1_192.webp 2x" width="96" height="96" alt="Author photo" style="border-radius: 12px;" decoding="async" loading="lazy"/>
        </picture>
      </a>
      <h4><a href="/authors/ken-baker.html">Ken Baker</a></h4>
      <p class="tiny">Founder of In the Wake; writer and editor of the logbook.</p>
      <p class="tiny">
        <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a>
      </p>
    </section>

    <section class="card">
      <h3>Recent Articles</h3>
      <div id="recent-rail"></div>
    </section>
    <!-- Nearby Ports Rail -->
    <details open class="card" style="background: #fff; border: 1px solid #e0f0f5; border-radius: 8px; margin-bottom: 1rem;">
      <summary style="cursor: pointer; padding: 0.75rem; font-weight: 600; border-left: 3px solid var(--rope, #d9b382); border-radius: 8px 8px 0 0; background: #f7fdff;">Nearby Ports</summary>
      <div style="padding: 1rem;">
        <p class="tiny" style="margin-bottom: 0.75rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Other ports in this region:
        </p>
        <div id="nearby-ports" class="rail-list" aria-live="polite"></div>
      </div>
    </details>

      <!-- Recent Articles rail -->
      <section style="grid-column: 1;" class="card" aria-labelledby="recent-rail-title">
        <h3 id="recent-rail-title">Recent Stories</h3>
        <p class="tiny" style="margin-bottom: 1rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Real cruising experiences, practical guides, and heartfelt reflections from our community. Explore stories that inform, inspire, and connect.
        </p>
        <div id="recent-rail" class="rail-list" aria-live="polite"></div>
        <p id="recent-rail-fallback" class="tiny" style="display:none">Loading articles…</p>
      </section>
    
  </aside>

    <p style="margin-top: 2rem;"><a href="/ports.html">&larr; Back to Ports Guide</a></p>

    <!-- Image Attribution Section -->
    <section class="card" style="margin-top: 2rem; background: #f7fdff;">
      <h3>Image Credits</h3>
      <p class="tiny" style="margin-bottom: 0.75rem;">The following images are used under Creative Commons licenses:</p>
      <ul class="tiny" style="line-height: 1.8; padding-left: 1.25rem;">
        <li><strong>Bergen Heart of Fjords:</strong> Photo from <a href="https://commons.wikimedia.org/wiki/File:%22Bergen,_das_Herz_der_Fjorde%22_09.jpg" target="_blank" rel="noopener">Wikimedia Commons</a>, used under <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener">CC BY-SA 3.0</a></li>
        <li><strong>Store Lungegårdsvann View:</strong> Photo from <a href="https://commons.wikimedia.org/wiki/File:00_4400_View_over_the_store_Lungeg%C3%A5rdsvann_-_Bergen_(Norway).jpg" target="_blank" rel="noopener">Wikimedia Commons</a>, used under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">CC BY-SA 4.0</a></li>
        <li><strong>Bergen Panorama:</strong> Photo from <a href="https://commons.wikimedia.org/wiki/File:2010-08-06_-_Bergen_-_Panorama_-_panoramio_(1).jpg" target="_blank" rel="noopener">Wikimedia Commons</a>, used under <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener">CC BY-SA 3.0</a></li>
        <li><strong>Bergen Waterfront:</strong> Photos from <a href="https://commons.wikimedia.org/wiki/Category:Views_of_Bergen,_Norway" target="_blank" rel="noopener">Wikimedia Commons Bergen views</a>, used under <a href="https://creativecommons.org/licenses/by/2.0/" target="_blank" rel="noopener">CC BY 2.0</a></li>
        <li><strong>Fjord Islands:</strong> Photo from <a href="https://commons.wikimedia.org/wiki/File:2010-08-06_-_Bergen_-_Panoramafahrt_-_Inseln_und_Fjorde_-_panoramio.jpg" target="_blank" rel="noopener">Wikimedia Commons</a>, used under <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener">CC BY-SA 3.0</a></li>
      </ul>
    </section>
  </main>
    <footer class="wrap" role="contentinfo">
    <p>© 2025 In the Wake · A Cruise Traveler's Logbook · All rights reserved.</p>
    <p class="tiny" style="margin-top: 0.5rem;">
      <a href="/privacy.html">Privacy</a> ·
      <a href="/terms.html">Terms</a> ·
      <a href="/about-us.html">About</a> ·
      <a href="/accessibility.html">Accessibility &amp; WCAG 2.1 AA Commitment</a>
    </p>
    <p class="tiny center" style="opacity:0;position:absolute;pointer-events:none;" aria-hidden="true">Soli Deo Gloria — Every pixel and part of this project is offered as worship to God, in gratitude for the beautiful things He has created for us to enjoy. ✝️</p>
  </footer>

  <script>
    // Load recent articles
    (async function() {
      try {
        const response = await fetch('/assets/data/articles/index.json');
        const articles = await response.json();
        const rail = document.getElementById('recent-rail');

        if (rail && articles && articles.length > 0) {
          rail.innerHTML = articles.slice(0, 5).map(article => `
            <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #e0e8f0;">
              <h4 style="margin: 0 0 0.25rem; font-size: 0.95rem;">
                <a href="${article.url}">${article.title}</a>
              </h4>
              <p style="margin: 0; font-size: 0.8rem; color: #666;">${article.date}</p>
            </div>
          `).join('');
        }
      } catch (err) {
        console.log('Could not load articles:', err);
      }
    })();
  </script>

  <script>
  (function(){
    "use strict";

    /* ===== Recent Articles Rail ===== */
    (async function recentRail(){
      const rail = document.getElementById('recent-rail');
      if(!rail) return;

      const fallback = document.getElementById('recent-rail-fallback');
      if(fallback) fallback.style.display = '';

      async function fetchJSONWithFallback(urls){
        for (const u of urls){
          try{
            const res = await fetch(u, { credentials: 'omit', cache: 'no-cache' });
            if (res.ok) return await res.json();
          }catch(err){

          }
        }
        return null;
      }

      const pick = (obj, keys, fallback=null)=>{ for(const k of keys){ if(obj && obj[k] != null) return obj[k]; } return fallback; };

      function setImageWithFallback(imgEl, primary, altPaths=[]){
        if(!imgEl) return;
        const stamp='v=3.010.300';
        const tried=new Set();
        const queue=[primary,...altPaths].filter(Boolean).map(p => p.includes('?')?p+'&'+stamp:p+'?'+stamp);
        function tryNext(){
          const next=queue.shift();
          if(!next){ imgEl.removeAttribute && imgEl.removeAttribute('onerror'); return; }
          if(tried.has(next)) return tryNext();
          tried.add(next);
          imgEl.src=next;
        }
        imgEl.onerror=tryNext;
        tryNext();
      }

      const raw = await fetchJSONWithFallback(['/assets/data/articles/index.json','/assets/data/articles.json']);
      if(!raw) {
        if(fallback) {
          fallback.textContent = 'Unable to load articles';
          fallback.style.display = '';
        }
        return;
      }

      const items = Array.isArray(raw?.articles) ? raw.articles : (Array.isArray(raw) ? raw : []);
      if(!items.length) return;

      const here = location.pathname.replace(/\/+$/,'');
      const view = items.filter(p=>{
        const href = pick(p,['url','path'],'#');
        const norm = (href||'').replace(/\/+$/,'');
        return norm && norm !== here;
      }).slice(0,6);

      rail.innerHTML = view.map(p=>{
        const title = pick(p,['title','name'],'Article');
        const href  = pick(p,['url','path'],'#');
        const excerpt = pick(p,['excerpt','description'],'');
        return `
          <article class="card" style="display:flex;flex-direction:column;gap:.75rem;padding:.85rem">
            <div style="display:grid;grid-template-columns:80px 1fr;gap:.75rem;align-items:start">
              <div style="width:80px;height:60px;overflow:hidden;border-radius:8px;background:#eef4f6;border:1px solid #dfe7ea;flex-shrink:0">
                <img class="article-thumb" alt="" decoding="async" loading="lazy" style="width:100%;height:100%;object-fit:cover">
              </div>
              <div>
                <h4 style="margin:0 0 .35rem 0;font-size:.9rem;line-height:1.3;font-weight:600">
                  <a href="\${href}" style="color:var(--accent,#0e6e8e);text-decoration:none">\${title}</a>
                </h4>
                \${excerpt ? `<p class="tiny" style="margin:0;line-height:1.4;color:var(--ink-mid,#3d5a6a)">\${excerpt}</p>` : ''}
              </div>
            </div>
            <a href="\${href}" class="pill" style="align-self:flex-start;font-size:.85rem;padding:.45rem .95rem;text-decoration:none">Read Article →</a>
          </article>`;
      }).join('');

      const cards = [...rail.querySelectorAll('article.card')];
      cards.forEach((card,i)=>{
        const p = view[i] || {};
        const el = card.querySelector('img.article-thumb');
        const href  = (pick(p,['url','path'],'')||'').toLowerCase();
        const title = (pick(p,['title','name'],'')||'').toLowerCase();

        let primary = pick(p, ['thumb','thumbnail','image','cover','img'], null);

        // FORCE override for Top-20
        if (/(top-20|first-?cruise-?questions)/.test(href) || /top\s*20.*first.*cruise.*questions/.test(title)){
          primary = '/assets/articles/thumbs/top-20-questions/cover.webp';
        }
        // Friendly specifics
        if(!primary && (/freedom-of-your-own-wake/.test(href) || /freedom of your own wake/.test(title))){
          primary = '/assets/articles/thumbs/freedom-of-your-own-wake.webp';
        }
        if(!primary && (/why-i-started-solo-cruising/.test(href) || /why i started solo cruising/.test(title))){
          primary = '/assets/articles/thumbs/why-i-started-solo-cruising.webp';
        }
        if(!primary && (/\/travel(\.html)?$/.test(href) || /\btravel\b/.test(title))){
          primary = '/assets/articles/travel/cover.jpg';
        }

        // Heuristic fallback
        if(!primary){
          const slugify = s => (s||'').toLowerCase().replace(/https?:\/\/[^/]+/,'').replace(/[#?].*$/,'').split('/').filter(Boolean).pop()||'';
          const guess = slugify(href) || slugify(title);
          if(guess) primary = `/assets/articles/\${guess}/cover.jpg`;
        }

        const alts = [];
        if(primary){
          const base = primary.replace(/\.(jpg|jpeg|png|webp)$/i,'');
          alts.push(`\${base}.jpeg`, `\${base}.JPG`, `\${base}.webp`, `\${base}.png`);
        }
        setImageWithFallback(el, primary || '/assets/index_hero.webp', alts);
      });

      if(fallback) fallback.style.display = 'none';

      // Announce to screen readers
      const status = document.getElementById('a11y-status');
      if(status) {
        status.textContent = `\${view.length} recent articles loaded`;
      }
    })();
  })();
  </script>
<!-- Navigation dropdown functionality -->
    <!-- Navigation dropdown functionality (New Clean Implementation) -->
  <script>
  (function() {
    'use strict';
    var dropdowns = document.querySelectorAll('.nav-dropdown');
    function toggleDropdown(dropdown) {
      var isOpen = dropdown.classList.contains('open');
      closeAllDropdowns();
      if (!isOpen) {
        dropdown.classList.add('open');
        var btn = dropdown.querySelector('button');
        if (btn) btn.setAttribute('aria-expanded', 'true');
      }
    }
    function closeAllDropdowns() {
      dropdowns.forEach(function(dd) {
        dd.classList.remove('open');
        var btn = dd.querySelector('button');
        if (btn) btn.setAttribute('aria-expanded', 'false');
      });
    }
    dropdowns.forEach(function(dropdown) {
      var btn = dropdown.querySelector('button');
      if (btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          toggleDropdown(dropdown);
        });
        btn.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') { closeAllDropdowns(); btn.focus(); }
          if (e.key === 'ArrowDown') {
            e.preventDefault();
            dropdown.classList.add('open');
            btn.setAttribute('aria-expanded', 'true');
            var firstLink = dropdown.querySelector('.dropdown-menu a');
            if (firstLink) firstLink.focus();
          }
        });
      }
      var menu = dropdown.querySelector('.dropdown-menu');
      if (menu) {
        menu.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') { closeAllDropdowns(); if (btn) btn.focus(); }
        });
      }
    });
    document.addEventListener('click', function(e) {
      var isInsideDropdown = false;
      dropdowns.forEach(function(dd) { if (dd.contains(e.target)) isInsideDropdown = true; });
      if (!isInsideDropdown) closeAllDropdowns();
    });
  })();
  </script>

  <!-- Nearby Ports Script -->
  <script>window.currentPortId = 'bergen';</script>
  <script src="/assets/js/nearby-ports.js"></script>
</body>
</html>
