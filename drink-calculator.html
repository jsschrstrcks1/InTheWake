<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="version" content="v=.9.001.001"/>
  <title>Royal Caribbean Drink Package Calculator 2025 | Is It Worth It?</title>
  <meta name="description" content="Free Royal Caribbean drink calculator with Crown & Anchor support, sea/port day weighting, and break-even analysis. Plan your cruise drink budget."/>
  <link rel="canonical" href="https://cruisinginthewake.com/drink-calculator.html"/>

  <!-- Favicon & Touch icons (from your icon set) -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/in_the_wake_icon_32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/in_the_wake_icon_16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/in_the_wake_icon_180x180.png">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0a3d62">

  <!-- Preconnects (FX APIs) -->
  <link rel="preconnect" href="https://api.frankfurter.app">
  <link rel="preconnect" href="https://api.exchangerate.host">

  <!-- Social -->
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Royal Caribbean Drink Package Calculator"/>
  <meta property="og:description" content="Break-even chart + sea/port day weighting. Find out if a package saves money."/>
  <meta property="og:url" content="https://cruisinginthewake.com/drink-calculator.html"/>
  <meta property="og:image" content="https://cruisinginthewake.com/assets/social/drink-calculator-2025.jpg"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="RCL Drink Package Calculator"/>
  <meta name="twitter:description" content="See your cheapest option with gratuity included and break-even math."/>

  <!-- Structured data -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[
    {"@type":"ListItem","position":1,"name":"Home","item":"https://cruisinginthewake.com/"},
    {"@type":"ListItem","position":2,"name":"Royal Caribbean Drink Package Calculator","item":"https://cruisinginthewake.com/drink-calculator.html"}]}
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"FAQPage","mainEntity":[
    {"@type":"Question","name":"Is the Royal Caribbean drink package worth it?","acceptedAnswer":{"@type":"Answer","text":"It can be worth it if you typically average ~5‚Äì6 alcoholic drinks per day. Use the calculator to compare √†-la-carte to Soda, Refreshment, and Deluxe, with gratuity included."}},
    {"@type":"Question","name":"Does the drink package include gratuity?","acceptedAnswer":{"@type":"Answer","text":"Yes. Package prices include the 18% service charge. √Ä-la-carte drinks add 18% at checkout."}},
    {"@type":"Question","name":"How do I enter sale prices from Cruise Planner?","acceptedAnswer":{"@type":"Answer","text":"Click ‚ÄúEdit price‚Ä¶‚Äù on any package to type your sale rate; results update instantly."}}]}
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"SoftwareApplication","name":"Royal Caribbean Drink Package Calculator","applicationCategory":"Utilities","operatingSystem":"Any (Web)","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}}
  </script>

  <style>
    :root{
      --sea:#0a3d62; --foam:#e6f4f8; --rope:#d9b382; --ink:#083041; --sky:#f7fdff; --accent:#0e6e8e;
      --shadow:0 2px 6px rgba(8,48,65,.08); --shadow-lg:0 10px 28px rgba(8,48,65,.14);
      --rail-width:320px; --bg:#f8fbfc; --card:#fff; --bd:#e5e7eb; --muted:#525a66;
      --chip:#e7f6ea; --chipText:#0a7b3e; --good:#10b981; --warn:#f59e0b; --bad:#ef4444
    }
    *{box-sizing:border-box}
    html{scrollbar-gutter:stable both-edges}
    body{margin:0;background:var(--sky);color:var(--ink);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    img{max-width:100%;height:auto;display:block}
    .wrap{max-width:1100px;margin:0 auto;padding:20px 14px 36px}
    .card{background:var(--card);border:2px solid var(--rope);border-radius:12px;padding:1rem;margin:.8rem 0;box-shadow:var(--shadow)}
    h1,h2,h3{color:var(--sea)} .tiny{font-size:.88rem;color:#456} .small{font-size:.9rem;color:#475569} .muted{color:var(--muted)}
    .sr-only{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}
    /* Header / hero */
    .hero-header{position:relative;z-index:0;border-bottom:6px double var(--rope);background:#eaf6f6}
    .navbar{max-width:1100px;margin:0 auto;display:flex;gap:.6rem;padding:.35rem .9rem .75rem;align-items:center;min-height:56px;background:#eaf6f6}
    .brand{display:flex;align-items:center;gap:.6rem}
    .brand img{height:56px;max-height:56px;width:auto;object-fit:contain} /* prevents ‚Äúship‚Äù logo clipping */
    .version-badge{font-size:.72rem;opacity:.8;margin-left:.35rem}
    .itw-nav{display:flex;gap:.5rem;flex:1 1 auto;align-items:center;justify-content:center;white-space:nowrap;padding-inline:.75rem}
    .itw-nav .chip{display:inline-flex;align-items:center;gap:.35rem;padding:.35rem .7rem;border-radius:10px;background:#fff;border:1px solid var(--rope);color:var(--accent);font-size:.95rem;cursor:pointer}
    .itw-nav .nav-item{position:relative}
    .itw-nav .nav-item > a.chip{color:var(--accent)} /* unify color */
    .itw-nav .chip[aria-current="page"]{outline:3px dashed var(--rope);outline-offset:2px;box-shadow:0 0 0 3px rgba(200,163,106,.15) inset}
    .itw-nav .menu{position:absolute;left:0;top:100%;transform:translateY(.35rem);min-width:240px;max-width:min(90vw,360px);background:#fff;border:1px solid var(--rope);border-radius:12px;box-shadow:var(--shadow-lg);padding:.6rem;display:none;visibility:hidden;opacity:0;pointer-events:none;z-index:100;transition:opacity .18s ease}
    .itw-nav .nav-item.open>.menu{display:block;visibility:visible;opacity:1;pointer-events:auto}
    .itw-nav .menu .label{font-weight:600;color:#234;margin:.15rem .2rem .35rem;font-size:.9rem}
    .itw-nav .menu a{display:block;padding:.45rem .6rem;border-radius:.6rem;color:var(--ink)}
    .itw-nav .menu a:hover{background:#f2f7fa;text-decoration:none}
    .hero{position:relative;width:100%;min-height:clamp(200px,24vw,340px);background:url('/assets/index_hero.jpg?v=3.010.071') center 38%/cover no-repeat;display:flex;align-items:flex-end;overflow:hidden;margin-top:.15rem}
    .hero-title{position:absolute;left:min(3vw,1rem);bottom:clamp(.6rem,2vw,1.4rem);display:flex;flex-direction:column;gap:.35rem;text-shadow:0 2px 6px rgba(0,0,0,.45)}
    .hero-title .logo{width:clamp(189px,23.1vw,378px);max-width:min(90vw,520px);filter:drop-shadow(0 3px 8px rgba(0,0,0,.45))}
    .tagline{font-weight:700;letter-spacing:.2px;color:#e6f4f8;font-size:clamp(.9rem,1.5vw,1.35rem);white-space:nowrap}
    .hero-compass{position:absolute;right:min(3vw,1rem);top:.5rem;width:86px;opacity:.95;filter:invert(39%) sepia(9%) saturate(1063%) hue-rotate(151deg) brightness(92%) contrast(89%)}
    .hero-credit{position:absolute;right:.85rem;bottom:.85rem;z-index:2}
    /* Layout */
    .page-grid{display:grid;grid-template-columns:minmax(0,1.6fr) minmax(260px,var(--rail-width));gap:2rem;align-items:start}
    @media (max-width:979.98px){.page-grid{grid-template-columns:1fr}}
    .rail-list{display:grid;gap:1rem}
    .rail-item{display:grid;grid-template-columns:64px 1fr;gap:.75rem;align-items:center}
    .rail-item .thumb{width:64px;height:64px;border-radius:10px;overflow:hidden;background:#eef4f6;border:1px solid #dfe7ea}
    .rail-item .thumb img{width:100%;height:100%;object-fit:cover}
    .author-card{display:flex;gap:.75rem;align-items:center}
    .author-avatar{display:block;width:48px;height:48px;border-radius:50%;object-fit:cover;object-position:center;flex:0 0 48px}
    /* Inputs / controls */
    .card.inputs{background:var(--card);border-color:var(--bd)}
    .card.inputs .hd{position:sticky;top:0;background:var(--card);z-index:10;border-color:var(--bd)}
    .row{display:grid;grid-template-columns:1fr 140px;align-items:center;padding:10px 0;border-bottom:1px dashed var(--bd);gap:10px}
    .row:last-child{border-bottom:0}
    .inputs .row{align-items:start}.inputs .row>:not(:first-child){justify-self:end}
    .inputs input[type="text"]{width:110px;padding:6px 8px;border:1px solid var(--bd);border-radius:8px;min-height:44px;font-size:16px;background:#fff}
    .inputs select{padding:6px 8px;border:1px solid var(--bd);border-radius:8px;background:var(--card);color:var(--ink)}
    .controls-inline{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .badge{background:#fbbf24;color:#78350f;padding:4px 10px;border-radius:999px;font-weight:800}
    .btn{cursor:pointer;padding:8px 12px;border:1px solid var(--bd);border-radius:8px;background:#0f172a;color:#fff;font-weight:700;min-height:44px;font-size:1rem}
    .btn.ghost{background:#fff;color:#0f172a}
    /* Chart */
    #breakeven-wrap{margin-top:18px;position:relative;line-height:0;overflow:hidden}
    #breakeven-chart{width:100%!important;max-width:100%;height:280px;border:1px dashed var(--bd);border-radius:10px;background:#fff;display:block}
    #voucher-badge{position:absolute;top:-8px;right:0;transform:translateY(-100%)}
    /* Vouchers accordion */
    #cna-vouchers{border:2px solid var(--rope);border-radius:8px;padding:0;margin-top:12px;background:var(--foam)}
    #cna-vouchers summary{padding:1rem 1.25rem;cursor:pointer;list-style:none;border-radius:6px;font-weight:600;color:var(--sea)}
    #cna-vouchers summary::-webkit-details-marker{display:none}
    #cna-vouchers summary::after{content:'‚ñº';float:right;transition:transform .3s ease}
    #cna-vouchers[open] summary::after{transform:rotate(180deg)}
    #cna-vouchers summary:hover{background:#d0e7ed}
    .cna-content{padding:0 1.25rem 1.25rem}
    /* Packages grid (when in main) ‚Äì still used for card styles */
    .packages{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-top:18px}
    @media (max-width:979.98px){.row{grid-template-columns:1fr 110px}}
    /* Dark mode */
    @media (prefers-color-scheme: dark){
      :root{--bg:#121721;--card:#1d2430;--bd:#3a4453;--muted:#b7c0cc;--ink:#e2e8f0}
      body{color:#e2e8f0;background:var(--ink)}
      a{color:#60a5fa}
      .card{box-shadow:0 1px 4px rgba(0,0,0,.2);background:var(--card);border-color:var(--bd)}
      .card.inputs .hd{background:var(--card)}
      .itw-nav .menu{background:#1f2733}
    }
    /* Print */
    @media print{
      body{font-size:12pt;background:var(--card)}
      header.hero-header,.qs,.banner,.rail,.card:not(.inputs),.controls-inline .btn,footer{display:none}
      main.wrap{max-width:100%;margin:0;padding:0}
      .page-grid,.packages{grid-template-columns:1fr}
      .card{border:none;box-shadow:none;page-break-inside:avoid}
    }
  </style>

  <!-- Vendor + App -->
  <script src="/assets/js/vendor/chart.umd.min.js?v=v.9.000.005" defer></script>
  <link rel="modulepreload" href="/assets/js/drink-math.js?v=.9.001.001">
  <link rel="preload" href="/assets/js/drink-worker.js?v=v.9.000.005" as="worker"/>
  <script type="module">
    import { compute as baseCompute, computeWithVouchers } from "/assets/js/drink-math.js?v=.9.001.001";
    window.ITW_MATH = { compute: baseCompute, computeWithVouchers };
  </script>
  <script src="/assets/js/drink-calculator.app.js?v=v.9.000.004" defer></script>
</head>
<body>
  <a href="#content" class="sr-only">Skip to main content</a>

  <header class="hero-header" role="banner" style="padding-top:.15rem">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake.png" width="256" height="64" alt="In the Wake wordmark">
        <span class="tiny version-badge" id="app-version-header">v=.9.001.001</span>
      </div>
      <nav class="itw-nav" aria-label="Primary">
        <div class="nav-item">
          <a class="chip" href="/">Home</a>
        </div>
        <div class="nav-item" aria-haspopup="menu">
          <button class="chip" type="button" aria-expanded="false" aria-haspopup="menu" aria-controls="menu-planning">Planning ‚ñæ</button>
          <div id="menu-planning" class="menu" aria-label="Planning">
            <div class="label">Plan your cruise</div>
            <a href="/planning.html">Planning (overview)</a>
            <a href="/ships.html">Ships</a>
            <a href="/restaurants.html">Restaurants &amp; Menus</a>
            <a href="/ports.html">Ports</a>
            <a href="/drink-calculator.html" aria-current="page">Drink Packages</a>
            <a href="/packing-lists.html">Packing Lists</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>
        <div class="nav-item" aria-haspopup="menu">
          <button class="chip" type="button" aria-expanded="false" aria-haspopup="menu" aria-controls="menu-travel">Travel ‚ñæ</button>
          <div id="menu-travel" class="menu" aria-label="Travel">
            <div class="label">On the way</div>
            <a href="/travel.html">Travel (overview)</a>
            <a href="/solo.html">Solo</a>
          </div>
        </div>
        <div class="nav-item">
          <a class="chip" href="/about-us.html">About</a>
        </div>
      </nav>
    </div>
    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake.png" alt="In the Wake">
        <div class="tagline">A Cruise Traveler‚Äôs Logbook</div>
      </div>
      <!-- compass rose with fallback -->
      <img class="hero-compass" src="/assets/compass_rose.svg" onerror="this.onerror=null;this.src='/assets/compass_rose.png';" alt="Compass rose">
      <div class="hero-credit tiny" style="display:block;opacity:0.85;">Photo ¬© Flickers of Majesty</div>
    </div>
  </header>

  <main class="wrap page-grid" id="content">
    <!-- MAIN COLUMN -->
    <section aria-label="Calculator">
      <p id="fallback-banner" class="health" role="status" hidden>‚ö†Ô∏è We couldn't load live prices; using defaults.</p>
      <p id="stale-data-banner" class="health" role="status" style="display:none; background:#fef3c7; border-color:#fde68a; color:#92400e;"></p>

      <!-- Quick Start -->
      <section class="qs" aria-labelledby="qs-title">
        <h2 id="qs-title" class="qs-hd">üöÄ Quick Start: Load a Preset</h2>
        <p class="small" style="margin-bottom:1rem;">Tap a preset to preview. ‚ÄúLoad as Average‚Äù fills Simple mode; ‚ÄúLoad Itinerary‚Äù fills Day-by-Day.</p>
        <div class="qs-grid" id="qs-preset-buttons" role="list"></div>
        <div id="qs-details-host" style="margin-top:12px;"></div>
      </section>

      <!-- Best value banner -->
      <div class="banner" role="status" aria-live="polite">
        <span id="best-chip" class="chip">Best value: √†-la-carte</span>
        <span id="best-text">Your daily picks are cheapest without a package.</span>
        <button id="jump-winner" class="btn ghost" type="button">Jump to Best Value</button>
      </div>

      <p id="health-note" class="health" role="status" aria-live="assertive"></p>

      <!-- Inputs -->
      <section class="card inputs" aria-labelledby="calc-title">
        <h2 id="calc-title" class="hd">
          <span id="totals">Calculating...</span>
          <small class="small">‚Äì includes 18% gratuity</small>
          <div id="range-note" class="small" style="margin-top:6px;font-weight:700;"></div>
        </h2>

        <div class="bd">
          <!-- Currency & FX -->
          <div class="controls-inline" style="margin-top:8px;align-items:center;flex-wrap:wrap;">
            <label class="small" for="currency-select" style="font-weight:800;">Display currency</label>
            <select id="currency-select" aria-label="Display currency" class="small" style="font-weight:700;padding:4px 6px;border-radius:8px;border:1px solid var(--bd);">
              <option value="USD">USD $</option>
              <option value="GBP">GBP ¬£</option>
              <option value="EUR">EUR ‚Ç¨</option>
              <option value="CAD">CAD $</option>
              <option value="AUD">AUD $</option>
            </select>
            <span id="offline-chip" class="chip" style="display:none;background:#fde68a;color:#7c2d12;border:1px solid #f59e0b;padding:2px 6px;font-size:.8rem;">Offline rates</span>
          </div>
          <span id="currency-note" class="small" style="font-weight:600;display:block;margin-top:6px;"></span>

          <hr style="border:0;border-top:1px dashed var(--bd);margin:12px 0;">

          <!-- Days -->
          <div class="row">
            <label for="input-days">Cruise days</label>
            <input id="input-days" type="text" inputmode="numeric" value="7" data-input="days" aria-label="Cruise length in days">
          </div>

          <!-- Sea/Port weighting -->
          <fieldset id="sea-port-fieldset" style="border:1px solid var(--bd);padding:12px;border-radius:10px;margin-top:8px">
            <legend style="font-weight:800;padding:0 6px">Sea/Port variability</legend>
            <div class="row">
              <label for="input-seadays">Number of sea days</label>
              <input id="input-seadays" type="text" inputmode="numeric" value="3" data-input="seadays" aria-label="Number of sea days">
            </div>
            <div class="row" style="grid-template-columns:1fr 1fr">
              <label>
                <input type="checkbox" id="sea-toggle" checked data-input="seaapply"> Apply weighting
              </label>
              <div class="controls-inline">
                <label for="sea-weight" class="small">Weight ¬±%</label>
                <input id="sea-weight" type="range" min="0" max="40" value="20" data-input="seaweight" aria-label="Sea day weighting percent">
                <span id="sea-weight-val" class="small">20%</span>
              </div>
            </div>
          </fieldset>

          <!-- Group -->
          <fieldset style="border:1px solid var(--bd);padding:12px;border-radius:10px;margin-top:12px">
            <legend style="font-weight:800;padding:0 6px">Group in stateroom</legend>
            <div class="row">
              <label for="input-adults">Adults (21+)</label>
              <input id="input-adults" type="text" inputmode="numeric" value="1" data-input="adults" aria-label="Number of adults">
            </div>
            <div class="row">
              <label for="input-minors">Minors (under 21)</label>
              <input id="input-minors" type="text" inputmode="numeric" value="0" data-input="minors" aria-label="Number of minors">
            </div>
          </fieldset>

          <!-- Vouchers -->
          <details id="cna-vouchers" class="small">
            <summary id="cna-title">
              üéñÔ∏è <strong>Diamond or higher?</strong> Click here to apply your daily free-drink vouchers
              <div class="tiny muted" style="font-weight:400;margin-top:4px;">For frequent Royal Caribbean cruisers only (Crown & Anchor). Minors‚Äô vouchers apply to non-alcoholic drinks only.</div>
            </summary>
            <div class="cna-content">
              <div class="small" style="margin:10px 0;background:#fff3cd;border-left:4px solid #f59e0b;padding:.75rem 1rem;border-radius:4px;">
                <p><strong>Eligibility reference:</strong> Diamond ‚âà <strong>80 nights</strong>, Diamond Plus ‚âà <strong>175 points</strong>, Pinnacle Club ‚âà <strong>700 nights</strong>.</p>
                <p>Per person per day ¬∑ Diamond 4 ¬∑ Diamond Plus 5 ¬∑ Pinnacle 5. Minors‚Äô vouchers apply to non-alcoholic drinks only.</p>
              </div>

              <fieldset style="border:1px solid var(--bd);padding:12px;border-radius:10px;">
                <legend style="font-weight:800;padding:0 6px">Adult Vouchers</legend>
                <div class="row"><label for="v-adult-d">Adults with Diamond (4)</label><input id="v-adult-d" type="text" inputmode="numeric" value="0"></div>
                <div class="row"><label for="v-adult-dp">Adults with Diamond+ (5)</label><input id="v-adult-dp" type="text" inputmode="numeric" value="0"></div>
                <div class="row"><label for="v-adult-p">Adults with Pinnacle (5)</label><input id="v-adult-p" type="text" inputmode="numeric" value="0"></div>
              </fieldset>

              <fieldset style="border:1px solid var(--bd);padding:12px;border-radius:10px;margin-top:12px;">
                <legend style="font-weight:800;padding:0 6px">Minor Vouchers (Non-Alc Only)</legend>
                <div class="row"><label for="v-minor-d">Minors with Diamond (4)</label><input id="v-minor-d" type="text" inputmode="numeric" value="0"></div>
                <div class="row"><label for="v-minor-dp">Minors with Diamond+ (5)</label><input id="v-minor-dp" type="text" inputmode="numeric" value="0"></div>
                <div class="row"><label for="v-minor-p">Minors with Pinnacle (5)</label><input id="v-minor-p" type="text" inputmode="numeric" value="0"></div>
              </fieldset>
            </div>
          </details>

          <div id="cna-nudge" class="health" style="display:none;background:#e0f2fe;border-color:#0ea5e9;color:#0c4a6e;cursor:pointer;">
            üéñÔ∏è Are you a Diamond member? Don‚Äôt forget to <strong>click here to apply</strong> your free daily drinks!
          </div>

          <!-- Mode -->
          <fieldset style="border:1px solid var(--bd);padding:12px;border-radius:10px;margin-top:12px">
            <legend style="font-weight:800;padding:0 6px">Calculation Mode</legend>
            <div class="controls-inline">
              <label class="small"><input type="radio" name="calc-mode" id="mode-simple" value="simple" checked> Use Daily Averages</label>
              <label class="small"><input type="radio" name="calc-mode" id="mode-itinerary" value="itinerary"> Plan Day-by-Day</label>
            </div>
          </fieldset>

          <!-- Simple steppers (rendered by app.js) -->
          <div id="simple-inputs"></div>

          <!-- Itinerary host -->
          <div id="itinerary-inputs" style="display:none;margin-top:12px;"></div>

          <!-- Chart -->
          <div id="breakeven-wrap">
            <span id="voucher-badge" class="chip mini" aria-live="polite" hidden></span>
            <table id="chart-desc" class="sr-only">
              <caption>Daily cost comparison</caption>
              <thead><tr><th>Package</th><th>Cost per day</th></tr></thead>
              <tbody>
                <tr><td>√Ä-la-carte</td><td id="sr-alc">$0.00</td></tr>
                <tr><td>Soda</td><td id="sr-soda">$0.00</td></tr>
                <tr><td>Refreshment</td><td id="sr-refresh">$0.00</td></tr>
                <tr><td>Deluxe</td><td id="sr-deluxe">$0.00</td></tr>
              </tbody>
            </table>
            <canvas id="breakeven-chart" width="900" height="280" aria-label="Break-even comparison chart" aria-describedby="chart-desc"></canvas>
          </div>

          <div class="controls-inline" style="margin-top:12px">
            <button class="btn" type="button" onclick="printResults()">Print / Save Results</button>
            <button class="btn ghost" type="button" onclick="shareScenario()">Share Scenario</button>
            <button class="btn" type="button" onclick="resetInputs()" style="background:var(--bad)">Reset All</button>
          </div>
        </div>
      </section>

      <!-- Group breakdown -->
      <section class="card" id="group-breakdown" hidden>
        <div class="hd" style="position:static">Group Breakdown (Per Person)</div>
        <div class="bd" style="padding:0;overflow-x:auto;">
          <table style="width:100%;border-collapse:collapse;min-width:500px;">
            <thead style="text-align:left;border-bottom:2px solid var(--rope);">
              <tr>
                <th style="padding:8px">Traveler</th>
                <th style="padding:8px">Assigned Package</th>
                <th style="padding:8px">Daily Cost</th>
                <th style="padding:8px">Trip Total</th>
              </tr>
            </thead>
            <tbody id="group-table-body"></tbody>
          </table>
        </div>
      </section>

      <!-- Stewardship & pricing ‚Äî restored robust copy -->
      <section class="card small" role="note" aria-label="Disclaimers" style="background:var(--foam);border-color:var(--rope)">
        <p>
          <strong>Stewardship &amp; Responsible Use.</strong>
          This calculator exists to help you plan wisely ‚Äî not to encourage excess. Beverage packages include far more than alcohol (water, coffee, juice, smoothies, premium tea).
          <em>Moderation respects your wallet, the crew, your fellow guests, and your health.</em>
        </p>
        <p class="tiny" style="margin-top:1rem;">
          <strong>Pricing &amp; Policy Disclaimer.</strong>
          Numbers shown are estimates synthesized from public sales, community reports, and recent itineraries. Actual pricing, caps, taxes, and gratuities vary by
          ship, sailing, and region, and may change without notice. Featured drink availability can differ by venue. Nothing here is financial, legal, or medical advice.
          <strong>Purchase packages only in Royal Caribbean‚Äôs Cruise Planner</strong> (My Account ‚Üí Plan My Cruise ‚Üí Beverages). Always verify in Cruise Planner before buying.
          If you choose √†-la-carte, remember that an 18% service charge is added to each drink purchase onboard.
        </p>
      </section>
    </section>

    <!-- RIGHT RAIL -->
    <aside class="rail" aria-label="Author & articles">
      <!-- Author -->
      <section id="author-rail" class="card" aria-label="Author information">
        <div class="author-card">
          <picture>
            <source type="image/webp" srcset="/assets/authors/ken.webp">
            <img class="author-avatar" src="/assets/authors/ken.jpg" width="48" height="48" alt="Author ‚Äî Ken Baker" onerror="this.onerror=null;this.src='/assets/logo_wake.png';">
          </picture>
          <div>
            <strong style="color:var(--ink);"><a href="/authors/ken-baker.html">Ken Baker</a></strong><br/>
            <span class="tiny">Founder of In the Wake; calculator builder and data steward.</span>
          </div>
        </div>
        <div class="pass-cta">
          <strong>Get your free Cruise Planning Pass:</strong>
          <ul class="pass-links">
            <li><a href="https://flickersofmajesty.com" target="_blank" rel="noopener">Cruise Photo Tips &amp; Galleries</a></li>
            <li><a href="https://ken-baker.com" target="_blank" rel="noopener">Planning Checklists &amp; Resources</a></li>
          </ul>
        </div>
      </section>

      <!-- EMAIL SIGNUP -->
      <section class="card" aria-labelledby="email-title" style="background:var(--foam);border-color:var(--rope)">
        <h3 id="email-title" style="margin-top:0;">Get Our Free Cruise Checklist!</h3>
        <p class="small" style="line-height:1.3;">Join our list for exclusive tips and get your downloadable PDF instantly.</p>
        <form id="email-form" action="[YOUR_ESP_URL_HERE]" method="POST" style="margin-top:10px;">
          <label for="honeypot" class="sr-only">Leave blank</label>
          <input type="text" id="honeypot" name="b_email" tabindex="-1" value="" style="position:absolute;left:-9999px;" aria-hidden="true">
          <div class="form-group" style="display:flex;gap:6px;">
            <label for="email" class="sr-only">Email</label>
            <input type="email" id="email" name="EMAIL" placeholder="your@email.com" required style="flex:1;min-width:0;padding:8px;border-radius:8px;border:1px solid var(--bd);font-size:16px;">
            <button type="submit" id="signup-button" class="btn" style="min-height:44px;">Get List</button>
          </div>
          <label class="gdpr-consent" style="display:flex;align-items:flex-start;gap:.5rem;font-size:.9rem;line-height:1.5;margin-top:.75rem;">
            <input type="checkbox" name="OPT_IN" value="1" required>
            <span>I agree to receive emails from In the Wake. <a href="/privacy.html" target="_blank">Privacy Policy</a> | <a href="/gdpr-rights.html" target="_blank">Your Rights</a></span>
          </label>
          <label class="gdpr-consent" style="display:flex;align-items:flex-start;gap:.5rem;font-size:.9rem;line-height:1.5;margin-top:.75rem;--sea:#0a3d62;">
            <input type="checkbox" name="PLANNING_PASS_OPT_IN" value="1">
            <span style="color:var(--sea);"><strong>Bonus:</strong> Get the free <strong>Cruise Planning Pass</strong> ‚Äî photo tips from <i>Flickers of Majesty</i> &amp; resources from <i>Ken-Baker.com</i>.</span>
          </label>
          <input type="hidden" name="SAVINGS" id="email-savings">
          <input type="hidden" name="RECOMMENDATION" id="email-rec">
          <input type="hidden" name="CRUISE_DAYS" id="email-days">
          <input type="hidden" name="CALC_URL" id="email-url">
          <input type="hidden" name="tags[]" value="calculator-user">
          <div id="signup-message" role="status" class="small" style="margin-top:6px;font-weight:700;"></div>
        </form>
      </section>

      <!-- PACKAGES (moved into rail, above Recent Articles) -->
      <section class="card" id="packages-card">
        <div class="hd" style="position:static;">Packages</div>
        <div class="bd">
          <section class="packages" id="packages"></section>
        </div>
      </section>

      <!-- RECENT ARTICLES -->
      <section class="card" aria-labelledby="recent-rail-title">
        <h2 id="recent-rail-title" class="tiny" style="margin:.25rem 0 .5rem;color:#0a3d62">Recent Articles</h2>
        <div id="recent-rail" class="rail-list" aria-live="polite">
          <p class="tiny muted">Loading articles...</p>
        </div>
      </section>

      <!-- FAQ quick -->
      <section class="card">
        <div class="hd" style="position:static;">FAQ (quick)</div>
        <div class="bd small">
          <p><strong>Why must all adults buy the same package?</strong><br>Royal Caribbean requires all adults in a stateroom to purchase the same beverage package to prevent sharing.</p>
          <p><strong>Can I buy onboard?</strong><br>Yes, but pre-cruise prices in Cruise Planner are almost always cheaper. This calculator uses pre-cruise estimates.</p>
        </div>
      </section>
    </aside>
  </main>

  <footer class="wrap" role="contentinfo" style="border-top:2px solid var(--bd);padding-top:1.5rem;margin-top:1rem;text-align:center;">
    <p>¬© <span id="footer-year">2025</span> In the Wake ‚Äî A Cruise Traveler‚Äôs Logbook. <strong>All rights reserved.</strong><br>
      Reproduction, scraping, or derivative reuse of this calculator, math, or design without explicit written permission is prohibited.
    </p>
    <p class="tiny" style="margin-top:1rem;">
      <a href="/terms.html">Terms of Service</a> | <a href="/privacy.html">Privacy Policy</a> | <a href="/gdpr-rights.html">GDPR Rights</a>
    </p>
  </footer>

  <!-- Nav interaction, footer year, email telemetry (unchanged, but colors fixed via CSS above) -->
  <script>
  (function(){
    const root=document.querySelector('.itw-nav'); if(!root) return;
    const items=[...root.querySelectorAll('.nav-item[aria-haspopup]')];
    function setOpen(group,on){group.classList.toggle('open',!!on);const btn=group.querySelector('button[aria-controls]');if(btn)btn.setAttribute('aria-expanded',on?'true':'false');}
    function closeAll(except=null){items.forEach(g=>{if(g!==except) setOpen(g,false);});}
    function firstFocusable(el){return el && el.querySelector('a,button,[tabindex]:not([tabindex="-1"])');}
    items.forEach(group=>{
      const btn=group.querySelector('button[aria-controls]'); const menu=group.querySelector('.menu'); if(!btn||!menu) return;
      btn.addEventListener('click',e=>{e.preventDefault();e.stopPropagation();const open=group.classList.contains('open');closeAll(group);setOpen(group,!open);if(!open){(firstFocusable(menu)||btn).focus({preventScroll:true});}});
      btn.addEventListener('keydown',e=>{
        if(e.key==='ArrowDown'||e.key==='ArrowUp'){e.preventDefault();setOpen(group,true);(firstFocusable(menu)||btn).focus({preventScroll:true});}
        else if(e.key==='Escape'){setOpen(group,false);btn.focus({preventScroll:true});}
      });
      group.addEventListener('keydown',e=>{if(e.key==='Escape'){setOpen(group,false);btn.focus({preventScroll:true});}});
      menu.addEventListener('focusout',()=>{setTimeout(()=>{if(!group.contains(document.activeElement)) setOpen(group,false);},0);});
    });
    document.addEventListener('click',e=>{if(!e.target.closest('.itw-nav')) closeAll();});
    window.addEventListener('blur',()=>closeAll());
  })();
  // Footer year
  const year=document.getElementById('footer-year'); if(year) year.textContent=new Date().getFullYear();

  // Email telemetry + planning-pass tag
  (function(){
    function itwPopulateEmailTelemetry(){
      try{
        const byId=id=>document.getElementById(id);
        const form=byId('email-form')||byId('email-signup-form'); if(!form) return;
        const rec=(window.ITW&&ITW.best&&ITW.best.name)||(window.ITW_BEST&&ITW_BEST.name)||'';
        const savings=(window.ITW&&ITW.best&&typeof ITW.best.delta==='number')?ITW.best.delta:(window.ITW_BEST&&ITW_BEST.delta)||'';
        const days=(window.ITW&&ITW.inputs&&ITW.inputs.days)||(document.querySelector('[data-input="days"]')?.value)||'';
        byId('email-rec')&&(byId('email-rec').value=String(rec));
        byId('email-savings')&&(byId('email-savings').value=String(savings));
        byId('email-days')&&(byId('email-days').value=String(days));
        byId('email-url')&&(byId('email-url').value=location.href);
        const passCheckbox=form.querySelector('input[name="PLANNING_PASS_OPT_IN"]');
        const existingTag=form.querySelector('input[name="tags[]"][value="planning-pass"]');
        if(existingTag) existingTag.remove();
        if(passCheckbox&&passCheckbox.checked){
          const el=document.createElement('input'); el.type='hidden'; el.name='tags[]'; el.value='planning-pass'; form.appendChild(el);
          if(window.dataLayer) window.dataLayer.push({event:'planning_pass_opt_in'});
        }
      }catch(e){console.error('Email telemetry failed:',e);}
    }
    const form=document.getElementById('email-form')||document.getElementById('email-signup-form');
    if(form){form.addEventListener('submit',function(){itwPopulateEmailTelemetry();},{capture:true});}
    window.itwPopulateEmailTelemetry=itwPopulateEmailTelemetry;
  })();
  </script>

  <!-- Ensure math methods are exported (safety net if earlier module tag failed) -->
  <script type="module">
    import { compute as baseCompute, computeWithVouchers } from "/assets/js/drink-math.js?v=.9.001.001";
    window.ITW_MATH = { compute: baseCompute, computeWithVouchers };
  </script>
</body>
</html>
