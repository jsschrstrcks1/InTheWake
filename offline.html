<!doctype html>
<html lang="en" class="no-js">
<head>
<!-- ai-breadcrumbs
     entity: You’re offline
     type: Information Page
     parent: /
     category: General Information
     updated: 2025-11-15
     expertise: Cruise travel, planning, research
     target-audience: Cruise travelers, vacation planners, research-oriented cruisers
     answer-first: We can’t reachIn the Wakeright now. Some pages are available offline—try again when you’re back online.
     -->
  <meta charset="utf-8" />
  <title>Offline • In the Wake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="ai-summary" content="Offline • In the Wake">
  <meta name="last-reviewed" content="2025-11-19">
  <meta name="content-protocol" content="ICP-Lite v1.0">
  <meta name="color-scheme" content="light dark" />
    <link rel="stylesheet" href="/assets/styles.css?v=3.010.300"/>
  <style>
  /* Header / Hero */
  .hero-header {
    position: relative;
    border-bottom: 6px double var(--rope);
    background: #eaf6f6;
    z-index: 9000;
  }

  .navbar {
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    align-items: flex-end;
    gap: .6rem;
    padding: .5rem .9rem .35rem;
    position: relative;
    z-index: 2000;
    overflow: visible;
  }

  .brand {
    display: flex;
    align-items: flex-end;
    gap: .6rem;
  }

  .brand img {
    height: 28px;
    width: auto;
  }

  .version-badge {
    font-size: .72rem;
    opacity: .8;
    color: var(--text-muted);
  }


    :root{
      --bg: #f7fafc;
      --card: #ffffff;
      --text: #0b1f2a;
      --muted: #5b6b75;
      --brand: #0e6e8e;
      --brand-2: #0a3d62;
      --ok: #1b8c5a;
      --warn: #a85612;
      --shadow: 0 6px 24px rgba(0,0,0,.08);
      --radius: 16px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #0b1216;
        --card: #0f171c;
        --text: #e7eef2;
        --muted: #9fb0bb;
        --brand: #56b6d5;
        --brand-2: #6fc3dc;
        --shadow: 0 10px 30px rgba(0,0,0,.4);
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font: 16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% -10%, rgba(14,110,142,.05), transparent 60%),
                  radial-gradient(1000px 500px at 110% 10%, rgba(10,61,98,.05), transparent 60%),
                  var(--bg);
      color:var(--text);
      display:grid;
      place-items:center;
      padding:2rem 1rem;
    }
    .wrap{
      width:min(720px, 100%);
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:clamp(1rem, 2vw + 1rem, 2rem);
      border: 1px solid color-mix(in oklab, var(--brand) 12%, transparent);
    }
    header{
      display:flex; gap:1rem; align-items:flex-start; margin-bottom:1rem;
    }
    .logo{
      width:52px; height:52px; border-radius: 12px;
      display:grid; place-items:center;
      background: radial-gradient(100% 100% at 50% 35%, var(--brand-2), var(--brand));
      color:#fff; box-shadow: var(--shadow);
    }
    .logo svg{ width:28px; height:28px; opacity:.95; }
    h1{ font-size:clamp(1.25rem, 1rem + 1.2vw, 1.75rem); margin:.15rem 0 .35rem; letter-spacing:.2px }
    .muted{ color:var(--muted) }
    p{ margin:.5rem 0 0 }
    .card{
      background: color-mix(in oklab, var(--card) 92%, var(--bg));
      border:1px dashed color-mix(in oklab, var(--brand) 20%, transparent);
      border-radius:12px;
      padding: .9rem 1rem;
      margin:.75rem 0 0;
    }
    .btns{ display:flex; flex-wrap:wrap; gap:.6rem; margin-top:1rem }
    .btn{
      appearance:none; border:0; cursor:pointer;
      border-radius:999px; padding:.6rem 1rem; font-weight:600;
      background:var(--brand); color:#fff; box-shadow: var(--shadow);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:active{ transform: translateY(1px) }
    .btn.secondary{ background:transparent; color:var(--brand); border:1px solid color-mix(in oklab, var(--brand) 65%, transparent) }
    .tiny{ font-size:.9rem }
    ul{ margin:.5rem 0 0 1.25rem }
    code{
      background: color-mix(in oklab, var(--brand) 6%, transparent);
      padding:.1rem .35rem; border-radius:6px; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    }
    footer{
      margin-top:1.25rem; display:flex; justify-content:space-between; gap:1rem; align-items:center;
      color:var(--muted); font-size:.9rem
    }
  
  /* Dropdown Navigation (FIXED: 300ms Hover Delay) */
  .nav {
    flex: 1 1 auto;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: .5rem;
    white-space: nowrap;
    flex-wrap: nowrap;
    overflow: visible;
    padding-inline: .75rem;
  }

  .nav-item {
    position: relative;
    display: inline-block;
  }

  .nav-item > a,
  .nav-item > button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: .35rem;
    padding: .65rem 1rem;
    min-height: 44px;
    border-radius: 20px;
    background: #fff;
    border: 2px solid var(--rope);
    color: var(--accent);
    font: inherit;
    font-size: .95rem;
    line-height: 1.2;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .nav-item > a:hover,
  .nav-item > button:hover {
    background: var(--foam);
    border-color: var(--accent);
    transform: translateY(-1px);
  }

  .nav-item > a[aria-current="page"] {
    background: var(--accent);
    color: #fff;
    font-weight: 600;
    border-color: var(--accent);
  }

  .nav-disclosure .caret {
    display: inline-block;
    margin-left: .25rem;
    transition: transform 0.2s ease;
  }

  .nav-item[data-open="true"] .nav-disclosure .caret {
    transform: rotate(180deg);
  }

  /* Dropdown menu with safe zone */
  .submenu {
    position: absolute !important;
    left: 0;
    top: calc(100% + 4px);
    min-width: 240px;
    background: #fff;
    border: 2px solid var(--rope);
    border-radius: 12px;
    padding: .6rem;
    box-shadow: 0 8px 24px rgba(8,48,65,.15);
    display: none;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    z-index: 2100;
  }

  /* Safe zone bridge */
  .submenu::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 0;
    right: 0;
    height: 8px;
    background: transparent;
  }

  .nav-item[data-open="true"] > .submenu {
    display: block;
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  .submenu a {
    display: block;
    width: 100%;
    margin: 0;
    padding: .6rem .75rem;
    border-radius: .65rem;
    border: 0;
    background: transparent;
    color: var(--ink);
    text-decoration: none;
    transition: background 0.15s ease;
  }

  .submenu a:hover,
  .submenu a:focus {
    background: #f2f7fa;
    outline: 2px solid transparent;
  }

  @media (max-width: 768px) {
    .nav {
      justify-content: flex-start;
      overflow-x: auto;
      scrollbar-width: thin;
      -webkit-overflow-scrolling: touch;
    }

    .nav-item > a,
    .nav-item > button {
      flex: 0 0 auto;
    }

    .submenu {
      left: 0;
      right: 0;
      min-width: 100%;
    }
  }
  </style>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Ken Baker",
  "url": "https://inthewake.com/about/ken-baker.html",
  "jobTitle": "Cruise Research Analyst & Data Specialist",
  "description": "Cruise industry analyst specializing in ship comparisons, deck plan analysis, and dining venue research.",
  "knowsAbout": [
    "Cruise Ship Analysis",
    "Deck Plans",
    "Royal Caribbean",
    "Cruise Dining",
    "Ship Comparisons"
  ]
}
</script>

  
  <!-- JSON-LD: WebPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Offline \u2022 In the Wake",
  "url": "https://www.cruisinginthewake.com/offline.html",
  "description": "Information about Offline \u2022 In the Wake"
}
  </script><style>
    /* Navigation */
    .nav {
      flex: 1 1 auto;
      min-width: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      white-space: nowrap;
      flex-wrap: nowrap;
      overflow: visible;
      padding-inline: .75rem;
    }

    .nav-item {
      position: relative;
      display: inline-block;
    }

    .nav-item > a,
    .nav-item > button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: .35rem;
      padding: .65rem 1rem;
      min-height: 44px;
      border-radius: 20px;
      background: #fff;
      border: 2px solid var(--rope);
      color: var(--accent);
      font: inherit;
      font-size: .95rem;
      line-height: 1.2;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s ease;
    }

    .nav-item > a:hover,
    .nav-item > button:hover {
      background: var(--foam);
      border-color: var(--accent);
      transform: translateY(-1px);
    }

    .nav-item > a[aria-current="page"] {
      background: var(--accent);
      color: #fff;
      font-weight: 600;
      border-color: var(--accent);
    }

    /* Dropdown Navigation Styles */
    .nav-disclosure .caret {
      display: inline-block;
      margin-left: .25rem;
      transition: transform 0.2s ease;
    }

    .nav-item[data-open="true"] .nav-disclosure .caret {
      transform: rotate(180deg);
    }

    .submenu {
      position: absolute !important;
      left: 0;
      top: calc(100% + 4px);
      min-width: 240px;
      background: #fff;
      border: 2px solid var(--rope);
      border-radius: 12px;
      padding: .6rem;
      box-shadow: 0 8px 24px rgba(8,48,65,.15);
      display: none;
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: opacity 0.2s ease, visibility 0.2s ease;
      z-index: 2100;
    }

    .submenu::before {
      content: '';
      position: absolute;
      top: -8px;
      left: 0;
      right: 0;
      height: 8px;
      background: transparent;
    }

    .nav-item[data-open="true"] .submenu,
    .nav-group.open .submenu {
      display: block;
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }

    .submenu a {
      display: block;
      padding: .5rem .75rem;
      color: var(--text);
      text-decoration: none;
      border-radius: 8px;
      transition: background 0.15s ease;
    }

    .submenu a:hover,
    .submenu a:focus {
      background: #eef4f6;
      outline: none;
    }

    .submenu a[aria-current="page"] {
      background: #e6f4f8;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      .submenu {
        position: static !important;
        min-width: 0;
        margin-top: .5rem;
        box-shadow: none;
        border: 1px solid var(--rope);
      }

      .submenu::before {
        display: none;
      }
    }

    .navbar {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      gap: .6rem;
      padding: .5rem .9rem .35rem;
      align-items: flex-end;
      position: relative;
      z-index: 5;
    }

    .brand {
      display: flex;
      align-items: flex-end;
      gap: .6rem;
    }

    .brand img {
      height: 28px;
      width: auto;
      display: block;
    }

    .version-badge {
      font-size: .72rem;
      opacity: .8;
      margin-left: .35rem;
    }
  </style>


  <!-- JSON-LD: FAQPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What information does this page provide?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This page provides planning resources and information about offline."
      }
    },
    {
      "@type": "Question",
      "name": "Is this information official?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This page provides community insights. Always confirm with your cruise line before making decisions."
      }
    }
  ]
}
  </script>

  <!-- LCP Optimization: Preload critical hero images -->
  <link rel="preload" as="image" href="/assets/logo_wake_560.png" fetchpriority="high"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg?v=3.010.300" fetchpriority="high"/>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <!-- ARIA Live Regions -->
  <div id="a11y-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  <div id="a11y-alerts" role="alert" aria-live="assertive" aria-atomic="true" class="sr-only"></div>



<header class="site-header hero-header" role="banner">
<div class="navbar">
  <div class="brand">
    <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
    <span class="tiny version-badge">v3.010.300</span>
  </div>

    <!-- Hero section -->
    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="latlon-grid" aria-hidden="true"></div>
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.300" width="180" height="180" alt="" aria-hidden="true"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill long" href="https://instagram.com/flickersofmajesty">Photo © Flickers of Majesty</a>
      </div>
    </div>

    <!-- Hero -->
    <div class="hero">
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.300" width="180" height="180" alt="" aria-hidden="true" decoding="async"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline" aria-hidden="true">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <nav class="nav" aria-label="Main site navigation">
    <div class="nav-item">
      <a href="/">Home</a>
    </div>

    <!-- Planning Dropdown -->
    <div class="nav-item nav-group" id="nav-planning" data-open="false">
      <button class="nav-disclosure" type="button" aria-expanded="false" aria-haspopup="true" aria-controls="menu-planning">
        Planning <span class="caret">▾</span>
      </button>
                          <div id="menu-planning" class="submenu" role="menu" aria-label="Planning submenu">
            <a role="menuitem" href="/planning.html">Planning (overview)</a>
            <a role="menuitem" href="/ships.html">Ships</a>
            <a role="menuitem" href="/restaurants.html">Restaurants &amp; Menus</a>
            <a role="menuitem" href="/ports.html">Ports</a>
            <a role="menuitem" href="/drink-packages.html">Drink Packages</a>
            <a role="menuitem" href="/drink-calculator.html">Drink Calculator</a>
            <a role="menuitem" href="/stateroom-check.html">Stateroom Check</a>
            <a role="menuitem" href="/cruise-lines.html">Cruise Lines</a>
            <a role="menuitem" href="/packing-lists.html">Packing Lists</a>
            <a role="menuitem" href="/accessibility.html">Accessibility</a>
          </div>
    </div>

    <!-- Travel Dropdown -->
    <div class="nav-item nav-group" id="nav-travel" data-open="false">
      <button class="nav-disclosure" type="button" aria-expanded="false" aria-haspopup="true" aria-controls="menu-travel">
        Travel <span class="caret">▾</span>
      </button>
                          <div id="menu-travel" class="submenu" role="menu" aria-label="Travel submenu">
            <a role="menuitem" href="/travel.html">Travel (overview)</a>
            <a role="menuitem" href="/solo.html">Solo</a>
          </div>
    </div>

    
        <div class="nav-item">
          <a href="/tools/port-tracker.html">Port Tracker</a>
        </div>

        <div class="nav-item">
          <a href="/tools/ship-tracker.html">Ship Tracker</a>
        </div>



    
        <div class="nav-item">
          <a href="/search.html">Search</a>
        </div>

        <div class="nav-item">
      <a href="/about-us.html">About</a>
    </div>
  </nav>
</div>


  <main class="wrap" role="main" aria-labelledby="title">
    <!-- ICP-Lite Content Structure -->
    <section class="page-intro" style="grid-column: 1 / -1; max-width: 1100px; margin: 1rem auto 1.5rem;">
      <p class="answer-line" style="margin: 0.75rem 0; padding: 0.5rem 0.75rem; border-left: 3px solid var(--rope, #d9b382); background: #f7fdff; border-radius: 8px;">
        <strong>Quick Answer:</strong> This page provides cruise planning resources for Offline. Use the information below to help plan your cruise vacation.
      </p>

      <p class="fit-guidance" style="margin: 0.75rem 0; font-size: 0.95rem; color: #134; line-height: 1.6;">
        <strong>Best For:</strong> Cruisers researching offline, comparing options, and gathering information for trip planning.
      </p>

      <div class="key-facts" style="margin: 1rem 0; padding: 1rem; background: #f7fdff; border-radius: 8px; border: 1px solid #e0f0f5;">
        <h3 style="margin: 0 0 0.5rem; font-size: 1rem; color: #134;">Key Facts</h3>
        <ul style="margin: 0; padding-left: 1.25rem;">
          <li><strong>Topic:</strong> Offline</li>
          <li><strong>Purpose:</strong> Cruise planning resource</li>
        </ul>
      </div>
    </section>

    <header>
      <div class="logo" aria-hidden="true">
        <!-- Inline compass-rose icon -->
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M12 2v3M12 19v3M2 12h3M19 12h3"/>
          <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"/>
          <path d="M12 6l3.5 7.5L8 12l4-6z"/>
          <circle cx="12" cy="12" r="1.25" />
        </svg>
      </div>
      <div>
        <h1 id="title">You’re offline</h1>
        <p class="muted">We can’t reach <strong>In the Wake</strong> right now. Some pages are available offline—try again when you’re back online.</p>
      </div>
    </header>

    <section class="card" aria-live="polite">
      <p class="tiny">Status: <span id="net-status" data-online="unknown">checking…</span></p>
      <div class="btns">
        <button class="btn" id="retry">Try again</button>
        <a class="btn secondary" href="/" id="home">Go to Home</a>
      </div>
    </section>

    <section class="card">
      <p><strong>What you can try</strong></p>
      <ul class="tiny">
        <li>Check your Wi-Fi or cellular connection.</li>
        <li>Use the <em>Try again</em> button to reload this page.</li>
        <li>Open a page that’s cached for offline use:
          <ul style="margin-top:.3rem">
            <li><a href="/drink-packages.html">Beverage Packages Calculator</a></li>
            <li><a href="/planning.html">Cruise Planning</a></li>
            <li><a href="/ports.html">Ports</a></li>
            <li><a href="/restaurants.html">Restaurants</a></li>
            <li><a href="/solo.html">Solo Cruising</a></li>
          </ul>
        </li>
      </ul>
    </section>

    <footer>
      <div>© <span id="year"></span> In the Wake</div>
      <div class="tiny">This is a built-in offline page.</div>
    </footer>
  
    <!-- ICP-Lite FAQ Section -->
    <section class="card faq" id="faq" style="margin: 1.5rem 0; padding: 1rem;">
      <h2 style="margin: 0 0 1rem; font-size: 1.25rem;">Frequently Asked Questions</h2>

      <details style="margin: 0.5rem 0; padding: 0.5rem 0; border-bottom: 1px solid #e0e8f0;">
        <summary style="cursor: pointer; font-weight: 600; padding: 0.5rem 0;">What information does this page provide?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">This page provides planning resources and information about offline. Use it alongside official cruise line resources when planning your trip.</p>
      </details>

      <details style="margin: 0.5rem 0; padding: 0.5rem 0; border-bottom: 1px solid #e0e8f0;">
        <summary style="cursor: pointer; font-weight: 600; padding: 0.5rem 0;">Is this information official?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">This page provides community insights and planning resources. Always confirm details with your cruise line or travel advisor before making final decisions.</p>
      </details>

      <details style="margin: 0.5rem 0; padding: 0.5rem 0;">
        <summary style="cursor: pointer; font-weight: 600; padding: 0.5rem 0;">How can I get more help?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">For additional assistance, contact your cruise line directly or work with a travel advisor who specializes in cruises.</p>
      </details>
    </section>

</main>

  <script>
    (function(){
      "use strict";

  /* ===== Dropdown Menu with 300ms Hover Delay ===== */
  const dropdownGroups = Array.from(document.querySelectorAll('.nav-group'));
  if (dropdownGroups.length) {
    const hoverTimeouts = new Map();
    const HOVER_DELAY = 300;

    function setOpen(group, isOpen) {
      group.dataset.open = isOpen ? "true" : "false";
      const button = group.querySelector('.nav-disclosure');
      if (button) {
        button.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      }
    }

    function closeAll(except = null) {
      dropdownGroups.forEach(group => {
        if (group !== except) {
          setOpen(group, false);
          if (hoverTimeouts.has(group)) {
            clearTimeout(hoverTimeouts.get(group));
            hoverTimeouts.delete(group);
          }
        }
      });
    }

    dropdownGroups.forEach(group => {
      const button = group.querySelector('.nav-disclosure');
      const menu = group.querySelector('.submenu');
      if (!button || !menu) return;

      // Click to toggle
      button.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        const isOpen = group.dataset.open === "true";
        closeAll(group);
        setOpen(group, !isOpen);
      });

      // Mouse enter: Open immediately
      group.addEventListener('mouseenter', () => {
        if (hoverTimeouts.has(group)) {
          clearTimeout(hoverTimeouts.get(group));
          hoverTimeouts.delete(group);
        }
        closeAll(group);
        setOpen(group, true);
      });

      // Mouse leave: Close after delay
      group.addEventListener('mouseleave', () => {
        const timeoutId = setTimeout(() => {
          setOpen(group, false);
          hoverTimeouts.delete(group);
        }, HOVER_DELAY);
        hoverTimeouts.set(group, timeoutId);
      });

      // Keyboard navigation
      group.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          setOpen(group, false);
          button && button.focus();
        }
        if ((e.key === 'ArrowDown' || e.key === 'ArrowUp') && document.activeElement === button) {
          e.preventDefault();
          setOpen(group, true);
          const firstLink = menu.querySelector('a, button, [tabindex]:not([tabindex="-1"])');
          firstLink && firstLink.focus();
        }
      });

      // Close when tabbing away
      menu.addEventListener('focusout', () => {
        setTimeout(() => {
          if (!group.contains(document.activeElement)) {
            setOpen(group, false);
          }
        }, 0);
      });
    });

    // Close all when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.nav-group')) {
        closeAll();
      }
    });

    // Close all when window loses focus
    window.addEventListener('blur', () => {
      closeAll();
    });
  }

      const $ = (sel)=>document.querySelector(sel);
      const statusEl = $("#net-status");
      const retryBtn = $("#retry");
      const yearEl = $("#year");
      yearEl.textContent = new Date().getFullYear();

      function paintStatus(){
        const ok = navigator.onLine;
        statusEl.textContent = ok ? "online" : "offline";
        statusEl.style.color = ok ? "var(--ok)" : "var(--warn)";
        statusEl.setAttribute("data-online", ok ? "true" : "false");
      }

      // Initial & reactive status
      paintStatus();
      window.addEventListener("online", paintStatus);
      window.addEventListener("offline", paintStatus);

      retryBtn.addEventListener("click", ()=>{
        // Try a quick HEAD ping to the homepage; if it works, reload this doc
        const ctrl = new AbortController();
        setTimeout(()=>ctrl.abort(), 3500);
        fetch("/", { method:"HEAD", cache:"no-store", signal:ctrl.signal }).then(()=>{
          location.reload();
        }).catch(()=>{
          // If still offline, give subtle feedback
          retryBtn.animate([{ transform:"none" },{ transform:"translateY(2px)" },{ transform:"none" }], { duration: 240 });
        });
      });

      // Keyboard a11y: press "r" to retry, "h" for home
      window.addEventListener("keydown", (e)=>{
        if (e.key === "r" || e.key === "R"){ e.preventDefault(); retryBtn.click(); }
        if (e.key === "h" || e.key === "H"){ e.preventDefault(); $("#home").click(); }
      });
    })();
  </script>

  <!-- Dropdown nav behavior (300ms Hover Delay) -->
  <script>
  (function(){
    "use strict";

    /* ===== Dropdown Menu with 300ms Hover Delay ===== */
    const dropdownGroups = Array.from(document.querySelectorAll('.nav-group'));
    if (dropdownGroups.length) {
      const hoverTimeouts = new Map();
      const HOVER_DELAY = 300;

      function setOpen(group, isOpen) {
        group.dataset.open = isOpen ? "true" : "false";
        const button = group.querySelector('.nav-disclosure');
        if (button) {
          button.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        }
      }

      function closeAll(except = null) {
        dropdownGroups.forEach(group => {
          if (group !== except) {
            setOpen(group, false);
            if (hoverTimeouts.has(group)) {
              clearTimeout(hoverTimeouts.get(group));
              hoverTimeouts.delete(group);
            }
          }
        });
      }

      dropdownGroups.forEach(group => {
        const button = group.querySelector('.nav-disclosure');
        const menu = group.querySelector('.submenu');
        if (!button || !menu) return;

        // Click to toggle
        button.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const isOpen = group.dataset.open === "true";
          closeAll(group);
          setOpen(group, !isOpen);
        });

        // Mouse enter: Open immediately
        group.addEventListener('mouseenter', () => {
          if (hoverTimeouts.has(group)) {
            clearTimeout(hoverTimeouts.get(group));
            hoverTimeouts.delete(group);
          }
          closeAll(group);
          setOpen(group, true);
        });

        // Mouse leave: Close after delay
        group.addEventListener('mouseleave', () => {
          const timeoutId = setTimeout(() => {
            setOpen(group, false);
            hoverTimeouts.delete(group);
          }, HOVER_DELAY);
          hoverTimeouts.set(group, timeoutId);
        });

        // Keyboard navigation
        group.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            setOpen(group, false);
            button && button.focus();
          }
          if ((e.key === 'ArrowDown' || e.key === 'ArrowUp') && document.activeElement === button) {
            e.preventDefault();
            setOpen(group, true);
            const firstLink = menu.querySelector('a, button, [tabindex]:not([tabindex="-1"])');
            firstLink && firstLink.focus();
          }
        });

        // Close when tabbing away
        menu.addEventListener('focusout', () => {
          setTimeout(() => {
            if (!group.contains(document.activeElement)) {
              setOpen(group, false);
            }
          }, 0);
        });
      });

      // Close all when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.nav-group')) {
          closeAll();
        }
      });

      // Close all when window loses focus
      window.addEventListener('blur', () => {
        closeAll();
      });
    }
  })();
  </script>

</body>
</html>
