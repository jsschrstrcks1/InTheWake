<!doctype html>
<html lang="en">
<head>
  <!--
  Soli Deo Gloria — may every pixel and paragraph bear His reflection; this site is offered as worship to God.

  STANDARDS: Every Page v3.010 · Unified Nav v3.010 (dropdowns) · Right-Rail Articles+Author v3.008.025
  A11y/WCAG Addendum v3.100 · CMP/Consent v3.008.020 · FB Domain Verification v3.008.021
  Page: /planning.html · v3.010.062 (inline, self-contained — no external styles.css)
  GUARD RAIL: DO NOT REMOVE OR CHANGE USER-APPROVED VERBIAGE.
  -->

  <!-- Consent (autoblocking) -->
  <script type="text/javascript" data-cmp-ab="1"
    src="https://cdn.consentmanager.net/delivery/autoblocking/e11a25480244a.js"
    data-cmp-host="a.delivery.consentmanager.net"
    data-cmp-cdn="cdn.consentmanager.net"
    data-cmp-codesrc="16"></script>

  <!-- Analytics -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WZP891PZXJ"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-WZP891PZXJ');</script>

  <!-- Core meta -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="referrer" content="no-referrer">
  <meta name="robots" content="index, follow, max-image-preview:large">
  <meta name="theme-color" content="#0e6e8e">
  <meta name="version" content="3.010.062"/>
  <meta name="page:version" content="3.010.062"/>
  <meta name="standards:baseline" content="3.010"/>
  <meta name="facebook-domain-verification" content="18im6oc23fy1oy8f8clbsb8bxniv4x"/>

  <!-- SEO -->
  <title>Planning — In the Wake (v3.010.062)</title>
  <meta name="description" content="Plan your voyage with confidence: calm guidance, departure ports, nearby airports, typical drive times, and gentle cautions—curated from real sailings.">

  <!-- Canonical & Social -->
  <link rel="canonical" href="https://www.cruisinginthewake.com/planning.html"/>
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="In the Wake">
  <meta property="og:url" content="https://www.cruisinginthewake.com/planning.html">
  <meta property="og:title" content="Planning — In the Wake">
  <meta property="og:description" content="Cruise planning made simple—timelines, airport-to-port tips, and steady answers in a gentle voice.">
  <meta property="og:image" content="https://www.cruisinginthewake.com/assets/social/planning-hero.jpg?v=3.010.062">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Breadcrumb JSON-LD -->
  <script type="application/ld+json">{
    "@context":"https://schema.org","@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://www.cruisinginthewake.com/"},
      {"@type":"ListItem","position":2,"name":"Planning","item":"https://www.cruisinginthewake.com/planning.html"}
    ]
  }</script>

  <!-- Absolute URL normalizer (same-originify) -->
  <script>
  (function(){
    const ORIGIN=(location.origin||(location.protocol+'//'+location.host)).replace(/\/$/,'');
    window._abs=function(p){p=String(p||'');if(!p.startsWith('/'))p='/'+p;return ORIGIN+p;};
    function normalize(){
      const sel=['a[href^="https://www.cruisinginthewake.com/"]',
                 'img[src^="https://www.cruisinginthewake.com/"]',
                 'link[href^="https://www.cruisinginthewake.com/"]',
                 'script[src^="https://www.cruisinginthewake.com/"]'].join(',');
      document.querySelectorAll(sel).forEach(el=>{
        const attr=el.hasAttribute('href')?'href':'src';
        try{const u=new URL(el.getAttribute(attr));el.setAttribute(attr,ORIGIN+u.pathname+u.search+u.hash);}catch(_){}
      });
    }
    if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',normalize,{once:true});}else{normalize();}
  })();
  </script>

  <!-- External link hardener -->
  <script>
  (function(){
    const here=location.hostname.replace(/^www\./,'');
    function upgrade(){
      document.querySelectorAll('a[href]').forEach(a=>{
        const href=a.getAttribute('href')||'';
        if(/^(#|mailto:|tel:)/i.test(href))return;
        try{
          const u=new URL(href,location.href);
          const host=u.hostname.replace(/^www\./,'');
          if(host!==here||a.rel==='external'){
            a.target='_blank';
            a.rel=['noopener','noreferrer'].concat((a.rel||'').split(/\s+/)).filter(Boolean).join(' ');
          }
        }catch(_){}
      });
    }
    if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',upgrade,{once:true});}else{upgrade();}
  })();
  </script>

  <!-- Canonicalize: /solo/articles/<slug>[.html] → /solo/<slug>.html, and drop #fragments everywhere -->
  <script>
  (function(){
    function canon(href){
      if(!href) return href;
      try{
        const u=new URL(href, location.origin);
        const m=u.pathname.match(/^\/solo\/articles\/([a-z0-9\-]+)(?:\.html)?$/i);
        if(m){ u.pathname='/solo/'+m[1]+'.html'; u.hash=''; return u.pathname+u.search; }
        if(/^\/solo\/[a-z0-9\-]+(?:\.html)?$/i.test(u.pathname)){ u.hash=''; return u.pathname+u.search; }
        return u.pathname+u.search+u.hash;
      }catch(_){
        return String(href)
          .replace(/(^|https?:\/\/[^\/]+)\/solo\/articles\/([a-z0-9\-]+)(?:\.html)?(\b|$)/i,(_,$1,slug)=>'/solo/'+slug+'.html')
          .replace(/#.*/,'');
      }
    }
    function apply(root){
      (root||document).querySelectorAll('a[href],link[href],img[src],script[src]').forEach(el=>{
        const k=el.hasAttribute('href')?'href':'src';
        const o=el.getAttribute(k)||'';
        const n=canon(o);
        if(n!==o) el.setAttribute(k,n);
      });
    }
    if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',()=>apply(),{once:true});}else{apply();}
    new MutationObserver(muts=>{
      for(const m of muts){ for(const n of m.addedNodes){ if(n.nodeType===1) apply(n); } }
    }).observe(document.documentElement,{subtree:true,childList:true});
  })();
  </script>

  <!-- Site cache & Service Worker (cache-busted) -->
  <script src="/assets/js/site-cache.js?v=3.010.062" defer></script>
  <script>
  if('serviceWorker' in navigator){
    navigator.serviceWorker.register('/sw.js?v=3.010.062').catch(()=>{});
  }
  </script>

  <!-- LCP preload -->
  <link rel="preload" as="image" href="/assets/index_hero.jpg?v=3.010.062" fetchpriority="high">

  <!-- ===== Inline CSS (self-contained) ===== -->
  <style>
    :root{
      --sea:#0a3d62; --foam:#e6f4f8; --rope:#d9b382; --ink:#083041; --sky:#f7fdff; --accent:#0e6e8e;
      --shadow:0 2px 6px rgba(8,48,65,.08); --shadow-lg:0 8px 24px rgba(8,48,65,.12)
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;overflow-x:hidden}
    body{font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--ink);background:var(--sky)}
    img{max-width:100%;height:auto;display:block}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    .wrap{max-width:1100px;margin:0 auto;padding:20px 14px 36px}
    .tiny{font-size:.9rem;color:#456}
    .muted{opacity:.85}
    .center{text-align:center}
    .pill{display:inline-block;padding:.45rem .75rem;border:1px solid var(--rope);border-radius:999px;background:#fff;line-height:1.1}
    .card{background:#fff;border:2px solid var(--rope);border-radius:14px;padding:1rem;box-shadow:var(--shadow);margin:.8rem 0;position:relative;overflow:hidden}
    .card::after{content:"";position:absolute;inset:0;margin:auto;width:min(60%,360px);height:min(60%,360px);background:url('/assets/watermark.png?v=3.010.062') center/contain no-repeat;opacity:.06;pointer-events:none}
    h1,h2,h3,h4{color:var(--sea);margin:.25rem 0 .5rem}

    /* A11y */
    @media (prefers-reduced-motion: reduce){
      *{animation-duration:.001ms!important;animation-iteration-count:1!important;transition-duration:.001ms!important;scroll-behavior:auto!important}
    }
    .visually-hidden-focusable{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .visually-hidden-focusable:focus{position:fixed;left:12px;top:12px;width:auto;height:auto;padding:.45rem .7rem;background:#fff;border:2px solid var(--sea);border-radius:10px;z-index:2147483647}

    /* Header / Nav (Unified v3.010) */
    .hero-header{position:relative;border-bottom:6px double var(--rope);background:#eaf6f6}
    .navbar{max-width:1100px;margin:0 auto;display:flex;gap:.6rem;padding:.35rem .9rem;align-items:center;position:relative;z-index:1000;min-height:60px}
    .brand{display:flex;align-items:center;gap:.6rem}
    .brand img{height:44px;width:auto;display:block} /* keep logo fully inside bar */
    .version-badge{font-size:.72rem;opacity:.8;margin-left:.35rem}

    .main-nav{display:flex;gap:.5rem;flex:1 1 auto;min-width:0;align-items:center;justify-content:center;white-space:nowrap;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;scrollbar-width:thin;padding-inline:.75rem}
    .nav-item{position:relative}
    .chip{display:inline-flex;align-items:center;gap:.35rem;padding:.35rem .7rem;border-radius:10px;background:#fff;border:1px solid var(--rope);color:var(--accent);font-size:.95rem;cursor:pointer}
    .nav-item > a.chip{text-decoration:none}
    .chip[aria-current="page"]{outline:3px dashed var(--rope);outline-offset:2px;box-shadow:0 0 0 3px rgba(200,163,106,.15) inset}
    .menu{position:absolute;left:0;top:calc(100% + .35rem);min-width:240px;background:#fff;border:1px solid var(--rope);border-radius:12px;box-shadow:var(--shadow-lg);padding:.6rem;display:none;z-index:2000}
    .menu .label{font-weight:600;color:#234;margin:.15rem .2rem .35rem}
    .menu a{display:block;padding:.45rem .6rem;border-radius:.6rem;color:var(--ink)}
    .menu a:hover{background:#f2f7fa;text-decoration:none}
    .nav-item.open .menu,.nav-item:focus-within .menu{display:block}

    /* Hero */
    .hero{position:relative;width:100%;min-height:clamp(200px,24vw,340px);background:url('/assets/index_hero.jpg?v=3.010.062') center/cover no-repeat;display:flex;align-items:flex-end;overflow:hidden;isolation:isolate}
    .hero::before{content:"";position:absolute;inset:0;pointer-events:none} /* ensure overlay never steals pointer */
    .hero-title{position:absolute;left:min(3vw,1rem);bottom:clamp(.6rem,2vw,1.4rem);display:flex;flex-direction:column;align-items:flex-start;gap:.35rem;text-shadow:0 2px 6px rgba(0,0,0,.45);pointer-events:none}
    .hero-title .logo{width:clamp(189px,23.1vw,378px);max-width:min(45vw,520px);filter:drop-shadow(0 3px 8px rgba(0,0,0,.45))}
    .tagline{font-weight:700;letter-spacing:.2px;color:#e6f4f8;font-size:clamp(.9rem,1.5vw,1.35rem);white-space:nowrap}
    .hero-compass{position:absolute;right:min(3vw,1rem);top:.5rem;width:86px;opacity:.95;filter:invert(39%) sepia(9%) saturate(1063%) hue-rotate(151deg) brightness(92%) contrast(89%);pointer-events:none}
    .hero-credit{position:absolute;right:.85rem;bottom:.85rem;z-index:2}

    /* Layout */
    .planning-grid,.grid{display:grid;gap:1.2rem}
    @media (min-width:1060px){ .planning-grid{grid-template-columns:minmax(0,1fr) 360px} }
    .buttons{display:flex;flex-wrap:wrap;gap:.45rem .5rem}
    .buttons .pill{white-space:nowrap}

    /* Banners & details */
    .banner{padding:.7rem .9rem;border:1px solid var(--rope,#cfd9df);border-radius:.75rem;background:#fbfdff}
    .banner.warn{background:#fff8f8;border-color:#ffd1d1}
    details.qa{border:1px solid var(--rope,#dfe7ee);border-radius:.6rem;padding:.5rem .7rem;background:#fff}
    details.qa + details.qa{margin-top:.5rem}

    /* Airports grid */
    .grid-airports{display:grid;grid-template-columns:1fr;gap:.6rem}
    @media(min-width:560px){ .grid-airports{grid-template-columns:repeat(2,minmax(0,1fr));} }
    .airport{padding:.7rem .8rem;border:1px solid var(--rope,#dfe7ee);border-radius:.6rem;background:#fff}
    .airport .code{font-weight:700}

    /* Rails */
    .rail{display:grid;gap:.9rem}
    .rail-item{display:grid;grid-template-columns:112px 1fr;gap:.75rem;align-items:start}
    .rail-item .thumb{width:112px;height:72px;border-radius:10px;background:#eef4f7;overflow:hidden}
    .rail-item .thumb img{width:100%;height:100%;object-fit:cover}
    .rail-item .avatar{width:20px;height:20px;border-radius:50%;vertical-align:middle;margin-right:.25rem}

    /* Planning buttons look/active */
    #state-buttons,#port-buttons{display:flex;flex-wrap:wrap;gap:.4rem .5rem;margin-top:.35rem}
    #state-buttons .pill,#port-buttons .pill{display:inline-block;padding:.45rem .75rem;border:2px solid var(--rope,#cfd9df);border-radius:999px;background:#fff;text-decoration:none;line-height:1.15}
    #state-buttons .pill[aria-current="true"],#port-buttons .pill[aria-current="true"]{border-color:var(--sea);box-shadow:0 0 0 3px rgb(14 110 142 / .08)}
    #state-buttons{margin-bottom:.6rem;border-bottom:1px dashed var(--rope,#cfd9df);padding-bottom:.4rem}
    #state-buttons .pill{background:#fff;border-color:var(--rope,#cfd9df);color:var(--sea);font-weight:600}
    #state-buttons .pill[aria-current="true"]{background:var(--sea);color:#fff;border-color:var(--sea)}
    #port-buttons{margin-top:.7rem}
    #port-buttons .pill{background:#f7fdff;border-color:var(--sea);color:var(--sea);font-weight:500}
    #port-buttons .pill[aria-current="true"]{background:var(--sea);color:#fff;border-color:var(--sea)}

    /* Footer */
    footer.wrap{font-size:.92rem}
  </style>
</head>
<body class="page">
  <a class="visually-hidden-focusable" href="#content">Skip to main content</a>

  <!-- ===== Header / Nav / Hero ===== -->
  <header class="site-header hero-header" role="banner">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake.png?v=3.010.062" width="256" height="64" alt="In the Wake wordmark">
        <span class="tiny version-badge">v3.010.062</span>
      </div>

      <!-- Unified Main Navigation -->
      <nav class="main-nav" aria-label="Primary site navigation">
        <div class="nav-item"><a class="chip" href="/">Home</a></div>

        <div class="nav-item" aria-haspopup="true">
          <button class="chip" aria-expanded="false">Planning ▾</button>
          <div class="menu" role="menu" aria-label="Planning">
            <div class="label">Plan</div>
            <a href="/planning.html" role="menuitem">Overview</a>
            <a href="/packing-lists.html" role="menuitem">Packing Lists</a>
            <a href="/drink-packages.html" role="menuitem">Drink Packages</a>
            <a href="/accessibility.html" role="menuitem">Accessibility</a>
          </div>
        </div>

        <div class="nav-item" aria-haspopup="true">
          <button class="chip" aria-expanded="false">Travel ▾</button>
          <div class="menu" role="menu" aria-label="Travel">
            <div class="label">Go</div>
            <a href="/travel.html" role="menuitem">Travel Guides</a>
            <a href="/ports.html" role="menuitem">Ports</a>
            <a href="/ships/" role="menuitem">Ships</a>
            <a href="/restaurants.html" role="menuitem">Dining</a>
          </div>
        </div>

        <div class="nav-item"><a class="chip" href="/solo.html">Solo</a></div>
        <div class="nav-item"><a class="chip" href="/about-us.html">About</a></div>
      </nav>
    </div>

    <!-- Hero -->
    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.062" width="180" height="180" alt="" aria-hidden="true">
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake.png?v=3.010.062" width="256" height="64" alt="In the Wake">
        <div class="tagline">A Cruise Traveler’s Logbook</div>
      </div>
      <div class="hero-credit">
        <a class="pill long" href="https://instagram.com/flickersofmajesty" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <!-- Floating share-bar mount -->
  <div id="share-bar-host"></div>
  <script src="/assets/js/share-bar.js?v=3.010.062" defer></script>

  <!-- ===== Main Grid (content + right rail) ===== -->
  <main id="content" class="wrap planning-grid" role="main">
    <!-- LEFT COLUMN -->
    <section class="card prose" aria-labelledby="planning-intro">
      <h1 id="planning-intro">Planning That Feels Like Smooth Water</h1>
      <p class="motto"><em>The calmest seas are found in another’s wake.</em></p>
      <p>
        Mariners know a small truth with big comfort: the calmest water lies in the wake of another boat.
        Tuck in behind a steady hull and the chop softens, the course steadies, and the hard parts feel easier.
        <em>In the Wake</em> exists to be that smooth water for your cruise planning.
      </p>
      <p>
        We sail ahead — collecting real-world details from actual voyages — so you can follow with confidence.
        Compare ships and classes, scan menus and prices, scout cabins, and spot accessibility notes without all the whitecaps.
        The goal isn’t to sell you anything; it’s to take the friction out of decisions so your trip feels effortless.
        Fair winds — and gentler seas — in our wake.
      </p>

      <div class="banner">
        <strong>Quick Tips:</strong>
        <ul>
          <li>Arrive the day before embarkation; sleep near the port when possible.</li>
          <li>Keep cloud copies of IDs and tickets.</li>
          <li>Prefer nonstops — delay risk compounds.</li>
          <li>Pad transfers around rush hour and school breaks.</li>
        </ul>
      </div>
    </section>

    <!-- === Full dataset block (restored, including Holiday Inn Express note) === -->
    <script id="planning-dataset" type="application/json">{
      "version":"0.7",
      "last_updated":"2025-10-20T00:00:00Z",
      "signals":{
        "spring_break":{"window":"mid-Feb → early Apr","notes":"K-12 varies by district (most in March). Colleges peak early–mid March."},
        "fall_break":{"window":"late Sep → mid-Oct","notes":"Observed by some districts; long weekends add demand."},
        "busy_days":["Thanksgiving week","Christmas–New Year’s","MLK","Presidents’ Day","Memorial Day","Labor Day","Indigenous/Columbus Day","Veterans Day"],
        "disclaimer":"Drive times are typical in light–moderate traffic; weather, events, or incidents can extend them."
      },
      "ports":[
        {"slug":"port-everglades","name":"Port Everglades","city":"Fort Lauderdale","state":"FL","state_full":"Florida","country":"USA",
         "blurb":["Efficient transfers and quick airport hop.","Stay near 17th Street for painless mornings."],
         "tips":["FLL→port ~10–15 min; rideshare is simplest.","Hotels on 17th St often bundle shuttles."],
         "warnings":["Sundays stack multiple turnarounds.","Spring Break weeks spike prices/traffic.","17th St bridge lifts bunch traffic."],
         "airports":[
           {"code":"FLL","name":"Fort Lauderdale","distance_miles":3,"typical_drive":"10–15 min","notes":"Closest / simplest hop."},
           {"code":"MIA","name":"Miami Intl","distance_miles":28,"typical_drive":"40–70 min","notes":"More nonstops; Brightline option."}
         ],
         "lodging":[
           {"name":"Holiday Inn Express Fort Lauderdale Cruise-Airport",
            "url":"https://www.ihg.com/holidayinnexpress/hotels/us/en/fort-lauderdale/fllwc/hoteldetail",
            "notes":"Close to the port and FLL; reasonable, clean, and consistently a good pre-cruise stay."}
         ]}
      ]
    }</script>
        <!-- ===== RIGHT RAIL ===== -->
    <aside aria-label="Right rail">
      <section class="card" aria-labelledby="authors-title">
        <h2 id="authors-title">Featured Authors</h2>
        <div id="authors-rail" class="rail" role="list" aria-busy="true"></div>
      </section>

      <section class="card" aria-labelledby="journal-title">
        <h2 id="journal-title">From the Journal</h2>
        <div id="journal-rail" class="rail" role="feed" aria-busy="true"></div>
      </section>
    </aside>
  </main>

  <!-- ===== Authors + Journal Runtime ===== -->
  <script>
  (function(){
    "use strict";
    const V="3.010.062", GENERIC="/authors/img/author.webp";

    /* --- Authors rail --- */
    (function(){
      const mount=document.getElementById("authors-rail"); if(!mount) return;
      const SEED=[
        {name:"Ken Baker",url:"/authors/ken-baker.html",image:"/authors/img/ken1.jpg"},
        {name:"Tina Maulsby",url:"/authors/tina-maulsby.html",image:"/authors/img/tina3.jpg"}
      ];
      function card(a){
        return `<div class="rail-item" role="listitem">
          <img class="avatar" src="${a.image||GENERIC}" alt="${a.name}" loading="lazy" decoding="async"
            onerror="this.onerror=null;this.src='${GENERIC}'">
          <div><h4><a href="${a.url}">${a.name}</a></h4><p class="tiny">Contributor</p></div>
        </div>`;
      }
      mount.innerHTML=SEED.map(card).join(""); mount.setAttribute("aria-busy","false");
    })();

    /* --- Journal rail --- */
    (function(){
      const mount=document.getElementById("journal-rail"); if(!mount) return;
      const HERE=(location.pathname||"").toLowerCase().replace(/\/index\.html$/,"");
      const SEED=[
        {url:"/articles/top-20-questions/",title:"Top 20 First-Cruise Questions (Answered)",
         date:"2025-10-16",image:"/assets/articles/top-20-questions/cover.jpg?v=3.010.039",
         author:{name:"Ken Baker",url:"/authors/ken-baker.html"}},
        {url:"/solo/freedom-of-your-own-wake.html",title:"Freedom of Your Own Wake",
         date:"2024-08-13",image:"/assets/index_hero.jpg?v="+V,
         author:{name:"Ken Baker",url:"/authors/ken-baker.html"}},
        {url:"/solo/why-i-started-solo-cruising.html",title:"Why I Started Solo Cruising",
         date:"2024-05-31",image:"/authors/img/tina3.jpg",
         author:{name:"Tina Maulsby",url:"/authors/tina-maulsby.html"}}
      ];
      function canon(u){return u.replace(/^\/solo\/articles\/(.+)\.html$/i,"/solo/$1.html");}
      function esc(s){return String(s||"").replace(/[&<>"]/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[m]));}
      function card(a){
        const img=a.image||"/assets/placeholders/article-thumb.jpg?v="+V;
        const nm=a.author?.name||""; const au=a.author?.url?`<a href="${a.author.url}">${esc(nm)}</a>`:nm;
        const d=a.date?new Date(a.date).toLocaleDateString()+" · ":"";
        return `<article class="rail-item" role="article">
          <a class="thumb" href="${canon(a.url)}"><img src="${img}" alt=""></a>
          <div><h4><a href="${canon(a.url)}">${esc(a.title)}</a></h4>
            <p class="tiny muted">${d}${au}</p></div></article>`;
      }
      const list=SEED.filter(a=>canon(a.url)!==HERE);
      mount.innerHTML=list.slice(0,4).map(card).join(""); mount.setAttribute("aria-busy","false");
    })();
  })();
  </script>

  <!-- ===== Unified Nav Behavior (hover + click, delay protected) ===== -->
  <script>
  (function(){
    const groups=[...document.querySelectorAll(".nav-item[aria-haspopup='true']")];
    if(!groups.length) return;
    const OPEN_DELAY=120, CLOSE_DELAY=260, timers=new WeakMap();

    function setOpen(el,on){
      if(!el) return; el.classList.toggle("open",!!on);
      const btn=el.querySelector("button.chip");
      if(btn) btn.setAttribute("aria-expanded",on?"true":"false");
    }
    function clearTimer(el){const t=timers.get(el);if(t){clearTimeout(t);timers.delete(el);}}
    function closeAll(except){groups.forEach(g=>{if(g!==except){clearTimer(g);setOpen(g,false);}});}

    groups.forEach(g=>{
      const btn=g.querySelector("button.chip"),menu=g.querySelector(".menu");
      if(!btn||!menu) return;

      btn.addEventListener("click",e=>{
        e.preventDefault(); const on=g.classList.contains("open");
        closeAll(g); setOpen(g,!on);
      });

      btn.addEventListener("keydown",e=>{
        if(e.key==="ArrowDown"){e.preventDefault();setOpen(g,true);(menu.querySelector("a")||btn).focus();}
        if(e.key==="Escape"){setOpen(g,false);btn.focus();}
      });

      g.addEventListener("pointerenter",()=>{clearTimer(g);timers.set(g,setTimeout(()=>{closeAll(g);setOpen(g,true);},OPEN_DELAY));});
      g.addEventListener("pointerleave",e=>{
        clearTimer(g);const to=e.relatedTarget;if(to&&g.contains(to))return;
        timers.set(g,setTimeout(()=>setOpen(g,false),CLOSE_DELAY));
      });
      menu.addEventListener("pointerenter",()=>clearTimer(g));
    });

    document.addEventListener("click",e=>{
      if(!e.target.closest(".nav-item[aria-haspopup='true']")) closeAll();
    });
  })();
  </script>

    <!-- ===== Planner Runtime (buttons, airports, cautions, Q&A) ===== -->
  <script>
  (function(){
    const dataEl=document.getElementById('planning-dataset');
    if(!dataEl) return;

    function parseJSONC(txt){
      const noBlock=txt.replace(/\/\*[\s\S]*?\*\//g,'');
      const noLine=noBlock.replace(/(^|[^:\\])\/\/.*$/gm,'$1');
      return JSON.parse(noLine);
    }

    let data={};
    try{data=parseJSONC(dataEl.textContent||'{}');}
    catch(e){console.error('Planning dataset parse error',e);data={ports:[],signals:{}};}

    const stateBtns=document.getElementById('state-buttons'),
          portBtns=document.getElementById('port-buttons'),
          blurb=document.getElementById('port-blurb'),
          airports=document.getElementById('airports'),
          warns=document.getElementById('warnings'),
          qaMount=document.getElementById('qa'),
          seasonal=document.getElementById('seasonal-banner'),
          breaksEl=document.getElementById('school-breaks');

    const STATE_NAMES={AL:'Alabama',CA:'California',FL:'Florida',LA:'Louisiana',MD:'Maryland',
      MA:'Massachusetts',NJ:'New Jersey',PR:'Puerto Rico',TX:'Texas',WA:'Washington',
      BC:'British Columbia',NSW:'New South Wales'};

    function group(){
      const by=new Map();
      (data.ports||[]).forEach(p=>{
        const label=p.country&&p.country!=='USA'?p.country:(p.state_full||STATE_NAMES[p.state]||p.state||'—');
        if(!by.has(label))by.set(label,[]);
        by.get(label).push(p);
      });
      for(const [k,list] of by){list.sort((a,b)=>(a.name||'').localeCompare(b.name||''));}
      return by;
    }
    const byRegion=group();

    function E(s){return String(s||'').replace(/[&<>"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]));}
    function button(label,current,onclick){
      const a=document.createElement('a');
      a.href='#';a.className='pill';a.textContent=label;
      if(current)a.setAttribute('aria-current','true');
      a.addEventListener('click',e=>{e.preventDefault();onclick&&onclick();});
      return a;
    }

    function renderStateButtons(active){
      const box=stateBtns;if(!box)return;box.innerHTML='';
      Array.from(byRegion.keys())
        .sort((a,b)=>a==='Florida'?-1:b==='Florida'?1:a.localeCompare(b))
        .forEach(label=>box.appendChild(button(label,label===active,()=>selectState(label))));
    }
    function renderPortButtons(list,activeSlug){
      const box=portBtns;if(!box)return;box.innerHTML='';
      list.forEach(p=>box.appendChild(button(p.name,p.slug===activeSlug,()=>selectPort(p.slug))));
    }
    function renderBreaks(){
      const s=data.signals||{};
      const parts=[
        `<strong>Spring Break:</strong> ${E(s.spring_break?.window||'varies')} — ${E(s.spring_break?.notes||'')}`,
        `<strong>Fall Break:</strong> ${E(s.fall_break?.window||'varies')} — ${E(s.fall_break?.notes||'')}`,
        s.busy_days?.length?`<strong>Also Busy:</strong> ${s.busy_days.join(', ')}`:''
      ].filter(Boolean);
      breaksEl.innerHTML=parts.map(x=>`<div>${x}</div>`).join('')+
        (s.disclaimer?`<div class="tiny muted" style="margin-top:.35rem">${E(s.disclaimer)}</div>`:'');
    }

    function renderPort(p){
      blurb.innerHTML=(p.blurb||[]).map(x=>`<p>${E(x)}</p>`).join('');
      const sig=data.signals||{};
      seasonal.style.display='';
      seasonal.innerHTML=`<strong>Heads-up:</strong> Spring Break (${E(sig.spring_break?.window||'varies')}) and Fall Break (${E(sig.fall_break?.window||'varies')}).`;

      airports.innerHTML=(p.airports||[]).map(a=>`
        <div class="airport">
          <div><span class="code">${E(a.code)}</span> — ${E(a.name)}</div>
          <div class="tiny">${E(a.distance_miles)} mi · ${E(a.typical_drive||'—')}</div>
          ${a.notes?`<div class="tiny muted">${E(a.notes)}</div>`:''}
        </div>`).join('');

      warns.innerHTML=(p.warnings||[]).map(w=>`<li>${E(w)}</li>`).join('');

      const hotels=Array.isArray(p.lodging)?p.lodging:[];
      const old=document.getElementById('lodging-block');
      if(old)old.remove();
      if(hotels.length){
        const html=`<div id="lodging-block"><h3 style="margin-top:1rem">Where to Stay</h3>
          <ul class="tiny">${hotels.map(h=>`<li><a href="${E(h.url)}" rel="noopener external" target="_blank">${E(h.name)}</a>${h.notes?` — ${E(h.notes)}`:''}</li>`).join('')}</ul></div>`;
        qaMount.insertAdjacentHTML('beforebegin',html);
      }

      qaMount.innerHTML=(p.qa||[]).map(q=>`<details class="qa"><summary>${E(q.q)}</summary><div class="tiny">${E(q.a)}</div></details>`).join('');
    }

    let currentLabel='Florida',currentSlug='';
    function selectState(label){
      currentLabel=label;
      const list=byRegion.get(label)||[];
      currentSlug=list[0]?.slug||'';
      renderStateButtons(label);
      renderPortButtons(list,currentSlug);
      if(list[0])renderPort(list[0]);
    }
    function selectPort(slug){
      currentSlug=slug;
      const list=byRegion.get(currentLabel)||[];
      renderPortButtons(list,slug);
      const p=list.find(x=>x.slug===slug);
      if(p)renderPort(p);
    }

    renderBreaks();
    renderStateButtons(currentLabel);
    selectState(currentLabel);
    selectPort(currentSlug);
  })();
  </script>

  <!-- ===== Share-bar hydrate ===== -->
  <script>
  (function(){
    if(typeof window.initSharebar==='function'){window.initSharebar('#share-bar-host');}
    else{window.addEventListener('load',()=>window.initSharebar&&window.initSharebar('#share-bar-host'));}
  })();
  </script>

  <!-- ===== Footer ===== -->
  <footer class="wrap" role="contentinfo">
    © 2025 In the Wake — A Cruise Traveler’s Logbook ·
    <a href="/accessibility.html">Accessibility & WCAG 2.1 AA Commitment</a>
    <p class="tiny center" style="margin-top:.5rem">
      Soli Deo Gloria — Every pixel and paragraph is offered as worship to God, in gratitude for the beauty He has created for us to enjoy.
    </p>
  </footer>

  <!-- Signature -->
  <!-- Soli Deo Gloria · Steward: abondservant · Path: /planning.html · Version: v3.010.062 -->
</body>
</html>
