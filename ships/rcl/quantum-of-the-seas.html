<!doctype html>
<!--
Soli Deo Gloria
All work on this project is offered as a gift to God.
"Trust in the LORD with all your heart, and do not lean on your own understanding." — Proverbs 3:5
"Whatever you do, work heartily, as for the Lord and not for men." — Colossians 3:23

STANDARDS: Every Page v3.010.302 · Production Template · Unified Nav v3.010.302 · A11y/WCAG 2.1 AA Compliant
-->
<!doctype html>
<html lang="en">
<head>
<!-- ai-breadcrumbs
     entity: Quantum of the Seas
     type: Ship Information Page
     parent: /ships.html
     category: Royal Caribbean Fleet
     cruise-line: Royal Caribbean
     ship-class: Quantum Class
     updated: 2025-11-15
     expertise: Royal Caribbean ship reviews, deck plans, dining analysis, cabin comparisons
     target-audience: Quantum of the Seas cruisers, Quantum Class researchers, ship comparison shoppers
     answer-first: Quantum of the Seas: deck plans, live tracker, dining venues, and stateroom videos. Plan your Royal Caribbean cruise with In the Wake.
     -->
  <!-- ======================================================
       In the Wake — Quantum of the Seas • Royal Caribbean
       Version: 3.010.302  |  Soli Deo Gloria ✝️

       ✅ WCAG 2.1 Level AA Compliant
       ✅ SEO Optimized (JSON-LD, OpenGraph, Twitter Cards)
       ✅ Dropdown Menus with Hover Delay (300ms)
       ✅ AI-First SEO with E-E-A-T Person Schema
       ====================================================== -->

  <!-- Core -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="referrer" content="no-referrer-when-downgrade"/>
  <meta name="ai-summary" content="Quantum of the Seas: deck plans, live tracker, dining venues, and stateroom videos. Plan your Royal Caribbean cruise with In the Wake.">
  <meta name="last-reviewed" content="2025-11-19">
  <meta name="content-protocol" content="ICP-Lite v1.0">

  <!-- SEO: Robots & Crawling -->
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1"/>
  <meta name="googlebot" content="index,follow"/>
  <meta name="bingbot" content="index,follow"/>

  <!-- SEO: Theme & Appearance -->
  <meta name="color-scheme" content="light"/>
  <meta name="theme-color" content="#0e6e8e"/>
  <meta name="version" content="3.010.302"/>
  <meta name="author" content="In the Wake"/>
  <meta name="publisher" content="In the Wake"/>

  <!-- Title & SEO -->
  <title>Quantum of the Seas — Deck Plans, Live Tracker, Dining & Videos | In the Wake (v3.010.302)</title>
  <link rel="canonical" href="https://cruisinginthewake.com/ships/rcl/quantum-of-the-seas.html"/>
  <meta name="description" content="Quantum of the Seas: deck plans, live tracker, dining venues, and stateroom videos. Plan your Royal Caribbean cruise with In the Wake."/>

  <!-- OpenGraph -->
  <meta property="og:type" content="website"/>
  <meta property="og:site_name" content="In the Wake"/>
  <meta property="og:title" content="Quantum of the Seas — Deck Plans, Live Tracker, Dining & Videos"/>
  <meta property="og:description" content="All the essentials for Quantum of the Seas: live map, dining, stats, and videos."/>
  <meta property="og:url" content="https://cruisinginthewake.com/ships/rcl/quantum-of-the-seas.html"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:image" content="https://cruisinginthewake.com/assets/ships/quantum-of-the-seas1.jpeg"/>

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="Quantum of the Seas — Deck Plans, Live Tracker, Dining & Videos"/>
  <meta name="twitter:description" content="Live tracker, dining, deck plans, and videos for Quantum of the Seas."/>
  <meta name="twitter:image" content="https://cruisinginthewake.com/assets/ships/quantum-of-the-seas1.jpeg"/>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WZP891PZXJ"></script>
  <script>
    window.dataLayer=window.dataLayer||[];
    function gtag(){dataLayer.push(arguments);}
    gtag('js',new Date());
    gtag('config','G-WZP891PZXJ',{anonymize_ip:true});
  </script>

  <!-- Umami (secondary analytics) -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>

  <!-- JSON-LD: Organization -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "In the Wake",
    "url": "https://cruisinginthewake.com",
    "logo": "https://cruisinginthewake.com/assets/logo_wake.png"
  }
  </script>

  <!-- JSON-LD: WebSite + SearchAction -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "In the Wake",
    "url": "https://cruisinginthewake.com/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://cruisinginthewake.com/search.html?q={query}",
      "query-input": "required name=query"
    }
  }
  </script>

  <!-- JSON-LD: BreadcrumbList -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://cruisinginthewake.com/"},
      {"@type": "ListItem", "position": 2, "name": "Ships", "item": "https://cruisinginthewake.com/ships.html"},
      {"@type": "ListItem", "position": 3, "name": "Royal Caribbean", "item": "https://cruisinginthewake.com/cruise-lines/royal-caribbean.html"},
      {"@type": "ListItem", "position": 4, "name": "Quantum of the Seas", "item": "https://cruisinginthewake.com/ships/rcl/quantum-of-the-seas.html"}
    ]
  }
  </script>

  <!-- JSON-LD: Review -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Review",
    "name": "Quantum of the Seas Overview",
    "author": {
      "@type": "Person",
      "name": "In the Wake Editorial Team"
    },
    "reviewBody": "Quantum of the Seas delivers Royal Caribbean's signature ocean-view experience with glass walls, mid-size intimacy, and global itineraries spanning Alaska to Australia.",
    "reviewRating": {
      "@type": "Rating",
      "ratingValue": "4.6",
      "bestRating": "5",
      "worstRating": "1"
    },
    "itemReviewed": {
      "@type": "Cruise",
      "name": "Quantum of the Seas",
      "provider": {
        "@type": "Organization",
        "name": "Royal Caribbean International",
        "url": "https://www.royalcaribbean.com"
      },
      "url": "https://cruisinginthewake.com/ships/rcl/quantum-of-the-seas.html",
      "description": "A Quantum-class ship operated by Royal Caribbean International, offering worldwide itineraries and panoramic ocean views.",
      "image": "https://cruisinginthewake.com/assets/ships/quantum-of-the-seas1.jpeg"
    }
  }
  </script>

  <!-- JSON-LD: Person (E-E-A-T) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Ken Baker",
    "url": "https://cruisinginthewake.com/authors/ken-baker.html",
    "jobTitle": "Founder and Editor",
    "description": "Traveler, pastor, and storyteller. Founder of In the Wake, a cruise traveler's logbook offering planning tools, travel tips, and faith-scented reflections for smoother sailings.",
    "image": "https://cruisinginthewake.com/authors/img/ken1.webp",
    "sameAs": ["https://www.flickersofmajesty.com"],
    "worksFor": {"@type": "Organization", "name": "In the Wake"},
    "knowsAbout": ["Cruise Planning", "Royal Caribbean", "Cruise Ships", "Travel Writing"]
  }
  </script>

  <!-- Favicon / PWA -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/in_the_wake_icon_32x32.png"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png"/>
  <link rel="manifest" href="/manifest.webmanifest"/>

  <!-- Global CSS -->
  <!-- Service Worker Registration -->
  <script>
  if('serviceWorker' in navigator){
    window.addEventListener('load',()=>navigator.serviceWorker.register('/sw.js').catch(()=>{}));
  }
  </script>

  <link rel="stylesheet" href="/assets/styles.css?v=3.010.302"/>

  <!-- ===== Standards helpers (absolute URL + origin normalizer) ===== -->
  <script>
  (function(){
    // Absolute, same-origin URL builder
    const ORIGIN=(location.origin||(location.protocol+'//'+location.host)).replace(/\/$/,'');
    window._abs=function(path){ path=String(path||''); if(!path.startsWith('/')) path='/'+path; return ORIGIN+path; };

    // Normalize any hard-coded https://www.cruisinginthewake.com/* URLs to current origin (prevents redirects/CORS)
    document.addEventListener('DOMContentLoaded', function(){
      const sel=[
        'a[href^="https://www.cruisinginthewake.com/"]',
        'a[href^="https://cruisinginthewake.com/"]',
        'img[src^="https://www.cruisinginthewake.com/"]',
        'img[src^="https://cruisinginthewake.com/"]',
        'link[href^="https://www.cruisinginthewake.com/"]',
        'link[href^="https://cruisinginthewake.com/"]',
        'script[src^="https://www.cruisinginthewake.com/"]',
        'script[src^="https://cruisinginthewake.com/"]'
      ].join(',');
      document.querySelectorAll(sel).forEach(el=>{
        const attr=el.hasAttribute('href')?'href':'src';
        try{
          const u=new URL(el.getAttribute(attr));
          el.setAttribute(attr, ORIGIN+u.pathname+u.search+u.hash);
        }catch(_){}
      });
    },{once:true});
  })();
  </script>

  <!-- ===== Swiper (primary + CDN fallback) ===== -->
  <script>
  (function ensureSwiper(){
    function addCSS(h){ const l=document.createElement('link'); l.rel='stylesheet'; l.href=h; document.head.appendChild(l); }
    function addJS(src, ok, fail){
      const s=document.createElement('script'); s.src=src; s.async=true; s.onload=ok; s.onerror=fail||function(){}; document.head.appendChild(s);
    }
    const primaryCSS="https://cruisinginthewake.com/vendor/swiper/swiper-bundle.min.css";
    const primaryJS ="https://cruisinginthewake.com/vendor/swiper/swiper-bundle.min.js";
    const cdnCSS    ="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css";
    const cdnJS     ="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js";
    addCSS(primaryCSS);
    addJS(primaryJS, function(){ window.__swiperReady=true; }, function(){ addCSS(cdnCSS); addJS(cdnJS, function(){ window.__swiperReady=true; }); });
  })();
  </script>

  <!-- JSON-LD: WebPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Quantum of the Seas",
  "url": "https://www.cruisinginthewake.com/ships/rcl/quantum-of-the-seas.html",
  "description": "Quantum of the Seas: deck plans, live tracker, dining venues, and stateroom videos. Plan your Royal Caribbean cruise with In the Wake."
}
  </script><!-- ===== Page micro CSS (scoped) ===== -->
  <style>
    .hidden{display:none!important}
    .pills,.class-pills,.related-pills,.button-group{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center;text-align:center}
    body::before{content:"";position:fixed;inset:0;background:url("/assets/watermark.png") center right/420px auto no-repeat;opacity:.06;pointer-events:none;z-index:0}
    body>*{position:relative;z-index:1}

    /* First Look carousel */
    .swiper.firstlook{position:relative;overflow:hidden}
    .swiper.firstlook .swiper-wrapper{display:flex}
    .swiper.firstlook .swiper-slide{flex:0 0 100%}
    .swiper.firstlook img{display:block;width:100%;height:auto;border-radius:10px}
    .swiper.firstlook .swiper-button-prev,.swiper.firstlook .swiper-button-next{
      position:absolute;top:50%;transform:translateY(-50%);display:flex!important;opacity:1!important;visibility:visible!important;pointer-events:auto!important;z-index:7!important;width:44px;height:44px;align-items:center;justify-content:center;color:#0a3d62
    }
    .swiper.firstlook .swiper-button-prev{left:8px}
    .swiper.firstlook .swiper-button-next{right:8px}
    .swiper.firstlook .swiper-button-prev::after,.swiper.firstlook .swiper-button-next::after{
      font-size:18px;background:#fff;border-radius:999px;padding:10px;box-shadow:0 2px 8px rgba(0,0,0,.18)
    }
    .swiper.firstlook .swiper-pagination{z-index:7!important}
    .swiper.firstlook .swiper-pagination-bullet{background:#0a3d62;opacity:.45}
    .swiper.firstlook .swiper-pagination-bullet-active{opacity:1}

    /* Content + cards */
    .wrap{max-width:1100px;margin:0 auto;padding:20px 14px 36px}
    .card{background:#fff;border:2px solid var(--rope,#d9b382);border-radius:14px;padding:1rem;margin:.8rem 0;box-shadow:0 2px 6px rgba(8,48,65,.08);position:relative;overflow:hidden}
    .grid-2{display:grid;gap:1rem;align-items:stretch}
    .grid-2>.card{display:flex;flex-direction:column}
    @media (min-width:980px){.grid-2{grid-template-columns:1fr 1fr}}

    .ship-stats.card.mini{margin-top:.6rem}
    .stats-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.4rem .8rem;font-size:.95rem}
    .stat-line{display:flex;gap:.35rem;justify-content:space-between;border-bottom:1px dashed #e4e9ec;padding:.2rem 0}
    .stat-key{color:#355;font-weight:600}.stat-val{color:#024}

    .swiper{width:100%;max-width:820px;margin:0 auto}
    .swiper-slide iframe{width:100%;aspect-ratio:16/9;display:block;border:0;border-radius:12px}
    .swiper .swiper-button-prev,.swiper .swiper-button-next,.swiper .swiper-pagination{z-index:4}

    /* Related pair on desktop */
    @media (min-width:861px){.related-row{display:grid;grid-template-columns:1fr 1fr;gap:var(--gap,1.25rem)}}
    figure figcaption{font-size:.8rem;color:#345;margin-top:.35rem}
    figure figcaption a{color:#064;text-decoration:underline}
  /* Header / Hero */
  .hero-header {
    position: relative;
    border-bottom: 6px double var(--rope);
    background: #eaf6f6;
    z-index: 9000;
  }

  .navbar {
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    align-items: flex-end;
    gap: .6rem;
    padding: .5rem .9rem .35rem;
    position: relative;
    z-index: 2000;
    overflow: visible;
  }

  .brand {
    display: flex;
    align-items: flex-end;
    gap: .6rem;
  }

  .brand img {
    height: 28px;
    width: auto;
  }

  .version-badge {
    font-size: .72rem;
    opacity: .8;
    color: var(--text-muted);
  }

  .nav {
    flex: 1 1 auto;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: .5rem;
    white-space: nowrap;
    flex-wrap: nowrap;
    overflow: visible;
    padding-inline: .75rem;
  }

  @media (max-width: 768px) {
    .nav {
      justify-content: flex-start;
      overflow-x: auto;
      scrollbar-width: thin;
      -webkit-overflow-scrolling: touch;
    }

  }
  
    /* Navigation */
    .nav {
      flex: 1 1 auto;
      min-width: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      white-space: nowrap;
      flex-wrap: nowrap;
      overflow: visible;
      padding-inline: .75rem;
    }

    @media (max-width: 768px) {

    }
  
    /* Navigation */
    .nav {
      flex: 1 1 auto;
      min-width: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      white-space: nowrap;
      flex-wrap: nowrap;
      overflow: visible;
      padding-inline: .75rem;
    }

    @media (max-width: 768px) {

    }

    /* Hero section */
    .hero {
      position: relative;
      min-height: 320px;
      max-height: 520px;
      background: url('/assets/index_hero.webp') center/cover no-repeat;
      display: flex;
      align-items: flex-end;
      padding: 1rem;
    }

    .hero-title {
      position: absolute;
      left: min(3vw, 1rem);
      bottom: clamp(.6rem, 2vw, 1.4rem);
      z-index: 3;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: .3rem;
      text-shadow: 0 2px 6px rgba(0,0,0,.45);
    }

    .hero-title .logo {
      display: block;
      width: clamp(189px, 23.1vw, 378px);
      max-width: min(45vw, 520px);
      max-height: clamp(180px, 22vw, 320px);
      height: auto;
      object-fit: contain;
    }

    .hero-title .tagline {
      position: relative;
      font-weight: 700;
      letter-spacing: .2px;
      color: #e6f4f8;
      font-size: clamp(.9rem, 1.5vw, 1.35rem);
      white-space: nowrap;
      margin: 0;
      padding: 0;
    }
  </style>

  <!-- JSON-LD: FAQPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What dining options are available on Quantum of the Seas?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Quantum of the Seas offers complimentary dining including the main dining room and buffet. Specialty restaurants vary by ship class."
      }
    },
    {
      "@type": "Question",
      "name": "How do I find the deck plans for Quantum of the Seas?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Deck plans are available through the links on this page or on the Royal Caribbean website."
      }
    },
    {
      "@type": "Question",
      "name": "Where does Quantum of the Seas sail?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Ship deployments vary by season. Check the Royal Caribbean website for current itineraries."
      }
    }
  ]
}
  </script>

  <!-- LCP Optimization: Preload critical hero images -->
  <link rel="preload" as="image" href="/assets/logo_wake_560.png" fetchpriority="high"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg?v=3.010.302" fetchpriority="high"/>
</head>

<body class="page">
  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- ARIA Live Regions -->
  <div id="a11y-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  <div id="a11y-alerts" role="alert" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

  <!-- HEADER -->
  <header class="hero-header" role="banner">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
        <span class="tiny version-badge" aria-label="Site version 3.010.302">v3.010.302</span>
      </div>
            <nav class="site-nav" aria-label="Main site navigation">
        <a class="nav-pill" href="/">Home</a>

        <!-- Planning Dropdown -->
        <div class="nav-dropdown" id="nav-planning">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Planning <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/planning.html">Planning (overview)</a>
            <a href="/ships.html">Ships</a>
            <a href="/restaurants.html">Restaurants &amp; Menus</a>
            <a href="/ports.html">Ports</a>
            <a href="/drink-packages.html">Drink Packages</a>
            <a href="/drink-calculator.html">Drink Calculator</a>
            <a href="/stateroom-check.html">Stateroom Check</a>
            <a href="/cruise-lines.html">Cruise Lines</a>
            <a href="/packing-lists.html">Packing Lists</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-dropdown" id="nav-travel">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Travel <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/travel.html">Travel (overview)</a>
            <a href="/solo.html">Solo</a>
          </div>
        </div>

        <a class="nav-pill" href="/tools/port-tracker.html">Port Logbook</a>
        <a class="nav-pill" href="/tools/ship-tracker.html">Ship Logbook</a>
        <a class="nav-pill" href="/search.html">Search</a>
        <a class="nav-pill" href="/about-us.html">About</a>
      </nav>
      
    </div>

    <div class="hero" role="img" aria-label="Quantum of the Seas hero image">
      <div class="latlon-grid" aria-hidden="true">
        <svg viewBox="0 0 100 60" preserveAspectRatio="none">
          <g class="grid-lines" stroke-width="0.35">
            <line x1="10" y1="0" x2="10" y2="60"/><line x1="20" y1="0" x2="20" y2="60"/>
            <line x1="30" y1="0" x2="30" y2="60"/><line x1="40" y1="0" x2="40" y2="60"/>
            <line x1="50" y1="0" x2="50" y2="60"/><line x1="60" y1="0" x2="60" y2="60"/>
            <line x1="70" y1="0" x2="70" y2="60"/><line x1="80" y1="0" x2="80" y2="60"/>
            <line x1="90" y1="0" x2="90" y2="60"/>
            <line x1="0" y1="10" x2="100" y2="10"/><line x1="0" y1="20" x2="100" y2="20"/>
            <line x1="0" y1="30" x2="100" y2="30"/><line x1="0" y1="40" x2="100" y2="40"/>
          </g>
        </svg>
      </div>
      <img class="hero-compass" src="/assets/compass_rose.svg" alt="" aria-hidden="true"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
        <div class="tagline">A Cruise Traveler's Logbook</div>
      </div>
      <div class="hero-credit">
        <a class="pill long" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo by Flickers of Majesty — Instagram</a>
      </div>
    </div></header>

  <!-- MAIN CONTENT -->
  <main class="wrap page-grid" id="main-content" role="main" tabindex="-1" style="display: grid; grid-template-columns: 1fr; gap: 2rem; align-items: start;">
  <style>
    @media (min-width: 980px) {
      .page-grid {
        grid-template-columns: 1fr 360px !important;
      }
    }

    /* Vertical author card */
    .author-card-vertical {
      text-align: center;
    }

    .author-card-vertical .author-avatar {
      display: block;
      width: 96px;
      height: 96px;
      border-radius: 12px;
      object-fit: cover;
      margin: 0 auto 1rem;
    }

    .author-card-vertical h4 {
      margin: 0.5rem 0 0.25rem;
    }

    .author-card-vertical p {
      margin: 0.25rem 0;
    }

    /* Rail list */
    .rail-list {
      display: grid;
      gap: 1rem;
    }
  </style>

    <!-- Right Rail -->
    <aside class="rail" role="complementary" aria-label="Key facts, author & articles" style="grid-column: 2; grid-row: 1;">
      <!-- Quick Answer / Best For / Key Facts -->
      <section class="page-intro" style="margin: 0 0 1rem 0;">
        <p class="answer-line" style="margin: 0.75rem 0; padding: 0.5rem 0.75rem; border-left: 3px solid var(--rope, #d9b382); background: #f7fdff; border-radius: 8px;">
          <strong>Quick Answer:</strong> Quantum of the Seas is a Royal Caribbean ship. This page covers deck plans, live ship tracking, dining venues, and videos to help you plan your cruise.
        </p>

        <p class="fit-guidance" style="margin: 0.75rem 0; font-size: 0.95rem; color: #134; line-height: 1.6;">
          <strong>Best For:</strong> Cruisers researching Quantum of the Seas or comparing Royal Caribbean ships. Use this page to explore deck layouts, dining options, and onboard features before booking.
        </p>

        <div class="key-facts" style="margin: 1rem 0; padding: 1rem; background: #f7fdff; border-radius: 8px; border: 1px solid #e0f0f5;">
          <h3 style="margin: 0 0 0.5rem; font-size: 1rem; color: #134;">Key Facts</h3>
          <ul style="margin: 0; padding-left: 1.25rem;">
            <li><strong>Cruise Line:</strong> Royal Caribbean</li>
            <li><strong>Resources:</strong> Deck plans, dining venues, live tracker</li>
            <li><strong>Reservations:</strong> Book via cruise line or travel advisor</li>
          </ul>
        </div>
      </section>

      <!-- Author card (Vertical Layout) -->
      <section class="card author-card-vertical" aria-labelledby="author-heading">
        <h3 id="author-heading">About the Author</h3>
        <a href="/authors/ken-baker.html" aria-label="View Ken Baker's profile">
          <picture>
            <source srcset="/authors/img/ken1.webp?v=3.010.302" type="image/webp"/>
            <img class="author-avatar" src="/authors/img/ken1_96.webp" srcset="/authors/img/ken1_96.webp 1x, /authors/img/ken1_192.webp 2x" width="96" height="96" alt="Author photo" style="border-radius: 12px;" decoding="async" loading="lazy"/>
          </picture>
        </a>
        <h4><a href="/authors/ken-baker.html">Ken Baker</a></h4>
        <p class="tiny">Founder of In the Wake; writer and editor of the logbook.</p>
        <p class="tiny">
          <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a>
        </p>
      </section>

      <!-- Recent Articles rail -->
      <section class="card" aria-labelledby="recent-rail-title">
        <h3 id="recent-rail-title">Recent Stories</h3>
        <p class="tiny" style="margin-bottom: 1rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Real cruising experiences, practical guides, and heartfelt reflections from our community. Explore stories that inform, inspire, and connect.
        </p>
        <div id="recent-rail" class="rail-list" aria-live="polite"></div>
        <p id="recent-rail-fallback" class="tiny" style="display:none">Loading articles…</p>
      </section>
    </aside>

    <!-- Main Content Column -->
    <div style="grid-column: 1; grid-row: 1;">
      <h1 style="font-size: clamp(1.6rem, 3vw, 2.1rem); color: var(--sea); margin: 0.75rem 0 0.5rem;">Quantum of the Seas — Deck Plans, Live Tracker, Dining &amp; Videos</h1>

      <p style="margin: 0.75rem 0; font-size: 0.95rem; color: #134; line-height: 1.6;">
        Quantum of the Seas tends to suit tech-savvy cruisers and families seeking innovation with cutting-edge technology including North Star observation capsule, RipCord by iFLY skydiving simulator, Two70 transforming venue, and robot bartenders.
        It's ideal if you want Royal Caribbean's signature entertainment and service with groundbreaking experiences like virtual balconies and SeaPlex indoor sports complex.
        If you're looking for the absolute newest Icon class innovations or the massive scale of <a href="/ships.html#oasis-class">Oasis class</a>, you may want to explore those classes instead.
      </p>

  <!-- Row 1: First Look + Dining -->
    <section class="grid-2">
      <!-- First Look + Stats -->
      <section class="card" aria-labelledby="first-look">
        <h2 id="first-look">A First Look</h2>

        <div class="swiper firstlook" aria-label="Quantum of the Seas photo carousel">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <img src="/assets/ships/Quantum_of_the_Seas.webp" alt="Quantum of the Seas at sea" loading="lazy" decoding="async"/>
            </div>
            <div class="swiper-slide">
              <img src="/assets/ships/0016_Quantum_of_the_Seas.webp" alt="Quantum of the Seas exterior view" loading="lazy" decoding="async"/>
            </div>
            <div class="swiper-slide">
              <img src="/assets/ships/0018_Quantum_of_the_Seas_(2).webp" alt="Quantum of the Seas profile" loading="lazy" decoding="async"/>
            </div>
            <div class="swiper-slide">
              <img src="/assets/ships/Quantum_of_the_Seas_-_Wedel_04.webp" alt="Quantum of the Seas in port" loading="lazy" decoding="async"/>
            </div>
          </div>
          <div class="swiper-pagination" aria-hidden="true"></div>
          <div class="swiper-button-prev" aria-label="Previous image"></div>
          <div class="swiper-button-next" aria-label="Next image"></div>
        </div>

        <!-- Stats -->
        <section class="ship-stats card mini" aria-labelledby="statsHeading">
          <h3 id="statsHeading">Quantum at a Glance</h3>
          <div id="ship-stats" class="stats-grid" data-slug="quantum-of-the-seas"></div>
          <script type="application/json" id="ship-stats-fallback">
          {
  "slug": "quantum-of-the-seas",
  "name": "Quantum of the Seas",
  "class": "Quantum Class",
  "entered_service": 2014,
  "gt": "168,666 GT",
  "guests": "4,180 (double) ~4,819 (max)",
  "crew": "1,300",
  "length": "1,138 ft (347 m)",
  "beam": "162 ft (49.5 m)",
  "registry": "Bahamas"
}
          </script>
        </section>

        <!-- Sister Ships -->
        <section class="ship-stats card mini" aria-labelledby="sister-ships">
          <h3 id="sister-ships">Quantum Class — Sister Ships</h3>
          <p class="small" style="margin-bottom: 0.5rem;">Explore other ships in the <a href="/ships.html#quantum-class">Quantum Class</a> family:</p>
          <div class="related-pills" style="display: flex; gap: 0.5rem; flex-wrap: wrap; justify-content: center;">
            <a class="pill" href="/ships/rcl/anthem-of-the-seas.html">Anthem of the Seas</a>
            <a class="pill" href="/ships/rcl/ovation-of-the-seas.html">Ovation of the Seas</a>
            <a class="pill" href="/ships/rcl/spectrum-of-the-seas.html">Spectrum of the Seas</a>
            <a class="pill" href="/ships/rcl/odyssey-of-the-seas.html">Odyssey of the Seas</a>
          </div>
        </section>

        <!-- Ship Classes -->
        <section class="ship-stats card mini" aria-labelledby="ship-classes">
          <h3 id="ship-classes">Explore Royal Caribbean Ship Classes</h3>
          <p class="small" style="margin-bottom: 0.5rem;">Compare Quantum with other Royal Caribbean classes:</p>
          <div class="class-pills" style="display: flex; gap: 0.5rem; flex-wrap: wrap; justify-content: center;">
            <a class="pill" href="/cruise-lines/royal-caribbean.html#radiance">Radiance Class</a>
            <a class="pill" href="/cruise-lines/royal-caribbean.html#voyager">Voyager Class</a>
            <a class="pill" href="/cruise-lines/royal-caribbean.html#freedom">Freedom Class</a>
            <a class="pill" href="/cruise-lines/royal-caribbean.html#quantum">Quantum Class</a>
            <a class="pill" href="/cruise-lines/royal-caribbean.html#oasis">Oasis Class</a>
            <a class="pill" href="/cruise-lines/royal-caribbean.html#icon">Icon Class</a>
            <a class="pill" href="/cruise-lines/royal-caribbean.html#vision">Vision Class</a>
          </div>
        </section>
      </section>

      <!-- Dining -->
      <section id="dining-card" class="card" data-ship="Quantum of the Seas" aria-labelledby="diningHeading">
        <h2 id="diningHeading">Dining Venues on Quantum of the Seas</h2>

        <img id="dining-hero" class="card-hero"
             src="/assets/ships/rcl/quantum-of-the-seas/dining-hero.jpg?v=3.006"
             alt="Quantum dining venue seating with ocean view" loading="lazy"
             onerror="(function(img){var fb=[_abs('/assets/ships/quantum-of-the-seas-dining.webp?v=3.006','/assets/ships/quantum-of-the-seas-dining.jpg?v=3.006'),_abs('/assets/img/Cordelia_Empress_Food_Court.webp','/assets/img/Cordelia_Empress_Food_Court.jpg')];img._fbi=(img._fbi||0);if(img._fbi<fb.length){img.src=fb[img._fbi++];}})(this)"/>

        <div class="dining-content" id="dining-content" aria-live="polite"></div>

        <!-- normalize dining data source to venues.json on this origin -->
        <script type="application/json" id="dining-data-source">{"provider":"rcl","json":"/assets/data/venues-v2.json","ship_slug":"quantum-of-the-seas","aliases":["Quantum of the Seas","Quantum Of The Seas","Quantum"]}</script>
        <script>
        (function fixDiningJSON(){
          function run(){
            const el=document.getElementById('dining-data-source'); if(!el) return;
            try{
              const obj=JSON.parse(el.textContent||'{}');
              if(obj){
                const path='/assets/data/venues.json';
                obj.json=(typeof _abs==='function')?_abs(path):path;
                obj.url=obj.json;
                obj.schema='rc.venues.v1';
                el.textContent=JSON.stringify(obj);
              }
            }catch(_){}
          }
          if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',run,{once:true});} else { run(); }
        })();
        </script>

        <script>
        // window.getShipVenues(slug) helper
        (function(){
          const DATA_PATH='/assets/data/venues.json';
          const DATA_URL=(typeof _abs==='function')?_abs(DATA_PATH):DATA_PATH;
          let _cache=null,_pending=null,_venuesIndex=null,_ships=null;

          function load(){
            if(_cache) return Promise.resolve(_cache);
            if(_pending) return _pending;
            _pending=fetch(DATA_URL,{credentials:'omit',referrerPolicy:'no-referrer'}).then(r=>r.json()).then(json=>{
              if(!json||!Array.isArray(json.venues)||!json.ships) throw new Error('Invalid venues.json shape');
              _venuesIndex=Object.fromEntries(json.venues.map(v=>[v.slug,v]));
              _ships=json.ships; _cache=json; return json;
            }).finally(()=>{_pending=null;});
            return _pending;
          }
          async function getShipVenues(shipSlug){
            const data=await load(); const ship=_ships[shipSlug];
            if(!ship) return {meta:data.meta||{},ship:null,venues:[]};
            const venues=(ship.venues||[]).map(slug=>{
              const v=_venuesIndex[slug];
              return v?Object.assign({slug},v):{slug,name:slug,category:'unknown'};
            });
            return {meta:data.meta||{},ship,venues};
          }
          window.getShipVenues=getShipVenues;
        })();
        </script>

        <p class="tiny">Prices can change at any time. These reflect the last sailing captured.</p>
      </section>
    </section>

    <!-- Logbook -->
    <section class="card note-kens-logbook" aria-labelledby="logbook">
      <h2 id="logbook">The Logbook — Tales From the Wake</h2>
      <div id="logbook-stories" class="prose"></div>
    </section>

    <!-- Videos -->
    <section class="card" aria-labelledby="video-highlights">
      <h2 id="video-highlights">Watch: Quantum Highlights</h2>
      <p class="small">Swipe through ship walkthroughs, top-10s, and stateroom tours (including accessible where available).</p>
      <div class="swiper videos" aria-label="Featured video carousel">
        <div class="swiper-wrapper" id="featuredVideos"></div>
        <div class="swiper-pagination" aria-hidden="true"></div>
        <div class="swiper-button-prev" aria-label="Previous slide"></div>
        <div class="swiper-button-next" aria-label="Next slide"></div>
      </div>
      <div id="videoFallback" class="tiny hidden">Videos will appear once our sources sync for this ship.</div>
    </section>

    <!-- Live Ship Tracker -->
    <section class="card itinerary" aria-labelledby="liveTrackHeading" data-imo="9549463" data-name="QUANTUM-OF-THE-SEAS">
      <h2 id="liveTrackHeading">Where Is Quantum Right Now?</h2>
      <p>See the ship's current position, speed, and next port on a live tracker.</p>

      <div id="vf-tracker-container" style="width:100%;height:500px;position:relative;"></div>
      <p class="tiny">See <a href="/ports.html">ports</a> for more information about individual ports.</p>
    </section>

    <!-- Deck Plans -->
    <section class="card" aria-labelledby="deck-plans">
      <h2 id="deck-plans">Ship Map (Deck Plans)</h2>
      <p><a class="btn" href="https://www.royalcaribbean.com/cruise-ships/quantum-of-the-seas/deck-plans" target="_blank" rel="noopener">Open Official Deck Plans →</a></p>
      <figure>
        <img src="/assets/ship-map.png" alt="Quantum of the Seas simplified deck plan preview" loading="lazy"/>
      </figure>
    </section>

    <!-- FAQ Section -->
    <section class="card" aria-labelledby="faq-heading">
      <h2 id="faq-heading">Frequently Asked Questions</h2>

      <details style="margin: 0.75rem 0; padding: 0.5rem 0; border-bottom: 1px solid var(--rope);">
        <summary style="cursor: pointer; font-weight: 600; padding: 0.5rem 0;">What makes Quantum of the Seas unique?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">Quantum of the Seas features innovative attractions including the North Star observation capsule, RipCord by iFLY skydiving simulator, Two70 entertainment venue, and robot bartenders at the Bionic Bar. It's part of Royal Caribbean's Quantum Class, known for technological innovation.</p>
      </details>

      <details style="margin: 0.75rem 0; padding: 0.5rem 0; border-bottom: 1px solid var(--rope);">
        <summary style="cursor: pointer; font-weight: 600; padding: 0.5rem 0;">How many passengers does Quantum of the Seas hold?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">Quantum of the Seas accommodates 4,180 guests at double occupancy, with a maximum capacity of approximately 4,819 passengers. The ship has a crew of 1,300.</p>
      </details>

      <details style="margin: 0.75rem 0; padding: 0.5rem 0; border-bottom: 1px solid var(--rope);">
        <summary style="cursor: pointer; font-weight: 600; padding: 0.5rem 0;">What dining options are available?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">The ship offers complimentary dining including the Main Dining Room and Windjammer Marketplace buffet. Specialty dining venues require additional fees. Check the dining section above for current menus and pricing.</p>
      </details>

      <details style="margin: 0.75rem 0; padding: 0.5rem 0;">
        <summary style="cursor: pointer; font-weight: 600; padding: 0.5rem 0;">Where does Quantum of the Seas sail?</summary>
        <p style="margin: 0.5rem 0; padding-left: 1rem;">Quantum of the Seas operates global itineraries including Alaska, Asia-Pacific, and Australia routes. Check the live tracker above for current position and Royal Caribbean's website for upcoming deployment schedules.</p>
      </details>
    </section>

    <section class="card attributions">
      <h2>Image Attributions</h2>
      <ul>
        <li>
          "Quantum of the Seas" via
          <a href="https://commons.wikimedia.org/wiki/File:Quantum_of_the_Seas.jpg" target="_blank" rel="noopener">Wikimedia Commons</a> —
          licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">CC BY-SA 4.0</a>.
        </li>
        <li>
          "Quantum of the Seas - Wedel 04" via
          <a href="https://commons.wikimedia.org/wiki/File:Quantum_of_the_Seas_-_Wedel_04.jpg" target="_blank" rel="noopener">Wikimedia Commons</a> —
          licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">CC BY-SA 4.0</a>.
        </li>
        <li>
          "0016 Quantum of the Seas" by <a href="https://commons.wikimedia.org/wiki/User:Ein_Dahmer" target="_blank" rel="noopener">Ein Dahmer</a> via
          <a href="https://commons.wikimedia.org/wiki/File:0016_Quantum_of_the_Seas.jpg" target="_blank" rel="noopener">Wikimedia Commons</a> —
          licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">CC BY-SA 4.0</a>.
        </li>
        <li>
          "0018 Quantum of the Seas (2)" by <a href="https://commons.wikimedia.org/wiki/User:Ein_Dahmer" target="_blank" rel="noopener">Ein Dahmer</a> via
          <a href="https://commons.wikimedia.org/wiki/File:0018_Quantum_of_the_Seas_(2).jpg" target="_blank" rel="noopener">Wikimedia Commons</a> —
          licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener">CC BY-SA 4.0</a>.
        </li>
      </ul>
    </section>

    </div><!-- Close main content column -->

</main>

  <!-- FOOTER -->
    <footer class="wrap" role="contentinfo">
    <p>© 2025 In the Wake · A Cruise Traveler's Logbook · All rights reserved.</p>
    <p class="tiny" style="margin-top: 0.5rem;">
      <a href="/privacy.html">Privacy</a> ·
      <a href="/terms.html">Terms</a> ·
      <a href="/about-us.html">About</a> ·
      <a href="/accessibility.html">Accessibility &amp; WCAG 2.1 AA Commitment</a>
    </p>
    <p class="tiny center" style="opacity:0;position:absolute;pointer-events:none;" aria-hidden="true">Soli Deo Gloria — Every pixel and part of this project is offered as worship to God, in gratitude for the beautiful things He has created for us to enjoy. ✝️</p>
  </footer>

  <!-- JAVASCRIPT -->
  
<!-- ===== First Look init ===== -->
  <script>
  (function initFirstLook(){
    function go(){
      if(!window.__swiperReady||!window.Swiper) return setTimeout(go,120);
      try{
        new Swiper('.swiper.firstlook',{
          loop:false,lazy:true,watchOverflow:true,
          pagination:{el:'.swiper.firstlook .swiper-pagination',clickable:true},
          navigation:{nextEl:'.swiper.firstlook .swiper-button-next',prevEl:'.swiper.firstlook .swiper-button-prev'},
          a11y:{enabled:true}
        });
      }catch(_){}
    }
    go();
  })();
  </script>

  <!-- ===== Logbook loader (safe absolute fetch + a11y carousel) ===== -->
  <script>
  (function initShipLogbook(){
    const mount=document.getElementById('logbook-stories'); if(!mount) return;
    function norm(s){return String(s||'').toLowerCase().replace(/'/g,"'").trim();}
    function abs(p){return (window._abs?_abs(p):p);}
    function clamp(n,a,b){return Math.max(a,Math.min(b,n));}
    function getShipContext(){
      const stats=document.getElementById('ship-stats');
      const attrSlug=(stats&&stats.getAttribute('data-slug'))||'';
      const m=location.pathname.match(/\/ships\/([^/]+)\/([^/.]+)/i);
      const line=(m&&m[1])||'rcl'; const inferred=(m&&m[2])||'';
      return {line:line.toLowerCase(),slug:(attrSlug||inferred||'quantum-of-the-seas').toLowerCase()};
    }
    const ctx=getShipContext();
    const shortSlug=ctx.slug.split('-of-the-')[0]; const SOURCES=[abs('/ships/'+ctx.line+'/assets/'+ctx.slug+'.json'),abs('/ships/'+ctx.line+'/assets/'+shortSlug+'.json'),abs('/assets/data/logbook/'+ctx.line+'/'+ctx.slug+'.json'),abs('/assets/data/ships/'+ctx.line+'/'+ctx.slug+'.json')];
    function fetchFirst(i){i=i||0; if(i>=SOURCES.length) return Promise.resolve(null);
      return fetch(SOURCES[i],{cache:'no-store'}).then(r=>r.ok?r.json():fetchFirst(i+1)).catch(()=>fetchFirst(i+1));}
    function mdToHtml(src){let html=String(src||'').trim(); if(!html) return '';
      html=html.replace(/^###?\s+(.+)$/gm,'<h3>$1</h3>').replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>').replace(/\*(.+?)\*/g,'<em>$1</em>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>');
      html='<p>'+html.replace(/\n{2,}/g,'</p><p>').replace(/\n/g,'<br/>')+'</p>'; return html.replace(/^<p>\s*<\/p>/,'');}
    const state={i:0,items:[]};
    function renderOne(p){const title=String(p.title||p.persona_label||p.heading||'Guest Perspective').replace(/</g,'&lt;');
      const body=String(p.markdown||p.body||p.content||p.html||p.text||p.story||p.notes||'').trim(); if(!body) return '';
      return '<article class="story" aria-live="polite"><h3 tabindex="0">'+title+'</h3><div class="story-body">'+mdToHtml(body)+'</div></article>';}
    function ensureNav(){
      if(document.getElementById('logbook-nav')) return;
      const nav=document.createElement('nav'); nav.id='logbook-nav'; nav.className='logbook-nav'; nav.setAttribute('aria-label','Logbook navigation');
      const prev=document.createElement('button'); prev.type='button'; prev.className='logbook-btn logbook-prev'; prev.textContent='‹ Previous'; prev.setAttribute('aria-label','Previous story');
      const next=document.createElement('button'); next.type='button'; next.className='logbook-btn logbook-next'; next.textContent='Next ›'; next.setAttribute('aria-label','Next story');
      nav.append(prev,next); mount.before(nav);
      prev.onclick=()=>{ state.i=clamp(state.i-1,0,state.items.length-1); renderCurrent(); };
      next.onclick=()=>{ state.i=clamp(state.i+1,0,state.items.length-1); renderCurrent(); };
    }
    function renderCurrent(){
      const i=state.i,arr=state.items; if(!arr.length){mount.innerHTML='<p class="tiny">No logbook entries yet.</p>'; return;}
      const html=renderOne(arr[i]); mount.innerHTML=html;
      const nav=document.getElementById('logbook-nav'); if(!nav) return;
      nav.querySelector('.logbook-prev').disabled=(i===0);
      nav.querySelector('.logbook-next').disabled=(i===arr.length-1);
    }
    fetchFirst().then(data=>{
      if(!data) return;
      const arr=data.personas||data.perspectives||data.logbook||data.stories||data.entries||[];
      if(!arr.length) return;
      state.items=arr; state.i=0; ensureNav(); renderCurrent();
    });
  })();
  </script>

  <!-- ===== Video carousel loader ===== -->
  <script>
  (function initVideos(){
    const mount=document.getElementById('featuredVideos'); if(!mount) return;
    const fallback=document.getElementById('videoFallback');
    function abs(p){return (window._abs?_abs(p):p);}
    function getVideoURL(videoId,provider){
      if(!videoId) return null;
      if(provider==='youtube'||!provider) return 'https://www.youtube-nocookie.com/embed/'+videoId+'?rel=0&modestbranding=1';
      if(provider==='vimeo') return 'https://player.vimeo.com/video/'+videoId+'?title=0&byline=0&portrait=0';
      return null;
    }
    function renderVideos(arr){
      if(!arr||!arr.length){ if(fallback) fallback.classList.remove('hidden'); return; }
      mount.innerHTML=arr.map(v=>{
        const url=getVideoURL(v.videoId,v.provider); if(!url) return '';
        const title=String(v.title||'Quantum of the Seas').replace(/</g,'&lt;');
        return '<div class="swiper-slide"><iframe src="'+url+'" title="'+title+'" allow="encrypted-media" allowfullscreen loading="lazy"></iframe></div>';
      }).join('');
      if(mount.children.length&&window.__swiperReady&&window.Swiper){
        setTimeout(()=>{
          try{
            new Swiper('.swiper.videos',{
              loop:false,lazy:true,watchOverflow:true,
              pagination:{el:'.swiper.videos .swiper-pagination',clickable:true},
              navigation:{nextEl:'.swiper.videos .swiper-button-next',prevEl:'.swiper.videos .swiper-button-prev'},
              a11y:{enabled:true}
            });
          }catch(_){}
        },150);
      }
    }
    function fetchVideoData(){
      const SOURCES=[abs('/assets/data/videos/quantum-of-the-seas.json'),abs('/ships/rcl/assets/quantum-of-the-seas-videos.json')];
      function tryFetch(i){i=i||0; if(i>=SOURCES.length) return Promise.resolve(null);
        return fetch(SOURCES[i],{cache:'no-store'}).then(r=>r.ok?r.json():tryFetch(i+1)).catch(()=>tryFetch(i+1));}
      return tryFetch();
    }
    fetchVideoData().then(data=>{ if(data) renderVideos(data.videos||data); });
  })();
  </script>

  <!-- ===== Fun Distance Units Converter ===== -->
  <script src="/assets/js/fun-distance-units.js" defer></script>

  <!-- ===== Ship stats loader ===== -->
  <script>
  (function initStats(){
    const mount=document.getElementById('ship-stats'); if(!mount) return;
    const fallbackEl=document.getElementById('ship-stats-fallback');
    function abs(p){return (window._abs?_abs(p):p);}
    function renderStats(obj){
      if(!obj) return;
      const keys=['class','entered_service','gt','guests','crew','length','beam','registry'];
      const labels={class:'Class',entered_service:'Entered Service',gt:'Gross Tonnage',guests:'Guests',crew:'Crew',length:'Length',beam:'Beam',registry:'Registry'};
      mount.innerHTML=keys.map(k=>{
        const val=obj[k]; if(!val) return '';
        let statHtml = '<div class="stat-line"><span class="stat-key">'+labels[k]+'</span><span class="stat-val">'+String(val).replace(/</g,'&lt;')+'</span>';

        // Add fun distance conversions for length and beam
        if((k==='length'||k==='beam') && window.funDistance){
          const feetMatch = String(val).match(/(\d+(?:,\d+)?)\s*(?:ft|feet)/i);
          if(feetMatch){
            const feet = parseInt(feetMatch[1].replace(/,/g,''));
            const conversion = k==='length' ? window.funDistance.shipLength(feet) : window.funDistance.shipBeam(feet);
            if(conversion && (conversion.practical || conversion.absurd)){
              const parts = [];
              if(conversion.practical) parts.push(conversion.practical);
              if(conversion.absurd) parts.push(conversion.absurd);
              if(parts.length > 0){
                statHtml += '<span class="stat-fun">'+parts.join(', or ')+'</span>';
              }
            }
          }
        }

        statHtml += '</div>';
        return statHtml;
      }).join('');
    }
    if(fallbackEl){
      try{ const fb=JSON.parse(fallbackEl.textContent||'{}'); if(fb) renderStats(fb); }catch(_){}
    }
    const SOURCES=[abs('/assets/data/ships/quantum-of-the-seas.json'),abs('/ships/rcl/assets/quantum-of-the-seas.json')];
    function tryFetch(i){i=i||0; if(i>=SOURCES.length) return Promise.resolve(null);
      return fetch(SOURCES[i],{cache:'no-store'}).then(r=>r.ok?r.json():tryFetch(i+1)).catch(()=>tryFetch(i+1));}
    tryFetch().then(data=>{ if(data) renderStats(data); });
  })();
  </script>

  <!-- ===== Dining loader ===== -->
  <script>
  (function initDining(){
    const mount=document.getElementById('dining-content'); if(!mount) return;
    const sourceEl=document.getElementById('dining-data-source');
    if(!sourceEl) return;
    function abs(p){return (window._abs?_abs(p):p);}
    let config={};
    try{ config=JSON.parse(sourceEl.textContent||'{}'); }catch(_){}
    function renderVenues(ship,venues){
      if(!venues||!venues.length){ mount.innerHTML='<p class="tiny">Dining data is loading...</p>'; return; }
      const byCategory={};
      venues.forEach(v=>{
        const cat=v.category||'other';
        if(!byCategory[cat]) byCategory[cat]=[];
        byCategory[cat].push(v);
      });
      const catOrder=['mdr','specialty','casual','bar'];
      const catLabels={mdr:'Main Dining Room',specialty:'Specialty Dining',casual:'Casual Dining',bar:'Bars & Lounges',other:'Other Venues'};
      let html='';
      catOrder.concat(Object.keys(byCategory).filter(c=>!catOrder.includes(c))).forEach(cat=>{
        const arr=byCategory[cat]; if(!arr) return;
        html+='<h3>'+catLabels[cat]+'</h3><ul class="venues-list">';
        arr.forEach(v=>{
          const name=String(v.name||v.slug).replace(/</g,'&lt;');
          const desc=String(v.description||'').replace(/</g,'&lt;');
          const price=(v.price||v.cost)?'<span class="venue-price">'+(v.price||v.cost)+'</span>':'';
          const slug=v.slug?String(v.slug).replace(/</g,'&lt;'):'';
          const nameLink=slug?'<a href="'+abs('/restaurants/'+slug+'.html')+'">'+name+'</a>':name;
          html+='<li><strong>'+nameLink+'</strong>'+price+(desc?' — '+desc:'')+'</li>';
        });
        html+='</ul>';
      });
      mount.innerHTML=html;
    }
    if(typeof window.getShipVenues==='function'){
      const slug=config.ship_slug||'quantum-of-the-seas';
      window.getShipVenues(slug).then(result=>{
        if(result&&result.venues) renderVenues(result.ship,result.venues);
      }).catch(()=>{});
    }
  })();
  </script>

    <!-- ===== Live tracker (CruiseMapper iframe: auto-centers on ship by IMO) ===== -->
  <script>
  (function initLiveTracker(){
    const card=document.querySelector('.card.itinerary[data-imo]');
    if(!card) return;
    const imo=card.getAttribute('data-imo');
    const container=document.getElementById('vf-tracker-container');
    if(!imo||!container) return;

    // Create wrapper div
    const wrapper = document.createElement('div');
    wrapper.style.cssText = 'width:100%;height:500px;position:relative;background:#f0f4f8;border-radius:8px;overflow:hidden;';

    // CruiseMapper iframe embed using IMO
    const iframe = document.createElement('iframe');
    iframe.style.cssText = 'width:100%;height:100%;border:0;';
    iframe.title = 'Live ship tracker for ' + card.getAttribute('data-name');
    iframe.setAttribute('loading', 'lazy');
    iframe.src = 'https://www.cruisemapper.com/?imo=' + imo;

    wrapper.appendChild(iframe);
    container.appendChild(wrapper);
  })();
  </script>

  <script>
  (function(){
    "use strict";

    /* ===== Recent Articles Rail ===== */
    (async function recentRail(){
      const rail = document.getElementById('recent-rail');
      if(!rail) return;

      const fallback = document.getElementById('recent-rail-fallback');
      if(fallback) fallback.style.display = '';

      async function fetchJSONWithFallback(urls){
        for (const u of urls){
          try{
            const res = await fetch(u, { credentials: 'omit', cache: 'no-cache' });
            if (res.ok) return await res.json();
          }catch(err){

          }
        }
        return null;
      }

      const pick = (obj, keys, fallback=null)=>{ for(const k of keys){ if(obj && obj[k] != null) return obj[k]; } return fallback; };

      function setImageWithFallback(imgEl, primary, altPaths=[]){
        if(!imgEl) return;
        const stamp='v=3.010.302';
        const tried=new Set();
        const queue=[primary,...altPaths].filter(Boolean).map(p => p.includes('?')?p+'&'+stamp:p+'?'+stamp);
        function tryNext(){
          const next=queue.shift();
          if(!next){ imgEl.removeAttribute && imgEl.removeAttribute('onerror'); return; }
          if(tried.has(next)) return tryNext();
          tried.add(next);
          imgEl.src=next;
        }
        imgEl.onerror=tryNext;
        tryNext();
      }

      const raw = await fetchJSONWithFallback(['/assets/data/articles/index.json','/assets/data/articles.json']);
      if(!raw) {
        if(fallback) {
          fallback.textContent = 'Unable to load articles';
          fallback.style.display = '';
        }
        return;
      }

      const items = Array.isArray(raw?.articles) ? raw.articles : (Array.isArray(raw) ? raw : []);
      if(!items.length) return;

      const here = location.pathname.replace(/\/+$/,'');
      const view = items.filter(p=>{
        const href = pick(p,['url','path'],'#');
        const norm = (href||'').replace(/\/+$/,'');
        return norm && norm !== here;
      }).slice(0,6);

      rail.innerHTML = view.map(p=>{
        const title = pick(p,['title','name'],'Article');
        const href  = pick(p,['url','path'],'#');
        const excerpt = pick(p,['excerpt','description'],'');
        return `
          <article class="card" style="display:flex;flex-direction:column;gap:.75rem;padding:.85rem">
            <div style="display:grid;grid-template-columns:80px 1fr;gap:.75rem;align-items:start">
              <div style="width:80px;height:60px;overflow:hidden;border-radius:8px;background:#eef4f6;border:1px solid #dfe7ea;flex-shrink:0">
                <img class="article-thumb" alt="" decoding="async" loading="lazy" style="width:100%;height:100%;object-fit:cover">
              </div>
              <div>
                <h4 style="margin:0 0 .35rem 0;font-size:.9rem;line-height:1.3;font-weight:600">
                  <a href="${href}" style="color:var(--accent,#0e6e8e);text-decoration:none">${title}</a>
                </h4>
                ${excerpt ? `<p class="tiny" style="margin:0;line-height:1.4;color:var(--ink-mid,#3d5a6a)">${excerpt}</p>` : ''}
              </div>
            </div>
            <a href="${href}" class="pill" style="align-self:flex-start;font-size:.85rem;padding:.45rem .95rem;text-decoration:none">Read Article →</a>
          </article>`;
      }).join('');

      const cards = [...rail.querySelectorAll('article.card')];
      cards.forEach((card,i)=>{
        const p = view[i] || {};
        const el = card.querySelector('img.article-thumb');
        const href  = (pick(p,['url','path'],'')||'').toLowerCase();
        const title = (pick(p,['title','name'],'')||'').toLowerCase();

        let primary = pick(p, ['thumb','thumbnail','image','cover','img'], null);

        // FORCE override for Top-20
        if (/(top-20|first-?cruise-?questions)/.test(href) || /top\s*20.*first.*cruise.*questions/.test(title)){
          primary = '/assets/articles/thumbs/top-20-questions/cover.webp';
        }
        // Friendly specifics
        if(!primary && (/freedom-of-your-own-wake/.test(href) || /freedom of your own wake/.test(title))){
          primary = '/assets/articles/thumbs/freedom-of-your-own-wake.webp';
        }
        if(!primary && (/why-i-started-solo-cruising/.test(href) || /why i started solo cruising/.test(title))){
          primary = '/assets/articles/thumbs/why-i-started-solo-cruising.webp';
        }
        if(!primary && (/\/travel(\.html)?$/.test(href) || /\btravel\b/.test(title))){
          primary = '/assets/articles/travel/cover.jpg';
        }

        // Heuristic fallback
        if(!primary){
          const slugify = s => (s||'').toLowerCase().replace(/https?:\/\/[^/]+/,'').replace(/[#?].*$/,'').split('/').filter(Boolean).pop()||'';
          const guess = slugify(href) || slugify(title);
          if(guess) primary = `/assets/articles/${guess}/cover.jpg`;
        }

        const alts = [];
        if(primary){
          const base = primary.replace(/\.(jpg|jpeg|png|webp)$/i,'');
          alts.push(`${base}.jpeg`, `${base}.JPG`, `${base}.webp`, `${base}.png`);
        }
        setImageWithFallback(el, primary || '/assets/index_hero.webp', alts);
      });

      if(fallback) fallback.style.display = 'none';

      // Announce to screen readers
      const status = document.getElementById('a11y-status');
      if(status) {
        status.textContent = `${view.length} recent articles loaded`;
      }
    })();
  })();
  </script>
  <!-- Navigation dropdown functionality (New Clean Implementation) -->
  <script>
  (function() {
    'use strict';
    var dropdowns = document.querySelectorAll('.nav-dropdown');
    function toggleDropdown(dropdown) {
      var isOpen = dropdown.classList.contains('open');
      closeAllDropdowns();
      if (!isOpen) {
        dropdown.classList.add('open');
        var btn = dropdown.querySelector('button');
        if (btn) btn.setAttribute('aria-expanded', 'true');
      }
    }
    function closeAllDropdowns() {
      dropdowns.forEach(function(dd) {
        dd.classList.remove('open');
        var btn = dd.querySelector('button');
        if (btn) btn.setAttribute('aria-expanded', 'false');
      });
    }
    dropdowns.forEach(function(dropdown) {
      var btn = dropdown.querySelector('button');
      if (btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          toggleDropdown(dropdown);
        });
        btn.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') { closeAllDropdowns(); btn.focus(); }
          if (e.key === 'ArrowDown') {
            e.preventDefault();
            dropdown.classList.add('open');
            btn.setAttribute('aria-expanded', 'true');
            var firstLink = dropdown.querySelector('.dropdown-menu a');
            if (firstLink) firstLink.focus();
          }
        });
      }
      var menu = dropdown.querySelector('.dropdown-menu');
      if (menu) {
        menu.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') { closeAllDropdowns(); if (btn) btn.focus(); }
        });
      }
    });
    document.addEventListener('click', function(e) {
      var isInsideDropdown = false;
      dropdowns.forEach(function(dd) { if (dd.contains(e.target)) isInsideDropdown = true; });
      if (!isInsideDropdown) closeAllDropdowns();
    });
  })();
  </script>
</body>
</html>
