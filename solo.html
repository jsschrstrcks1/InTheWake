<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="referrer" content="no-referrer">
  <meta name="theme-color" content="#0e6e8e">
  <meta name="version" content="3.006.solo.008"/>

  <title>Solo Travel — In the Wake</title>

  <script>
  (function(){
    var wantHost = "cruisinginthewake.com";
    var h = location.hostname.toLowerCase();
    var isHttps = (location.protocol === "https:");
    if (h !== wantHost || !isHttps) {
      location.replace("https://" + wantHost + location.pathname + location.search + location.hash);
    }
  })();
  </script>

  <link rel="canonical" href="https://cruisinginthewake.com/solo.html"/>

  <!-- Same-origin so cache-buster can touch it -->
  <link rel="stylesheet" href="/assets/styles.css"/>

  <!-- Preconnects -->
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="preconnect" href="https://cloud.umami.is" crossorigin>
  <link rel="preconnect" href="https://cdn.consentmanager.net" crossorigin>
  <link rel="preconnect" href="https://www.youtube-nocookie.com" crossorigin>
  <link rel="preconnect" href="https://i.ytimg.com" crossorigin>

  <!-- Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WZP891PZXJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-WZP891PZXJ');
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>

  <!-- Accessibility (deferred) -->
  <script defer src="https://cdn.consentmanager.net/delivery/js/accessibility.min.js"
    data-acc-accid="774c13e29978"
    data-acc-host="delivery.consentmanager.net"
    data-acc-cdn="cdn.consentmanager.net"></script>

  <!-- Absolute URL helper -->
  <script>
  (function(){
    const ORIGIN=(location.origin||(location.protocol+'//'+location.host)).replace(/\/$/,'');
    window._abs=function(p){p=String(p||''); if(!p.startsWith('/')) p='/'+p; return ORIGIN+p;};
  })();
  </script>

  <!-- Cache-Buster (same-origin CSS/JS only) -->
  <script>
  (function(){
    const VER = (document.querySelector('meta[name="version"]')?.content ||
                 new Date().toISOString().slice(0,10).replace(/-/g,""));
    const ORIGIN = (location.origin || (location.protocol+'//'+location.host));
    function sameOrigin(u){ try{ return new URL(u, ORIGIN).origin === ORIGIN; }catch(_){ return false; } }
    for(const el of document.querySelectorAll('link[rel="stylesheet"], script[src]')){
      const url = el.href || el.src;
      if(!url || !sameOrigin(url) || url.includes('?v=')) continue;
      const bust = url + (url.includes('?') ? '&' : '?') + 'v=' + VER;
      if(el.tagName==='LINK') el.href = bust; else el.src = bust;
    }
  })();
  </script>

  <!-- Social defaults (CollectionPage) -->
  <meta name="description" content="Solo cruising tips, faith-scented reflections, and practical guides from real sailings.">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Solo Travel — In the Wake">
  <meta property="og:description" content="Solo cruising tips, faith-scented reflections, and practical guides from real sailings.">
  <meta property="og:url" content="https://cruisinginthewake.com/solo.html">
  <meta property="og:image" content="https://cruisinginthewake.com/assets/index_hero.jpg">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Schema.org: CollectionPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"CollectionPage",
    "name":"Solo Travel — In the Wake",
    "url":"https://cruisinginthewake.com/solo.html",
    "isPartOf":{"@type":"WebSite","name":"In the Wake","url":"https://cruisinginthewake.com"}
  }
  </script>

  <!-- Page CSS fixes -->
  <style id="brand-title-hide">.brand-title{display:none!important}</style>

  <!-- Hero vibrancy -->
  <style id="hero-vibrancy">
    .hero{
      background:url('/assets/index_hero.jpg') center/cover no-repeat!important;
      filter:saturate(1.2) contrast(1.08) brightness(1.03)
    }
    .hero::before,.hero::after{content:none!important}
  </style>

  <!-- Hero photo credit -->
  <style id="hero-credit-css">
    .hero{position:relative}
    .hero-credit{
      position:absolute; right:12px; bottom:10px; background:rgba(255,255,255,.9);
      padding:.3rem .55rem; border-radius:.5rem; font-size:.85rem;
      box-shadow:0 2px 6px rgba(0,0,0,.12)
    }
  </style>

  <!-- Page watermark (behind cards) -->
  <style id="page-watermark">
    body::before{
      content:""; position:fixed; inset:0;
      background:url('/assets/watermark.png?v=3.007.070') center right/520px auto no-repeat;
      opacity:.10; pointer-events:none; z-index:0
    }
    .wrap,.cards,.card{position:relative; z-index:1}
  </style>

  <!-- Nav pills: use existing .pill-nav.pills, plus emphasize current -->
  <style id="nav-pills-emphasis">
    .nav.pill-nav.pills a[aria-current="page"],
    .nav.pill-nav.pills a.is-current{
      border:2px solid rgba(14,110,142,.35);
      background:rgba(14,110,142,.06);
      font-weight:700;
    }
  </style>

  <!-- A11y no-overlap shim for restored share bar -->
  <style>html.a11y-launcher-present{--share-bar-bottom:84px}</style>
  <script>
  (function(){
    new MutationObserver(function(){
      document.documentElement.classList.add('a11y-launcher-present');
    }).observe(document.documentElement,{subtree:true,childList:true});
  })();
  </script>

  <!-- Restored floating share bar -->
  <script defer src="/assets/js/share-bar.js?v=3.006.solo.008"></script>

  <!-- Standards Invocation (docstring) -->
  <!-- EVERY-PAGE v3.002 · SOLO-MODULE v3.006.solo.008 · SHIP-PAGE v3.006 · RCL-ADDENDUM v3.006.006 -->
</head>
<body class="page">
  <a href="#content" class="skip-link">Skip to main content</a>

  <header class="hero-header">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake.png" alt="In the Wake wordmark"/>
      </div>
      <!-- Pill nav enabled -->
      <nav class="nav pill-nav pills" aria-label="Primary">
        <a href="/">Home</a>
        <a href="/ships/ships.html">Ships</a>
        <a href="/restaurants.html">Restaurants &amp; Menus</a>
        <a href="/ports.html">Ports</a>
        <a href="/disability.html">Disability at Sea</a>
        <a href="/drinks.html">Drink Packages</a>
        <a href="/packing.html">Packing Lists</a>
        <a href="/planning.html">Planning</a>
        <a href="/solo.html" aria-current="page">Solo Travel</a>
        <a href="/travel.html">Travel Tips</a>
        <a href="/cruise-lines.html">Cruise Lines</a>
        <a href="/about-us.html">About Us</a>
      </nav>
    </div>

    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="latlon-grid" aria-hidden="true"></div>
      <img class="hero-compass" src="/assets/compass_rose.svg" alt="" aria-hidden="true"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake.png" alt="In the Wake">
        <div class="tagline">A Cruise Traveler’s Logbook</div>
      </div>
      <div class="hero-credit">
        Photo © <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a> ·
        <a href="https://instagram.com/flickersofmajesty" target="_blank" rel="noopener">Instagram</a>
      </div>
    </div>
  </header>

  <main class="wrap layout" id="content" role="main">
    <div class="maincol">
      <section class="cards stack">
        <article class="card card-welcome">
          <h2>Welcome Aboard</h2>
          <p>In the Wake is a practical cruise companion built from real sailings. Use it to compare ships, scan menus, and plan ports without losing your bearings. We favor family-friendly sources and surface accessibility notes where helpful. Treat numbers as snapshots in time and lean on cross-links to double-check the latest details. When it’s time to book, the goal is that you’ll feel confident—and feel like it was your idea all along. Fair winds and following seas.</p>
        </article>
      </section>

      <section class="cards stack">
        <article class="card">
          <h2>Solo Cruising</h2>
          <p>Cabin picks, safety, and creators who focus on solo travel.</p>
        </article>
      </section>

      <!-- Active article host -->
      <section class="cards stack">
        <article class="card" id="solo-article-host" aria-live="polite">
          <h2>Loading your article…</h2>
          <p>Trimming the sails — this will just take a moment.</p>
        </article>
      </section>
    </div>

    <!-- Right rail (fixed) -->
    <aside class="rail">
      <section class="cards stack" aria-label="Articles">
        <article class="card">
          <h2>Articles</h2>
          <div id="articles-feed" aria-live="polite">Loading feed…</div>
        </article>
      </section>

      <section class="cards stack" id="solo-authors-rail" aria-label="Authors">
        <article class="card card-authors">
          <h2>Authors</h2>
          <div id="authors-list" class="authors"></div>
        </article>
      </section>
    </aside>
  </main>

  <footer class="wrap">
    © 2025 In the Wake — A Cruise Traveler’s Logbook
    <span class="version-badge">v3.006.solo.008</span>
  </footer>

  <!-- External link hardener + nav aria-current setter -->
  <script>
  (function(){
    const sameOrigin = location.origin;
    document.addEventListener('click',function(e){
      const a=e.target.closest('a[href]'); if(!a) return;
      try{
        const u=new URL(a.href, location.href);
        if(u.origin!==sameOrigin){ a.setAttribute('target','_blank'); a.setAttribute('rel','noopener'); }
      }catch(_){}
    },{passive:true});

    (function setAriaCurrent(){
      const nav = document.querySelector('.nav[aria-label="Primary"]');
      if(!nav) return;
      const here = location.pathname.replace(/\/+$/,'').toLowerCase();
      for (const a of nav.querySelectorAll('a[href]')) {
        try {
          const url = new URL(a.getAttribute('href'), location.origin);
          const path = url.pathname.replace(/\/+$/,'').toLowerCase();
          if (path === here) { a.setAttribute('aria-current','page'); a.classList.add('is-current'); }
        } catch(_) {}
      }
    })();
  })();
  </script>

  <!-- Solo article loader + deep-link SEO injector + authors rail -->
  <script>
  (function(){
    "use strict";

    const ORIGIN = (location.origin || (location.protocol + '//' + location.host));
    const ARTICLE_BASE = "/solo/articles/";
    const PERMALINK_BASE = ORIGIN + ARTICLE_BASE;

    const RAW_AUTHORS = [
      { id:"ken",  name:"Ken Baker",  url:"https://ken-baker.com",        avatarBase:"/authors/img/ken1",
        socials:[ {label:"Site",href:"https://ken-baker.com"},
                  {label:"IG",href:"https://instagram.com/flickersofmajesty"},
                  {label:"Facebook Solo Travel Group",href:"https://www.facebook.com/share/g/17XBdqRCsM/?mibextid=wwXIfr"},
                  {label:"Community (mobile)",href:"https://m.me/cm/Aba2d_mIzlMxlCA5/?send_source=cm:copy_invite_link"} ]},
      { id:"tina", name:"Tina Maulsby", url:"/authors/tina-maulsby.html", avatarBase:"/authors/img/tina3",
        socials:[ {label:"TikTok",href:"https://www.tiktok.com/@beyondboundarieswithtina"},
                  {label:"Etsy",href:"https://www.etsy.com/shop/YOUR_SHOP?section_id=CRUISE_ONLY"},
                  {label:"Facebook Group",href:"https://www.facebook.com/share/g/17XBdqRCsM/?mibextid=wwXIfr"},
                  {label:"Community (mobile)",href:"https://m.me/cm/Aba2d_mIzlMxlCA5/?send_source=cm:copy_invite_link"} ]}
    ];

    const RAW_ARTICLES = [
      { slug:"freedom-of-your-own-wake",
        title:"The Freedom of Your Own Wake",
        hero: ORIGIN + "/assets/solo/freedom-hero.jpg",
        dek:"A gentle case for sailing alone: rest, rhythm, and room to breathe.",
        authorId:"ken", tags:["solo","tips","reflection"] },
      { slug:"why-i-started-solo-cruising",
        title:"Why I Started Solo Cruising (and Built a Community)",
        hero: ORIGIN + "/authors/tinas-images/ncl-jade.png",
        dek:"From that first solo gangway to a thriving community — lessons, safety, and the joy of sailing on your own terms.",
        authorId:"tina", tags:["solo","story","community","women"] }
    ];

    function normArticle(a){ return { slug:a.slug||"", title:a.title||"", hero:a.hero||"", dek:a.dek||"", authorId:a.authorId||"", tags:Array.isArray(a.tags)?a.tags:[] }; }
    function normAuthor(a){ return { id:a.id||"", name:a.name||"", url:a.url||"", avatarBase:a.avatarBase||"", socials:Array.isArray(a.socials)?a.socials:[] }; }

    const AUTHORS  = RAW_AUTHORS.map(normAuthor);
    const ARTICLES = RAW_ARTICLES.map(normArticle);

    const authorById = Object.fromEntries(AUTHORS.map(a => [a.id, a]));
    const articlesByAuthor = ARTICLES.reduce(function(acc,a){ (acc[a.authorId] = acc[a.authorId] || []).push(a); return acc; }, {});

    const qs   = new URLSearchParams(location.search);
    const hash = (location.hash||"").replace(/^#/, "");
    var slug   = qs.get("a") || hash || "";

    const last = localStorage.getItem("solo:lastSlug");
    if(!slug){
      const pool = ARTICLES.filter(function(a){return a.slug && a.slug!==last;});
      const pick = pool.length ? pool[Math.floor(Math.random()*pool.length)] : ARTICLES[0];
      slug = (pick && pick.slug) || (ARTICLES[0] && ARTICLES[0].slug) || "";
      if(slug) history.replaceState(null, "", location.pathname + "#" + slug);
    }

    const article = ARTICLES.find(function(a){return a.slug===slug;}) || ARTICLES[0];
    localStorage.setItem("solo:lastSlug", article.slug);
    window.__soloArticle = article;

    const host = document.getElementById("solo-article-host");
    if(host){
      fetch(ARTICLE_BASE + encodeURIComponent(article.slug) + ".html", {
        credentials:"omit", cache:"no-store", redirect:"follow"
      })
      .then(function(r){ return r.ok ? r.text() : Promise.reject(r.status); })
      .then(function(html){
        host.innerHTML = html;
        wireShareButtons(article);
        injectArticleSEO(article);
        ensureBylineAuthorFallback(article);
      })
      .catch(function(){
        host.innerHTML = '<h2>We hit rough seas loading this article.</h2><p>Try refreshing or <a href="'+ORIGIN+'/solo.html">return to Solo home</a>.</p>';
      });
    }

    renderAuthorsRail();

    function renderAuthorsRail(){
      const rail = document.getElementById("authors-list");
      if(!rail) return;
      rail.innerHTML = "";

      const ver = document.querySelector('meta[name="version"]')?.content || "";
      const sorted = AUTHORS.slice().sort(function(a,b){
        const aa = (articlesByAuthor[a.id]||[]).length;
        const bb = (articlesByAuthor[b.id]||[]).length;
        return bb - aa;
      });

      sorted.forEach(function(a){
        const authored = (articlesByAuthor[a.id]||[]);
        const div = document.createElement('div'); div.className = "author";

        const fallbackExt = a.id === "ken" ? "jpg" : "png";
        const webp = a.avatarBase + ".webp" + (ver?("?v="+encodeURIComponent(ver)):"");
        const fall = a.avatarBase + "." + fallbackExt + (ver?("?v="+encodeURIComponent(ver)):"");

        div.innerHTML = ''+
          '<div class="avatar">'+
            '<picture>'+
              '<source type="image/webp" srcset="'+webp+'">'+
              '<img src="'+fall+'" alt="'+escapeHtml(a.name)+'" width="80" height="80" loading="lazy" decoding="async">'+
            '</picture>'+
          '</div>'+
          '<div class="meta">'+
            '<a href="'+(a.url||'#')+'"'+(a.url?' target="_blank" rel="noopener"':'')+'>'+escapeHtml(a.name)+'</a>'+
            '<div class="links">'+
              (a.socials||[]).map(function(s){return '<a href="'+s.href+'" target="_blank" rel="noopener">'+escapeHtml(s.label)+'</a>';}).join('')+
            '</div>'+
          '</div>';
        rail.appendChild(div);

        const roll = document.createElement('div'); roll.className = "roll";
        const max  = Math.min(4, authored.length);
        for(var i=0;i<max;i++){
          const art = authored[(i + Math.floor(Math.random()*authored.length)) % authored.length];
          const aTag = document.createElement('a');
          aTag.href = permalink(art.slug);
          aTag.textContent = art.title;
          aTag.addEventListener('click', function(e){
            e.preventDefault();
            const u = new URL(this.href, location.origin);
            const s = u.pathname.split('/').pop().replace(/\.html$/,'');
            history.pushState(null, "", location.pathname + "#" + s);
            location.reload();
          });
          roll.appendChild(aTag);
        }
        rail.appendChild(roll);
      });
    }

    function permalink(slug){ return PERMALINK_BASE + encodeURIComponent(slug) + ".html"; }

    function wireShareButtons(a){
      const el = document.querySelector('.byline .share');
      if(!el) return;
      const url = permalink(a.slug);
      el.addEventListener('click', function(e){
        e.preventDefault();
        navigator.clipboard.writeText(url).then(function(){
          el.textContent = "Link copied!";
          setTimeout(function(){ el.textContent = "Share this article"; }, 1500);
        });
      });
    }

    function injectArticleSEO(a){
      if(!(location.search.includes("a=") || location.hash)) return;
      const url = permalink(a.slug);
      setMeta('og:title', a.title + " — In the Wake");
      setMeta('og:description', a.dek || "Solo cruising reflections and tips.");
      setMeta('og:image', a.hero || (ORIGIN + "/assets/index_hero.jpg"));
      setMeta('og:url', url);
      setNameMeta('description', a.dek || "Solo cruising reflections and tips.");
      setMeta('twitter:card','summary_large_image');
      if (a.hero && /\.webp(\?|$)/i.test(a.hero)) { setMeta('og:image:type','image/webp'); }

      const existingLD = document.querySelector('script[type="application/ld+json"].solo-article-ld');
      if (existingLD) existingLD.remove();
      const ld = document.createElement('script');
      ld.type = "application/ld+json";
      ld.className = "solo-article-ld";
      ld.textContent = JSON.stringify({
        "@context":"https://schema.org",
        "@type":"BlogPosting",
        "headline": a.title,
        "description": a.dek || "Solo cruising reflections and tips.",
        "image": a.hero || (ORIGIN + "/assets/index_hero.jpg"),
        "url": url,
        "isPartOf": {"@type":"Blog","name":"Solo Cruising","url": ORIGIN + "/solo.html"}
      });
      document.head.appendChild(ld);

      function setMeta(p,c){
        var m=document.querySelector('meta[property="'+p+'"]');
        if(!m){ m=document.createElement('meta'); m.setAttribute('property',p); document.head.appendChild(m); }
        m.setAttribute('content', c);
      }
      function setNameMeta(n,c){
        var m=document.querySelector('meta[name="'+n+'"]');
        if(!m){ m=document.createElement('meta'); m.setAttribute('name',n); document.head.appendChild(m); }
        m.setAttribute('content', c);
      }
    }

    function ensureBylineAuthorFallback(a){
      const hasByline = !!document.querySelector('footer.byline');
      if(hasByline) return;
      const mounted = document.getElementById('solo-article-host');
      if(!mounted) return;
      const auth = authorById[a.authorId] || null;
      if(!auth) return;

      const ver = document.querySelector('meta[name="version"]')?.content || "";
      const fallbackExt = auth.id === "ken" ? "jpg" : "png";
      const webp = auth.avatarBase + ".webp" + (ver?("?v="+encodeURIComponent(ver)):"");
      const fall = auth.avatarBase + "." + fallbackExt + (ver?("?v="+encodeURIComponent(ver)):"");

      const footer = document.createElement('footer');
      footer.className = "byline";
      footer.innerHTML = ''+
        '<div class="avatar" style="width:48px;height:48px;border-radius:999px;overflow:hidden;flex:none">'+
          '<picture>'+
            '<source type="image/webp" srcset="'+webp+'">'+
            '<img src="'+fall+'" alt="'+escapeHtml(auth.name)+'" width="48" height="48" loading="lazy" decoding="async" style="width:100%;height:100%;object-fit:cover">'+
          '</picture>'+
        '</div>'+
        '<div style="margin-left:.5rem">'+
          '<strong><a href="'+auth.url+'"'+(auth.url?' target="_blank" rel="noopener"':'')+'>'+escapeHtml(auth.name)+'</a></strong>'+
          '<a class="share" href="#" role="button" style="margin-left:.75rem">Share this article</a>'+
        '</div>';
      mounted.appendChild(footer);
    }

    function escapeHtml(s){
      return String(s||"").replace(/[&<>"']/g, function(m){ return ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" })[m]; });
    }
  })();
  </script>

  <!-- SW registration + gentle seeding (unchanged) -->
  <script>
  (function(){
    if(!('serviceWorker' in navigator)) return;

    var ver  = document.querySelector('meta[name="version"]')?.content || '';
    var sw   = '/sw.js' + (ver ? ('?v='+encodeURIComponent(ver)) : '');

    var l = document.createElement('link');
    l.rel = 'preload'; l.as = 'fetch'; l.href = '/precache-manifest.json'; l.crossOrigin = 'anonymous';
    document.head.appendChild(l);

    window.addEventListener('load', function(){
      navigator.serviceWorker.register(sw, { scope: '/' })
        .then(function(){ return navigator.serviceWorker.ready; })
        .then(function(reg){
          fetch('/precache-manifest.json', {cache:'no-store'})
            .then(function(r){ return r.ok ? r.json() : []; })
            .then(function(list){
              if(!Array.isArray(list)) return;
              list.slice(0, 50).forEach(function(u){
                try {
                  var url = new URL(u, location.origin);
                  if (url.origin === location.origin) fetch(url.href).catch(function(){});
                } catch(_) {}
              });
              if (navigator.serviceWorker.controller) {
                try { navigator.serviceWorker.controller.postMessage({type:'SEED_FROM_PAGE', urls:list}); } catch(_){}
              }
            })
            .catch(function(){});
        })
        .catch(function(){});
    });
  })();
  </script>

  <!-- Articles feed (fixed to use /solo/sitemap.xml) -->
  <!-- right-rail data + renderer -->
<script>
(function(){
  const mount = document.getElementById('rail-mount');
  if (!mount) return;

  const SRC = '/assets/data/articles/index.json?v=3.008';
  const PLACEHOLDER = '/assets/placeholders/article-thumb.jpg?v=3.008';
  const CONTEXT_TAGS = ['travel']; // Travel page → travel + shared ("solo, travel") articles

  // Fallback local seed
  const localSeed = [
    {
      id:'top-20-first-cruise-questions',
      title:'Top 20 First-Cruise Questions (Answered)',
      url:'/travel.html',
      date:'2025-10-17',
      excerpt:'A first-person guide to planning, packing, ports, and ship life.',
      image:'/assets/articles/top-20-questions/cover.jpg?v=3.008',
      author:{name:'Ken Baker', url:'/authors/ken-baker.html', image:'/assets/authors/ken-baker.jpg?v=3.008'}
    },
    {
      id:'freedom-of-your-own-wake',
      title:'Freedom of Your Own Wake',
      url:'/solo/articles/freedom-of-your-own-wake.html',
      date:'2024-08-14',
      excerpt:'On choosing solitude without being alone.',
      image:'/assets/articles/freedom-of-your-own-wake.jpg?v=3.008',
      author:{name:'Ken Baker', url:'/authors/ken-baker.html', image:'/assets/authors/ken-baker.jpg?v=3.008'}
    },
    {
      id:'why-i-started-solo-cruising',
      title:'Why I Started Solo Cruising',
      url:'/solo/articles/why-i-started-solo-cruising.html',
      date:'2024-06-01',
      excerpt:'From that first solo gangway to a thriving community — freedom found at sea.',
      image:'/assets/articles/solo/why-i-started-solo-cruising.jpg?v=3.008',
      author:{name:'Tina', url:'/authors/tina.html', image:'/assets/authors/tina.jpg?v=3.008'}
    }
  ];

  function dedupe(arr){
    const seen=new Set();
    return arr.filter(a=>{
      const k=a.url||a.id;
      if(seen.has(k)) return false;
      seen.add(k);
      return true;
    });
  }

  function filterForContext(list){
    return list.filter(a=>{
      if(!Array.isArray(a.keywords)) return false;
      return a.keywords.some(k=>CONTEXT_TAGS.includes(k));
    });
  }

  function card(a){
    const d = a.date ? new Date(a.date).toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'}) : '';
    const img = a.image || PLACEHOLDER;
    const author = a.author || {};
    const avatar = author.image
      ? `<img class="avatar" src="${author.image}" alt="${author.name}" onerror="this.onerror=null;this.src='/assets/placeholders/author.jpg?v=3.008'">`
      : '';
    return `<article class="rail-item">
      <a class="thumb" href="${a.url}">
        <img src="${img}" alt="${a.title}" onerror="this.onerror=null;this.src='${PLACEHOLDER}'">
      </a>
      <div class="meta">
        <h4><a href="${a.url}">${a.title}</a></h4>
        <p class="tiny muted">${d}${author.name ? ` · ${avatar}<a class="author" href="${author.url||'#'}">${author.name}</a>` : ''}</p>
        <p class="tiny">${a.excerpt||''}</p>
      </div>
    </article>`;
  }

  function render(list){
    mount.innerHTML = list.map(card).join('');
  }

  fetch(SRC,{cache:'no-store'})
    .then(r=>r.ok?r.json():Promise.reject())
    .then(json=>{
      let list = Array.isArray(json?.articles) ? json.articles : [];
      list = filterForContext(list);
      list = dedupe([...list, ...localSeed]).slice(0,4);
      render(list);
    })
    .catch(()=>{
      render(localSeed.slice(0,3));
    });
})();
</script>

  <style>
  #articles-feed {
    max-height: 480px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: .5rem;
    padding-right: .5rem;
  }
  #articles-feed a.feed-item {
    display: block;
    background: #fff;
    border: 1px solid var(--rope);
    border-radius: 8px;
    padding: .6rem .7rem;
    color: var(--ink);
    text-decoration: none;
    box-shadow: 0 1px 4px rgba(8,48,65,.08);
  }
  #articles-feed a.feed-item:hover {
    background: #f9fdfd;
    text-decoration: none;
  }
  #articles-feed .feed-author {
    font-size: .85rem;
    opacity: .8;
    margin-top: .2rem;
  }
  </style>
</body>
</html>
