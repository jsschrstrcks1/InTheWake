<!doctype html>
<html lang="en">
<head>
  <!--
    In the Wake — Cruise Line: Carnival (v3.007)
    “Soli Deo Gloria.” 1 Cor 10:31 · Prov 3:5–6
  -->

  <!-- Analytics -->
  <script defer src="https://cloud.umami.is/script.js"
          data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>

  <!-- Standards: absolute URL + origin normalizer -->
  <script>
  (function () {
    const ORIGIN = (location.origin || (location.protocol + '//' + location.host)).replace(/\/$/,'');
    window._abs = p => { p = String(p || ''); if (!p.startsWith('/')) p = '/' + p; return ORIGIN + p; };
    document.addEventListener('DOMContentLoaded', () => {
      const sel = [
        'a[href^="https://www.cruisinginthewake.com/"]',
        'img[src^="https://www.cruisinginthewake.com/"]',
        'link[href^="https://www.cruisinginthewake.com/"]',
        'script[src^="https://www.cruisinginthewake.com/"]'
      ].join(',');
      document.querySelectorAll(sel).forEach(el => {
        const attr = el.hasAttribute('href') ? 'href' : 'src';
        try {
          const u = new URL(el.getAttribute(attr));
          el.setAttribute(attr, ORIGIN + u.pathname + u.search + u.hash);
        } catch(_){}
      });
    }, { once: true });
  })();
  </script>

  <!-- External link hardening -->
  <script>
  document.addEventListener('click', e => {
    const a = e.target.closest && e.target.closest('a[href]');
    if (!a) return;
    try {
      const u = new URL(a.href, location.href);
      if (u.origin !== location.origin) { a.target = '_blank'; a.rel = 'noopener'; }
    } catch(_){}
  }, { capture: true });
  </script>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Carnival Cruise Line | In the Wake (v3.007)</title>
  <meta name="version" content="3.010.300"/>
  <meta name="description" content="Carnival Cruise Line overview: ship classes, ships A–Z, photos, and a typo-tolerant ship finder — from In the Wake."/>
  <meta name="robots" content="index,follow"/>

  <!-- Canonical / Social -->
  <link rel="canonical" href="https://www.cruisinginthewake.com/cruise-lines/carnival.html"/>
  <meta property="og:type" content="website"/>
  <meta property="og:site_name" content="In the Wake"/>
  <meta property="og:url" content="https://www.cruisinginthewake.com/cruise-lines/carnival.html"/>
  <meta property="og:title" content="Carnival Cruise Line | In the Wake"/>
  <meta property="og:description" content="Ship classes, ships A–Z, photos, and a typo-tolerant ship finder."/>
  <meta property="og:image" content="https://www.cruisinginthewake.com/assets/social/cruise-lines-hero.jpg?v=3.007"/>
  <meta name="twitter:card" content="summary_large_image"/>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {"@context":"https://schema.org",
   "@type":"BreadcrumbList",
   "itemListElement":[
     {"@type":"ListItem","position":1,"name":"Home","item":"https://www.cruisinginthewake.com/"},
     {"@type":"ListItem","position":2,"name":"Cruise Lines","item":"https://www.cruisinginthewake.com/cruise-lines/"},
     {"@type":"ListItem","position":3,"name":"Carnival","item":"https://www.cruisinginthewake.com/cruise-lines/carnival.html"}
   ]}
  </script>

  <!-- SiteCache + Service Worker -->
  <script src="/assets/js/site-cache.js" defer></script>
  <script>
  if ('serviceWorker' in navigator) {
    addEventListener('load', () => navigator.serviceWorker.register('/sw.js').catch(()=>{}));
  }
  </script>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/styles.css?v=3.007"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg"/>

  <!-- Page-specific polish (uses global hero from styles.css; no duplicate hero) -->
  <style>
    :root { --rope:#D9B382; --ink:#083041; --foam:#e6f4f8; --accent:#0e6e8e; }
    body.page{ background:linear-gradient(var(--foam),#fff 240px); color:var(--ink); }
    .skip-link{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
    .skip-link:focus{ position:fixed; left:12px; top:12px; width:auto; height:auto; padding:.45rem .7rem;
      background:#fff; border:2px solid var(--accent); border-radius:10px; z-index:10000; }

    /* Card watermark (subtle) */
    .card{ position:relative; overflow:hidden }
    .card::after{
      content:""; position:absolute; inset:0; margin:auto; width:min(58%,360px); height:min(58%,360px);
      background:url('/assets/watermark.png') center/contain no-repeat; opacity:.06; pointer-events:none;
    }

    /* Simple grid helpers for this page */
    .grid{ display:grid; gap:1rem; }
    .grid.two{ grid-template-columns:1fr; }
    @media (min-width:760px){ .grid.two{ grid-template-columns:repeat(2,minmax(0,1fr)); } }

    /* Tiny badges */
    .badge{ font-size:.75rem; background:#eef7fb; border:1px solid var(--rope); border-radius:999px; padding:.1rem .5rem }
  
  /* Dropdown Navigation (FIXED: 300ms Hover Delay) */
  .nav {
    flex: 1 1 auto;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: .5rem;
    white-space: nowrap;
    flex-wrap: nowrap;
    overflow: visible;
    padding-inline: .75rem;
  }

  .nav-item {
    position: relative;
    display: inline-block;
  }

  .nav-item > a,
  .nav-item > button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: .35rem;
    padding: .65rem 1rem;
    min-height: 44px;
    border-radius: 10px;
    background: #fff;
    border: 2px solid var(--rope);
    color: var(--accent);
    font: inherit;
    font-size: .95rem;
    line-height: 1.2;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .nav-item > a:hover,
  .nav-item > button:hover {
    background: var(--foam);
    border-color: var(--accent);
    transform: translateY(-1px);
  }

  .nav-item > a[aria-current="page"] {
    background: var(--accent);
    color: #fff;
    font-weight: 600;
    border-color: var(--accent);
  }

  .nav-disclosure .caret {
    display: inline-block;
    margin-left: .25rem;
    transition: transform 0.2s ease;
  }

  .nav-item[data-open="true"] .nav-disclosure .caret {
    transform: rotate(180deg);
  }

  /* Dropdown menu with safe zone */
  .submenu {
    position: absolute !important;
    left: 0;
    top: calc(100% + 4px);
    min-width: 240px;
    background: #fff;
    border: 2px solid var(--rope);
    border-radius: 12px;
    padding: .6rem;
    box-shadow: 0 8px 24px rgba(8,48,65,.15);
    display: none;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    z-index: 2100;
  }

  /* Safe zone bridge */
  .submenu::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 0;
    right: 0;
    height: 8px;
    background: transparent;
  }

  .nav-item[data-open="true"] > .submenu {
    display: block;
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  .submenu a {
    display: block;
    width: 100%;
    margin: 0;
    padding: .6rem .75rem;
    border-radius: .65rem;
    border: 0;
    background: transparent;
    color: var(--ink);
    text-decoration: none;
    transition: background 0.15s ease;
  }

  .submenu a:hover,
  .submenu a:focus {
    background: #f2f7fa;
    outline: 2px solid transparent;
  }

  @media (max-width: 768px) {
    .nav {
      justify-content: flex-start;
      overflow-x: auto;
      scrollbar-width: thin;
      -webkit-overflow-scrolling: touch;
    }

    .nav-item > a,
    .nav-item > button {
      flex: 0 0 auto;
    }

    .submenu {
      left: 0;
      right: 0;
      min-width: 100%;
    }
  }
  </style>
</head>

<body class="page">
  <a class="skip-link" href="#content">Skip to main content</a>

  <header class="site-header hero-header">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake.png" alt="In the Wake wordmark" width="256" height="64" />
        <span class="tiny version-badge" aria-label="Site version 3.010.300">v3.010.300</span>
      </div>
      <!-- Navigation with Dropdown Menus -->
      <nav class="nav" aria-label="Main site navigation">
        <div class="nav-item">
          <a href="/">Home</a>
        </div>

        <!-- Planning Dropdown -->
        <div class="nav-item nav-group" id="nav-planning" data-open="false">
          <button class="nav-disclosure" type="button" aria-expanded="false" aria-haspopup="true" aria-controls="menu-planning">
            Planning <span class="caret">▾</span>
          </button>
          <div id="menu-planning" class="submenu" role="menu" aria-label="Planning submenu">
            <a role="menuitem" href="/planning.html">Planning (overview)</a>
            <a role="menuitem" href="/ships.html">Ships</a>
            <a role="menuitem" href="/restaurants.html">Restaurants &amp; Menus</a>
            <a role="menuitem" href="/ports.html">Ports</a>
            <a role="menuitem" href="/drink-calculator.html">Drink Calculator</a>
            <a role="menuitem" href="/cruise-lines.html">Cruise Lines</a>
            <a role="menuitem" href="/packing-lists.html">Packing Lists</a>
            <a role="menuitem" href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-item nav-group" id="nav-travel" data-open="false">
          <button class="nav-disclosure" type="button" aria-expanded="false" aria-haspopup="true" aria-controls="menu-travel">
            Travel <span class="caret">▾</span>
          </button>
          <div id="menu-travel" class="submenu" role="menu" aria-label="Travel submenu">
            <a role="menuitem" href="/travel.html">Travel (overview)</a>
            <a role="menuitem" href="/solo.html">Solo</a>
          </div>
        </div>

        <div class="nav-item">
          <a href="/about-us.html">About</a>
        </div>
      </nav>
    </div>

    <!-- Uses global hero from styles.css (no duplicate local hero markup) -->
    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="latlon-grid" aria-hidden="true"></div>
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.300" width="180" height="180" alt="" aria-hidden="true" decoding="async"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake.png?v=3.010.300" width="560" height="144" alt="In the Wake" decoding="async"/>
      </div>
      <div class="tagline" aria-hidden="true">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <main class="wrap" id="content">
    <!-- Intro (EN + ES promos preserved, cleaner semantics) -->
    <section class="card i18n" lang="en" aria-labelledby="promo-en">
      <h1 id="promo-en">Carnival Cruise Line</h1>
      <p><strong>The fun starts ... Soon. </strong> This page is mostly a promise for adventures yet to come. Carnival is known for their Party vibes, big laughs, and value that lets everyone say yes to vacation. From rollercoasters at sea to endless eats, these ships bring the good times 24/7.</p>
      <p>Deals come and go fast — lock yours in today.</p>
    </section>


    <!-- Gallery -->
    <section class="card" aria-labelledby="gallery">
      <h2 id="gallery">Gallery</h2>
      <div class="grid two">
        <figure>
          <img src="/assets/cruise-lines/carnival-hero-1.jpg" alt="Carnival ship under way at sea">
          <figcaption class="tiny">Image: Wikimedia Commons — add specific attribution.</figcaption>
        </figure>
        <figure>
          <img src="/assets/cruise-lines/carnival-hero-2.jpg" alt="Top deck view on a Carnival ship">
          <figcaption class="tiny">Image: Wikimedia Commons — add specific attribution.</figcaption>
        </figure>
      </div>
    </section>

    <!-- Classes -->
    <section id="classes" class="card" aria-labelledby="classes-h">
      <h2 id="classes-h">Ship Classes</h2>
      <div class="grid two">
        <article class="card" aria-labelledby="excel-h">
          <h3 id="excel-h">Excel Class <span class="badge">launched 2021</span></h3>
          <ul>
            <li><a href="/ships/carnival-celebration.html">Carnival Celebration</a></li>
            <li><a href="/ships/carnival-jubilee.html">Carnival Jubilee</a></li>
            <li><a href="/ships/carnival-mardi-gras.html">Carnival Mardi Gras</a></li>
          </ul>
        </article>
      </div>
    </section>

    <!-- Ships A–Z -->
    <section id="ships" class="card" aria-labelledby="ships-h">
      <h2 id="ships-h">Ships A–Z</h2>
      <ul>
        <li><a href="/ships/carnival-celebration.html">Carnival Celebration</a></li>
        <li><a href="/ships/carnival-jubilee.html">Carnival Jubilee</a></li>
        <li><a href="/ships/carnival-mardi-gras.html">Carnival Mardi Gras</a></li>
      </ul>
    </section>

    <!-- Search (self-contained, typo-tolerant) -->
    <section id="search" class="card" aria-labelledby="search-h">
      <h2 id="search-h">Search Ships</h2>
      <div class="search" role="search">
        <label for="shipSearch" class="tiny" style="display:block;margin-bottom:.25rem">Type a ship name (tolerates typos)</label>
        <input id="shipSearch" type="search" placeholder="e.g., jublee → Jubilee" aria-controls="searchResults">
        <button id="btnSearch" type="button">Search</button>
      </div>
      <div id="searchResults" class="grid two" aria-live="polite" aria-busy="false"></div>
    </section>

    <section class="card" aria-labelledby="credits-h">
      <h3 id="credits-h">Image Credits</h3>
      <p class="tiny">Hero and supplemental images sourced from Wikimedia Commons. Replace placeholders with final credited media.</p>
    </section>
  </main>

  <footer class="wrap" role="contentinfo">
    © 2025 In the Wake — A Cruise Traveler’s Logbook · <a href="/accessibility.html">Accessibility &amp; WCAG 2.1 AA Commitment</a>
  </footer>

  <!-- Data + Search logic -->
  <script>
  // Minimal dataset
  const SHIPS = [
    { name:"Carnival Mardi Gras",   url:"/ships/carnival-mardi-gras.html",   aliases:["Mardi Grass","Mardy Gras"] },
    { name:"Carnival Celebration",  url:"/ships/carnival-celebration.html",  aliases:["Celebrashun","Celabration"] },
    { name:"Carnival Jubilee",      url:"/ships/carnival-jubilee.html",      aliases:["Jublee","Jubbilee"] }
  ];

  // Utilities
  const $ = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));
  const norm = s => String(s||'').toLowerCase()
    .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
    .replace(/[’‘]/g,"'").trim();

  // <=1 edit distance OR prefix
  function near(a,b){
    if(a===b) return true;
    if(!a||!b) return false;
    const la=a.length, lb=b.length;
    if(Math.abs(la-lb)>1) return false;
    let i=0,j=0,e=0;
    while(i<la && j<lb){
      if(a[i]===b[j]){ i++; j++; continue; }
      if(++e>1) return false;
      if(la>lb) i++; else if(lb>la) j++; else { i++; j++; }
    }
    return true;
  }

  function searchShips(q){
    const t = norm(q);
    if(!t) return SHIPS;
    return SHIPS.filter(s=>{
      const hay = [s.name, ...(s.aliases||[])].map(norm);
      return hay.some(h => h.includes(t) || near(t,h) || h.split(/\s+/).some(w => w.startsWith(t) || near(t,w)));
    });
  }

  function renderResults(list){
    const root = $('#searchResults'); if(!root) return;
    root.setAttribute('aria-busy','true');
    root.innerHTML = list.map(s => `
      <a class="card" href="${s.url}" aria-label="${s.name}">
        <strong>${s.name}</strong><br><small>Open ship profile</small>
      </a>
    `).join('');
    root.setAttribute('aria-busy','false');
  }

  function wireSearch(){
    const input = $('#shipSearch'), btn = $('#btnSearch');
    const go = ()=> renderResults(searchShips(input.value||''));
    input?.addEventListener('input', ()=>{ clearTimeout(input._t); input._t = setTimeout(go, 90); });
    btn?.addEventListener('click', go);
    go(); // first paint
  }

  document.addEventListener('DOMContentLoaded', wireSearch, { once:true });
  </script>

  <!-- JAVASCRIPT -->
  <script>
  (function(){
    "use strict";

    /* ===== Dropdown Menu with 300ms Hover Delay ===== */
    const dropdownGroups = Array.from(document.querySelectorAll('.nav-group'));
    if (dropdownGroups.length) {
      const hoverTimeouts = new Map();
      const HOVER_DELAY = 300;

      function setOpen(group, isOpen) {
        group.dataset.open = isOpen ? "true" : "false";
        const button = group.querySelector('.nav-disclosure');
        if (button) {
          button.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        }
      }

      function closeAll(except = null) {
        dropdownGroups.forEach(group => {
          if (group !== except) {
            setOpen(group, false);
            if (hoverTimeouts.has(group)) {
              clearTimeout(hoverTimeouts.get(group));
              hoverTimeouts.delete(group);
            }
          }
        });
      }

      dropdownGroups.forEach(group => {
        const button = group.querySelector('.nav-disclosure');
        const menu = group.querySelector('.submenu');
        if (!button || !menu) return;

        // Click to toggle
        button.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const isOpen = group.dataset.open === "true";
          closeAll(group);
          setOpen(group, !isOpen);
        });

        // Mouse enter: Open immediately
        group.addEventListener('mouseenter', () => {
          if (hoverTimeouts.has(group)) {
            clearTimeout(hoverTimeouts.get(group));
            hoverTimeouts.delete(group);
          }
          closeAll(group);
          setOpen(group, true);
        });

        // Mouse leave: Close after delay
        group.addEventListener('mouseleave', () => {
          const timeoutId = setTimeout(() => {
            setOpen(group, false);
            hoverTimeouts.delete(group);
          }, HOVER_DELAY);
          hoverTimeouts.set(group, timeoutId);
        });

        // Keyboard navigation
        group.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            setOpen(group, false);
            button && button.focus();
          }
          if ((e.key === 'ArrowDown' || e.key === 'ArrowUp') && document.activeElement === button) {
            e.preventDefault();
            setOpen(group, true);
            const firstLink = menu.querySelector('a, button, [tabindex]:not([tabindex="-1"])');
            firstLink && firstLink.focus();
          }
        });

        // Close when tabbing away
        menu.addEventListener('focusout', () => {
          setTimeout(() => {
            if (!group.contains(document.activeElement)) {
              setOpen(group, false);
            }
          }, 0);
        });
      });

      // Close all when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.nav-group')) {
          closeAll();
        }
      });

      // Close all when window loses focus
      window.addEventListener('blur', () => {
        closeAll();
      });
    }
  })();
  </script>
</body>
</html>
