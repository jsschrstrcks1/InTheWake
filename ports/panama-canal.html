<!--
Soli Deo Gloria
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="ai-summary" content="Panama Canal transit guide — opened August 15, 1914 after 33 years of construction. A 50-mile engineering marvel connecting two oceans, one of Seven Wonders of the Modern World. Expansion completed June 2016, Neopanamax locks."/>
  <meta name="last-reviewed" content="2025-12-26"/>
  <meta name="content-protocol" content="ICP-Lite v1.4"/>
  <title>Panama Canal Transit Guide — Locks & Engineering Marvel | In the Wake</title>
  <meta name="description" content="First-person logbook guide to Panama Canal transit — Gatun Locks, Gaillard Cut, Bridge of the Americas, and the most fascinating cruise day you'll ever have."/>
  <link rel="canonical" href="https://cruisinginthewake.com/ports/panama-canal.html"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/in_the_wake_icon_32x32.png"/>
  <!-- Service Worker Registration -->
  <script>
  if('serviceWorker' in navigator){
    window.addEventListener('load',()=>navigator.serviceWorker.register('/sw.js').catch(()=>{}));
  }
  </script>

  <link rel="stylesheet" href="/assets/styles.css"/>
  <!-- Leaflet CSS for interactive maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <link rel="stylesheet" href="/assets/css/components/port-map.css?v=2.0.0"/>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://cruisinginthewake.com/"},
      {"@type": "ListItem", "position": 2, "name": "Ports", "item": "https://cruisinginthewake.com/ports.html"},
      {"@type": "ListItem", "position": 3, "name": "Panama Canal", "item": "https://cruisinginthewake.com/ports/panama-canal.html"}
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Panama Canal Transit Guide",
    "description": "Panama Canal transit guide — opened August 15, 1914 after 33 years of construction. A 50-mile engineering marvel connecting two oceans, one of Seven Wonders of the Modern World. Expansion completed June 2016, Neopanamax locks.",
    "dateModified": "2025-12-26",
    "mainEntity": {
      "@type": "Place",
      "name": "Panama Canal",
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 9.0000,
        "longitude": -79.5000
      }
    }
  }
  </script>

  <!-- LCP Optimization: Preload critical hero images -->
  <link rel="preload" as="image" href="/assets/logo_wake_560.png" fetchpriority="high"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg?v=3.010.400" fetchpriority="high"/>

  <!-- Swiper CSS/JS (primary + CDN fallback) -->
  <script>
  (function ensureSwiper(){
    function addCSS(h){ const l=document.createElement('link'); l.rel='stylesheet'; l.href=h; document.head.appendChild(l); }
    function addJS(src, ok, fail){
      const s=document.createElement('script'); s.src=src; s.async=true; s.onload=ok; s.onerror=fail||function(){}; document.head.appendChild(s);
    }
    const primaryCSS="https://cruisinginthewake.com/vendor/swiper/swiper-bundle.min.css";
    const primaryJS ="https://cruisinginthewake.com/vendor/swiper/swiper-bundle.min.js";
    const cdnCSS    ="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css";
    const cdnJS     ="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js";
    addCSS(primaryCSS);
    addJS(primaryJS, function(){ window.__swiperReady=true; }, function(){ addCSS(cdnCSS); addJS(cdnJS, function(){ window.__swiperReady=true; }); });
  })();
  </script>
</head>
<body class="page">
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <!-- ARIA Live Regions -->
  <div id="a11y-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  <div id="a11y-alerts" role="alert" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

  <header class="hero-header" role="banner">
    <div class="navbar">
      <div class="brand">
        <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
        <span class="tiny version-badge" aria-label="Site version V1.Beta">V1.Beta</span>
      </div>
      <!-- Mobile hamburger button -->
      <button class="nav-toggle" type="button" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="site-nav">
        <span class="nav-toggle-icon">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
            <nav class="site-nav" id="site-nav" aria-label="Main site navigation">
        <a class="nav-pill" href="/">Home</a>

        <!-- Planning Dropdown -->
        <div class="nav-dropdown" id="nav-planning">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Planning <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/planning.html">Planning (overview)</a>
            <a href="/ships.html">Ships</a>
            <a href="/restaurants.html">Restaurants &amp; Menus</a>
            <a href="/ports.html">Ports</a>
            <a href="/drink-packages.html">Drink Packages</a>
            <a href="/drink-calculator.html">Drink Calculator</a>
            <a href="/stateroom-check.html">Stateroom Check</a>
            <a href="/cruise-lines.html">Cruise Lines</a>
            <a href="/packing-lists.html">Packing Lists</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-dropdown" id="nav-travel">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Travel <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/travel.html">Travel (overview)</a>
            <a href="/solo.html">Solo</a>
          </div>
        </div>

        <a class="nav-pill" href="/tools/port-tracker.html">Port Logbook</a>
        <a class="nav-pill" href="/tools/ship-tracker.html">Ship Logbook</a>
        <a class="nav-pill" href="/search.html">Search</a>
        <a class="nav-pill" href="/about-us.html">About</a>
      </nav></div>

    <!-- Hero -->
    <div class="hero">
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.400" width="180" height="180" alt="" aria-hidden="true" decoding="async"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline" aria-hidden="true">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo © Flickers of Majesty</a>
      </div>
    </div>
  </header>

  <main class="wrap page-grid" id="main-content" role="main">
    <nav aria-label="Breadcrumb" style="margin-bottom: 1rem;"><ol style="list-style: none; padding: 0; margin: 0; font-size: 0.9rem; color: #666;"><li style="display: inline;"><a href="/">Home</a> &rsaquo; </li><li style="display: inline;"><a href="/ports.html">Ports</a> &rsaquo; </li><li style="display: inline;" aria-current="page">Panama Canal</li></ol></nav>

    <div style="grid-column: 1; grid-row: 1;">
    <div class="port-hero">
        <div class="port-hero-image">
          <img src="/ports/img/panama-canal/panama-canal-3.webp" alt="Panama Canal panoramic view" loading="eager" fetchpriority="high"/>
          <div class="port-hero-overlay">
            <h1 class="port-hero-title">Panama Canal</h1>
          </div>
        </div>
        <p class="port-hero-credit">Photo © <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a></p>
      </div>

    <article class="card"><h1>Panama Canal: My Engineering Marvel Day</h1>
      <div class="logbook-entry">
        <p>We were on the ship at 5 a.m. on the bow as we approached the Gatun Locks at dawn — watching the ship being raised 85 feet in three chambers, inches from the lock walls, with the mules (little trains) pulling us through. The narrator on the bow commentary was riveting the whole day, and I learned the French first broke ground here on January 20, 1882, driven by the same dream that would ultimately claim 20,000 lives before they surrendered to yellow fever and bankruptcy. When the United States acquired the project on February 23, 1904, and began work that May 4th, they conquered disease first — mosquitoes and medicine before dynamite and dirt.</p>

      <figure class="logbook-image float-right">
        <img src="img/panama-canal/panama-canal-1.webp" alt="Panama Canal harbor view" loading="lazy">
        <figcaption>Panama Canal — <a href="https://commons.wikimedia.org/w/index.php?search=Panama%20Canal&title=Special:MediaSearch&type=image" target="_blank" rel="noopener">WikiMedia Commons</a> (CC BY-SA)</figcaption>
      </figure>

        <p>On August 15, 1914, the steamship <em>SS Ancon</em> became the first vessel to officially transit these waters — 50 miles from deep water to deep water, the culmination of over $350 million (the most expensive American project to that date) and 5,600 more American lives added to the French toll. Standing here more than a century later, gliding through what 25,600 workers never lived to see, I felt the full measure of what this passage cost.</p>

        <p>Sailed through the Gaillard Cut — the narrowest part — with jungle pressing in on both sides, howler monkeys roaring just as they did when men carved through this mountain with steam shovels and dynamite. Saw crocodiles sunning on the banks, toucans flying overhead, and the Bridge of the Americas at the Pacific side marking the end. This waterway they wrested from the earth was named one of the Seven Wonders of the Modern World. After Panama gained full control on December 31, 1999, they honored that legacy with an ambitious expansion — completed in June 2016 to welcome the colossal Neopanamax ships that now share these locks with us.</p>

        <div class="poignant-highlight">
          <strong>The Moment That Stays With Me:</strong> Standing on the bow at dawn in the Gatun Locks — watching the lock gates close behind us and the water boil as we rose like an elevator — realizing I was inside one of the greatest engineering marvels in human history, built on the backs of tens of thousands who believed a waterway could unite two oceans and change the world forever. They were right.
        </div>
      </div>

      <section class="port-section">
        <h3>Getting Around Panama Canal</h3>
        <p>You never leave the ship — best seat in the house is the open decks with coffee.</p>

      <figure class="logbook-image float-left">
        <img src="img/panama-canal/panama-canal-2.webp" alt="Panama Canal waterfront" loading="lazy">
        <figcaption>Panama Canal scenery — <a href="https://commons.wikimedia.org/w/index.php?search=Panama%20Canal&title=Special:MediaSearch&type=image" target="_blank" rel="noopener">WikiMedia Commons</a> (CC BY-SA)</figcaption>
      </figure>
      </section>

      <section class="port-section">
        <h3>Depth Soundings Ashore</h3>
        <p class="tiny" style="margin-bottom: 0.5rem; font-style: italic; color: #678;">Practical tips before you step off the ship.</p>
        <p>The sun on the decks is intense — bring a hat, water, and patience for the best views are worth fighting for.</p>
      </section>

      <section class="port-section">
        <h3>Frequently Asked Questions</h3>
        <p><strong>Q: Worth it?</strong><br/>A: The most educational and awe-inspiring day you'll ever have at sea.</p>
        <p><strong>Q: How long does the transit take?</strong><br/>A: Full transit ~10–12 hours bow to stern.</p>
        <p><strong>Q: Best vantage point?</strong><br/>A: Forward decks, early.</p>
        <p><strong>Q: Can you feel the ship moving in the locks?</strong><br/>A: Nope — smooth as an elevator ride.</p>
      </section>

      <!-- Interactive Port Map -->
      <section class="port-section port-map-section" id="port-map-section">
        <h3>Panama Canal Area Map</h3>
        <p class="map-intro">Interactive map showing cruise terminal and Panama Canal attractions. Click any marker for details.</p>
        <div id="panama-canal-port-map" class="port-map-container" role="application" aria-label="Interactive map of Panama Canal port and points of interest">
          <noscript>
            <p style="padding: 2rem; text-align: center; color: #678;">
              Interactive map requires JavaScript. <a href="https://www.openstreetmap.org/?mlat=9.0800&mlon=-79.6800#map=12/9.0800/-79.6800" target="_blank" rel="noopener">View on OpenStreetMap</a>.
            </p>
          </noscript>
        </div>
        <div class="port-map-actions">
          <button type="button" class="btn btn-secondary" onclick="document.getElementById('panama-canal-port-map')._portMap?.fitBounds(document.getElementById('panama-canal-port-map')._portMap.getBounds())">
            Reset View
          </button>
        </div>
      </section>

      <!-- Photo Gallery -->
      <section class="port-section" style="background: transparent; border: none; padding: 0;">
        <h3>Panama Canal Gallery</h3>
        <div class="gallery-grid">
        <figure class="gallery-item">
          <img src="/ports/img/panama-canal/panama-canal-1.webp" alt="Cruise ship in canal" loading="lazy"/>
          <figcaption>
            Cruise ship in canal
            <div class="photo-credit">Photo: <a href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</div>
          </figcaption>
        </figure>
        <figure class="gallery-item">
          <img src="/ports/img/panama-canal/panama-canal-2.webp" alt="Passengers enjoying transit" loading="lazy"/>
          <figcaption>
            Passengers enjoying transit
            <div class="photo-credit">Photo: <a href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</div>
          </figcaption>
        </figure>
        <figure class="gallery-item">
          <img src="/ports/img/panama-canal/panama-canal-3.webp" alt="Canal transit view" loading="lazy"/>
          <figcaption>
            Canal transit view
            <div class="photo-credit">Photo: <a href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</div>
          </figcaption>
        </figure>
        <figure class="gallery-item">
          <img src="/ports/img/panama-canal/panama-canal-4.webp" alt="Panama Canal passage" loading="lazy"/>
          <figcaption>
            Panama Canal passage
            <div class="photo-credit">Photo: <a href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</div>
          </figcaption>
        </figure>
        </div>
      </section>
    

    <!-- Photo Gallery Section -->
    <section class="port-section photo-gallery">
      <h2>Photo Gallery</h2>
      <div class="gallery-grid">
        <figure class="gallery-item">
          <img src="img/panama-canal/panama-canal-1.webp" alt="Harbor view of Panama Canal" loading="lazy">
          <figcaption>
            Harbor view of Panama Canal
            <div class="photo-credit">Photo: WikiMedia Commons</div>
          </figcaption>
        </figure>
        <figure class="gallery-item">
          <img src="img/panama-canal/panama-canal-2.webp" alt="Waterfront of Panama Canal" loading="lazy">
          <figcaption>
            Waterfront of Panama Canal
            <div class="photo-credit">Photo: WikiMedia Commons</div>
          </figcaption>
        </figure>
        <figure class="gallery-item">
          <img src="img/panama-canal/panama-canal-3.webp" alt="Port panorama of Panama Canal" loading="lazy">
          <figcaption>
            Port panorama of Panama Canal
            <div class="photo-credit">Photo: WikiMedia Commons</div>
          </figcaption>
        </figure>
        <figure class="gallery-item">
          <img src="img/panama-canal/panama-canal-4.webp" alt="Coastal landscape of Panama Canal" loading="lazy">
          <figcaption>
            Coastal landscape of Panama Canal
            <div class="photo-credit">Photo: WikiMedia Commons</div>
          </figcaption>
        </figure>
      </div>
    </section>

    <!-- Image Credits Section -->
    <section class="port-section image-credits">
      <h2>Image Credits</h2>
      <ul>
        <li><strong>panama-canal-1.webp</strong>: WikiMedia Commons (CC BY-SA)</li><li><strong>panama-canal-2.webp</strong>: WikiMedia Commons (CC BY-SA)</li><li><strong>panama-canal-3.webp</strong>: WikiMedia Commons (CC BY-SA)</li><li><strong>panama-canal-4.webp</strong>: WikiMedia Commons (CC BY-SA)</li>
      </ul>
      <p><em>Images sourced from WikiMedia Commons under Creative Commons licenses.</em></p>
    </section>
</article>
  </div>
  <aside class="rail" style="grid-column: 2; grid-row: 1; align-self: start;">
    <section class="page-intro" style="margin: 0 0 1rem 0;">
      <p class="answer-line" style="margin: 0.75rem 0; padding: 0.5rem 0.75rem; border-left: 3px solid var(--rope, #d9b382); background: #f7fdff; border-radius: 8px;">
        <strong>Quick Answer:</strong> Transiting the Panama Canal is the single most fascinating "port" day you will ever have on a cruise — a man-made wonder that still blows minds 110 years later.
      </p>
    </section>

      <!-- Author's Note -->
      <aside class="card" style="background:#fffbf0;border-left:4px solid #d4a574;">
        <h3>Author's Note</h3>
        <p class="tiny" style="line-height:1.6;color:#5a4a3a;">
          I've sailed this port myself, walked these shores, and these notes come from my own wake. The details reflect what I found on the ground, though ports change—always verify current conditions for your voyage.
        </p>
      </aside>

        <section class="card author-card-vertical" aria-labelledby="author-heading">
      <h3 id="author-heading">About the Author</h3>
      <a href="/authors/ken-baker.html" aria-label="View Ken Baker's profile">
        <picture>
          <source srcset="/authors/img/ken1.webp?v=3.010.400" type="image/webp"/>
          <img class="author-avatar" src="/authors/img/ken1_96.webp" srcset="/authors/img/ken1_96.webp 1x, /authors/img/ken1_192.webp 2x" width="96" height="96" alt="Ken Baker, founder and author of In the Wake cruise travel logbook" decoding="async" loading="lazy"/>
        </picture>
      </a>
      <h4><a href="/authors/ken-baker.html">Ken Baker</a></h4>
      <p class="tiny">Founder of In the Wake; writer and editor of the logbook.</p>
      <p class="tiny">
        <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a>
      </p>
    </section>

    <!-- Nearby Ports Rail -->
    <section class="card" aria-labelledby="nearby-ports-title">
        <h3 id="nearby-ports-title">Nearby Ports</h3>
        <p class="tiny" style="margin-bottom: 0.75rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Other ports in this region:
        </p>
        <div id="nearby-ports" class="rail-list" aria-live="polite"></div>
      </section>

      <!-- Recent Articles rail -->
      <section style="grid-column: 1;" class="card" aria-labelledby="recent-rail-title">
        <h3 id="recent-rail-title">Recent Stories</h3>
        <p class="tiny" style="margin-bottom: 1rem; color: var(--ink-mid, #3d5a6a); line-height: 1.5;">
          Real cruising experiences, practical guides, and heartfelt reflections from our community. Explore stories that inform, inspire, and connect.
        </p>
        <div id="recent-rail" class="rail-list" aria-live="polite"></div>
        <p id="recent-rail-fallback" class="tiny" style="display:none">Loading articles…</p>
      </section>
    
  
    <!-- Whimsical Distance Units -->
    <section class="card" id="whimsical-units-container" style="background:#f7fdff;border:1px solid #e0f0f5;border-radius:12px;padding:1.25rem;">
    </section>

  </aside>

    <p style="margin-top: 2rem;"><a href="/ports.html">&larr; Back to Ports Guide</a></p>

    <!-- Image Attribution Section -->
    <section class="card" style="margin-top: 2rem; background: #f7fdff;">
      <h3>Image Credits</h3>
      <p class="tiny" style="margin-bottom: 0.75rem;">Images from Wikimedia Commons, used under Creative Commons licenses:</p>
      <ul class="tiny" style="line-height: 1.8; padding-left: 1.25rem;">
        <li><strong>Cruise ship in canal:</strong> Photo by Stan Shebs, <a href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</li>
        <li><strong>Passengers enjoying transit:</strong> Photo by Stan Shebs, <a href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</li>
        <li><strong>Canal transit view:</strong> Photo by Stan Shebs, <a href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</li>
        <li><strong>Panama Canal passage:</strong> Photo by Stan Shebs, <a href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a> (CC BY-SA 3.0)</li>
      </ul>
    </section>
  </main>
    <footer class="wrap" role="contentinfo">
    <p>© 2025 In the Wake · A Cruise Traveler's Logbook · All rights reserved.</p>
    <p class="tiny" style="margin-top: 0.5rem;">
      <a href="/privacy.html">Privacy</a> ·
      <a href="/terms.html">Terms</a> ·
      <a href="/about-us.html">About</a> ·
      <a href="/accessibility.html">Accessibility &amp; WCAG 2.1 AA Commitment</a>
    </p>
    <p class="tiny center" style="opacity:0;position:absolute;pointer-events:none;" aria-hidden="true">Soli Deo Gloria — Every pixel and part of this project is offered as worship to God, in gratitude for the beautiful things He has created for us to enjoy. ✝️</p>
  </footer>

  <script>
    // Load recent articles
    (async function() {
      try {
        const response = await fetch('/assets/data/articles/index.json');
        const articles = await response.json();
        const rail = document.getElementById('recent-rail');

        if (rail && articles && articles.length > 0) {
          rail.innerHTML = articles.slice(0, 5).map(article => `
            <div style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #e0e8f0;">
              <h4 style="margin: 0 0 0.25rem; font-size: 0.95rem;">
                <a href="${article.url}">${article.title}</a>
              </h4>
              <p style="margin: 0; font-size: 0.8rem; color: #666;">${article.date}</p>
            </div>
          `).join('');
        }
      } catch (err) {
        console.log('Could not load articles:', err);
      }
    })();
  </script>

  <script>
  (function(){
    "use strict";

    /* ===== Recent Articles Rail ===== */
    (async function recentRail(){
      const rail = document.getElementById('recent-rail');
      if(!rail) return;

      const fallback = document.getElementById('recent-rail-fallback');
      if(fallback) fallback.style.display = '';

      async function fetchJSONWithFallback(urls){
        for (const u of urls){
          try{
            const res = await fetch(u, { credentials: 'omit', cache: 'no-cache' });
            if (res.ok) return await res.json();
          }catch(err){

          }
        }
        return null;
      }

      const pick = (obj, keys, fallback=null)=>{ for(const k of keys){ if(obj && obj[k] != null) return obj[k]; } return fallback; };

      function setImageWithFallback(imgEl, primary, altPaths=[]){
        if(!imgEl) return;
        const stamp='v=3.010.400';
        const tried=new Set();
        const queue=[primary,...altPaths].filter(Boolean).map(p => p.includes('?')?p+'&'+stamp:p+'?'+stamp);
        function tryNext(){
          const next=queue.shift();
          if(!next){ imgEl.removeAttribute && imgEl.removeAttribute('onerror'); return; }
          if(tried.has(next)) return tryNext();
          tried.add(next);
          imgEl.src=next;
        }
        imgEl.onerror=tryNext;
        tryNext();
      }

      const raw = await fetchJSONWithFallback(['/assets/data/articles/index.json','/assets/data/articles.json']);
      if(!raw) {
        if(fallback) {
          fallback.textContent = 'Unable to load articles';
          fallback.style.display = '';
        }
        return;
      }

      const items = Array.isArray(raw?.articles) ? raw.articles : (Array.isArray(raw) ? raw : []);
      if(!items.length) return;

      const here = location.pathname.replace(/\/+$/,'');
      const view = items.filter(p=>{
        const href = pick(p,['url','path'],'#');
        const norm = (href||'').replace(/\/+$/,'');
        return norm && norm !== here;
      }).slice(0,6);

      rail.innerHTML = view.map(p=>{
        const title = pick(p,['title','name'],'Article');
        const href  = pick(p,['url','path'],'#');
        const excerpt = pick(p,['excerpt','description'],'');
        return `
          <article class="card article-card">
            <div class="article-card-grid">
              <div class="article-thumb-wrap">
                <img class="article-thumb" alt="" decoding="async" loading="lazy">
              </div>
              <div class="article-card-body">
                <h4><a href="\${href}">\${title}</a></h4>
                \${excerpt ? `<p class="tiny excerpt">\${excerpt}</p>` : ''}
              </div>
            </div>
            <a href="\${href}" class="pill read-more">Read Article →</a>
          </article>`;
      }).join('');

      const cards = [...rail.querySelectorAll('article.card')];
      cards.forEach((card,i)=>{
        const p = view[i] || {};
        const el = card.querySelector('img.article-thumb');
        const href  = (pick(p,['url','path'],'')||'').toLowerCase();
        const title = (pick(p,['title','name'],'')||'').toLowerCase();

        let primary = pick(p, ['thumb','thumbnail','image','cover','img'], null);

        // FORCE override for Top-20
        if (/(top-20|first-?cruise-?questions)/.test(href) || /top\s*20.*first.*cruise.*questions/.test(title)){
          primary = '/assets/articles/thumbs/top-20-questions/cover.webp';
        }
        // Friendly specifics
        if(!primary && (/freedom-of-your-own-wake/.test(href) || /freedom of your own wake/.test(title))){
          primary = '/assets/articles/thumbs/freedom-of-your-own-wake.webp';
        }
        if(!primary && (/why-i-started-solo-cruising/.test(href) || /why i started solo cruising/.test(title))){
          primary = '/assets/articles/thumbs/why-i-started-solo-cruising.webp';
        }
        if(!primary && (/\/travel(\.html)?$/.test(href) || /\btravel\b/.test(title))){
          primary = '/assets/articles/travel/cover.jpg';
        }

        // Heuristic fallback
        if(!primary){
          const slugify = s => (s||'').toLowerCase().replace(/https?:\/\/[^/]+/,'').replace(/[#?].*$/,'').split('/').filter(Boolean).pop()||'';
          const guess = slugify(href) || slugify(title);
          if(guess) primary = `/assets/articles/\${guess}/cover.jpg`;
        }

        const alts = [];
        if(primary){
          const base = primary.replace(/\.(jpg|jpeg|png|webp)$/i,'');
          alts.push(`\${base}.jpeg`, `\${base}.JPG`, `\${base}.webp`, `\${base}.png`);
        }
        setImageWithFallback(el, primary || '/assets/index_hero.webp', alts);
      });

      if(fallback) fallback.style.display = 'none';

      // Announce to screen readers
      const status = document.getElementById('a11y-status');
      if(status) {
        status.textContent = `\${view.length} recent articles loaded`;
      }
    })();
  })();
  </script>

  <!-- Nearby Ports Script -->
  <script>window.currentPortId = 'panama-canal';</script>
  <script src="/assets/js/nearby-ports.js"></script>

  <!-- Navigation Dropdown Script -->
  <script src="/assets/js/dropdown.js"></script>

  <!-- In-App Browser Detection & Escape Banner -->
  <script src="/assets/js/in-app-browser-escape.js"></script>

  <!-- Whimsical Distance Units Script -->
  <script src="/assets/js/whimsical-port-units.js"></script>

  <!-- Leaflet JS for interactive maps -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="/assets/js/modules/port-map.js"></script>

  <!-- Initialize Panama Canal Port Map -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof PortMap !== 'undefined' && typeof L !== 'undefined') {
      PortMap.init({
        containerId: 'panama-canal-port-map',
        portSlug: 'panama-canal'
      });
    }
  });
  </script>

</body>
</html>
