<!doctype html>
<!--
Soli Deo Gloria
All work on this project is offered as a gift to God.
"Trust in the LORD with all your heart, and do not lean on your own understanding." ‚Äî Proverbs 3:5
"Whatever you do, work heartily, as for the Lord and not for men." ‚Äî Colossians 3:23

STANDARDS: Every Page v3.010.300 ¬∑ Production Template ¬∑ Unified Nav v3.010.300 ¬∑ A11y/WCAG 2.1 AA Compliant
-->
<html lang="en" class="no-js">
<head>
<!-- ai-breadcrumbs
     entity: Stateroom Sanity Check
     type: Information Page
     parent: /
     category: General Information
     updated: 2025-11-15
     expertise: Cruise travel, planning, research
     target-audience: Cruise travelers, vacation planners, research-oriented cruisers
     answer-first: Check your cruise stateroom assignment and get gentle, pastoral guidance about your cabin choice. Know before you sail‚Äîwith peace of mind.
     -->
  <!-- ======================================================
       In the Wake ‚Äî Stateroom Sanity Check
       Version: 1.000.alpha  |  Soli Deo Gloria ‚úùÔ∏è

       ‚úÖ WCAG 2.1 Level AA Compliant
       ‚úÖ SEO Optimized (JSON-LD, OpenGraph, Twitter Cards)
       ‚úÖ Dropdown Menus with Hover Delay (300ms)
       ‚úÖ AI-First SEO with E-E-A-T Person Schema
       ====================================================== -->

  <!-- Core -->
  <meta charset="utf-8"/>
  <script>
    document.documentElement.classList.remove('no-js');
  </script>

  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="referrer" content="no-referrer-when-downgrade"/>
  <meta name="ai-summary" content="Check your cruise stateroom assignment and get gentle, pastoral guidance about your cabin choice. Know before you sail‚Äîwith peace of mind.">
  <meta name="last-reviewed" content="2025-11-19">
  <meta name="content-protocol" content="ICP-Lite v1.0">

  <!-- SEO: Robots & Crawling -->
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1"/>
  <meta name="googlebot" content="index,follow"/>
  <meta name="bingbot" content="index,follow"/>

  <!-- SEO: Theme & Appearance -->
  <meta name="color-scheme" content="light"/>
  <meta name="theme-color" content="#0e6e8e"/>
  <meta name="version" content="1.000.alpha"/>
  <meta name="author" content="In the Wake"/>
  <meta name="publisher" content="In the Wake"/>

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
  <meta name="apple-mobile-web-app-title" content="Stateroom Check"/>

  <!-- Title & SEO -->
  <title>Stateroom Sanity Check ‚Äî Is Your Cabin Choice a Good One? | In the Wake</title>
  <link rel="canonical" href="https://cruisinginthewake.com/stateroom-check.html"/>
  <meta name="description" content="Check your cruise stateroom assignment and get gentle, pastoral guidance about your cabin choice. Know before you sail‚Äîwith peace of mind."/>

  <!-- OpenGraph -->
  <meta property="og:type" content="website"/>
  <meta property="og:site_name" content="In the Wake"/>
  <meta property="og:title" content="Stateroom Sanity Check ‚Äî Is Your Cabin Choice a Good One?"/>
  <meta property="og:description" content="Get encouraging, helpful feedback about your cruise cabin assignment. We'll help you understand your stateroom choice with gentle, pastoral guidance."/>
  <meta property="og:url" content="https://cruisinginthewake.com/stateroom-check.html"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:image" content="https://cruisinginthewake.com/assets/index_hero.webp"/>

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="Stateroom Sanity Check ‚Äî Is Your Cabin a Good Choice?"/>
  <meta name="twitter:description" content="Check your cruise stateroom and get gentle guidance. Is your cabin choice a good one? Find out with peace of mind."/>
  <meta name="twitter:image" content="https://cruisinginthewake.com/assets/index_hero.webp"/>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WZP891PZXJ"></script>
  <script>
    window.dataLayer=window.dataLayer||[];
    function gtag(){dataLayer.push(arguments);}
    gtag('js',new Date());
    gtag('config','G-WZP891PZXJ',{anonymize_ip:true});
  </script>

  <!-- Umami (secondary analytics) -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="9661a449-3ba9-49ea-88e8-4493363578d2"></script>

  <!-- JSON-LD: Organization -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "In the Wake",
    "url": "https://cruisinginthewake.com",
    "logo": "https://cruisinginthewake.com/assets/logo_wake.png"
  }
  </script>

  <!-- JSON-LD: WebSite + SearchAction -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "In the Wake",
    "url": "https://cruisinginthewake.com/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://cruisinginthewake.com/search.html?q={query}",
      "query-input": "required name=query"
    }
  }
  </script>

  <!-- JSON-LD: BreadcrumbList -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://cruisinginthewake.com/"},
      {"@type": "ListItem", "position": 2, "name": "Planning", "item": "https://cruisinginthewake.com/planning.html"},
      {"@type": "ListItem", "position": 3, "name": "Stateroom Check", "item": "https://cruisinginthewake.com/stateroom-check.html"}
    ]
  }
  </script>

  <!-- JSON-LD: Person (E-E-A-T) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Ken Baker",
    "url": "https://cruisinginthewake.com/authors/ken-baker.html",
    "jobTitle": "Founder and Editor",
    "description": "Traveler, pastor, and storyteller. Founder of In the Wake, a cruise traveler's logbook offering planning tools, travel tips, and faith-scented reflections for smoother sailings.",
    "image": "https://cruisinginthewake.com/authors/img/ken1.webp",
    "sameAs": ["https://www.flickersofmajesty.com"],
    "worksFor": {"@type": "Organization", "name": "In the Wake"},
    "knowsAbout": ["Cruise Planning", "Royal Caribbean", "Cruise Ships", "Travel Writing"]
  }
  </script>

  <!-- JSON-LD: WebPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Stateroom Sanity Check",
  "url": "https://cruisinginthewake.com/stateroom-check.html",
  "description": "Check your cruise stateroom assignment and get gentle, pastoral guidance about your cabin choice. Know before you sail\u2014with peace of mind."
}
  </script><!-- Favicon / PWA -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/in_the_wake_icon_32x32.png"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png"/>
  <link rel="manifest" href="/manifest.webmanifest"/>

  <!-- Global CSS -->
  <link rel="stylesheet" href="/assets/styles.css?v=3.010.300"/>

  <!-- Page-specific CSS -->
  <!-- JSON-LD: FAQPage (ICP-Lite) -->
  <script type="application/ld+json">
  {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What information does this page provide?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This page provides planning resources and information about stateroom sanity check."
      }
    },
    {
      "@type": "Question",
      "name": "Is this information official?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This page provides community insights. Always confirm with your cruise line before making decisions."
      }
    }
  ]
}
  </script>

  <!-- LCP Optimization: Preload critical hero images -->
  <link rel="preload" as="image" href="/assets/logo_wake_560.png" fetchpriority="high"/>
  <link rel="preload" as="image" href="/assets/compass_rose.svg?v=3.010.300" fetchpriority="high"/>
</head>

<body class="page">
  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- ARIA Live Regions -->
  <div id="a11y-status" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
  <div id="a11y-alerts" role="alert" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

  <!-- HEADER -->
  <header class="hero-header" role="banner">
    <div class="navbar">
      <!-- Navigation with Dropdown Menus -->

      <div class="brand">
        <img src="/assets/logo_wake_256.png" srcset="/assets/logo_wake_256.png 1x, /assets/logo_wake_512.png 2x" width="256" height="259" alt="In the Wake wordmark" decoding="async"/>
        <span class="tiny version-badge" aria-label="Site version V1.Beta">V1.Beta</span>
      </div>
            <nav class="site-nav" aria-label="Main site navigation">
        <a class="nav-pill" href="/">Home</a>

        <!-- Planning Dropdown -->
        <div class="nav-dropdown" id="nav-planning">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Planning <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/planning.html">Planning (overview)</a>
            <a href="/ships.html">Ships</a>
            <a href="/restaurants.html">Restaurants &amp; Menus</a>
            <a href="/ports.html">Ports</a>
            <a href="/drink-packages.html">Drink Packages</a>
            <a href="/drink-calculator.html">Drink Calculator</a>
            <a href="/stateroom-check.html">Stateroom Check</a>
            <a href="/cruise-lines.html">Cruise Lines</a>
            <a href="/packing-lists.html">Packing Lists</a>
            <a href="/accessibility.html">Accessibility</a>
          </div>
        </div>

        <!-- Travel Dropdown -->
        <div class="nav-dropdown" id="nav-travel">
          <button class="nav-pill" type="button" aria-expanded="false" aria-haspopup="true">
            Travel <span class="caret">&#9662;</span>
          </button>
          <div class="dropdown-menu" role="menu">
            <a href="/travel.html">Travel (overview)</a>
            <a href="/solo.html">Solo</a>
          </div>
        </div>

        <a class="nav-pill" href="/tools/port-tracker.html">Port Logbook</a>
        <a class="nav-pill" href="/tools/ship-tracker.html">Ship Logbook</a>
        <a class="nav-pill" href="/search.html">Search</a>
        <a class="nav-pill" href="/about-us.html">About</a>
      </nav>
      
    </div>

    <div class="hero" role="img" aria-label="Ship wake at sunrise">
      <div class="latlon-grid" aria-hidden="true">
        <svg viewBox="0 0 100 60" preserveAspectRatio="none">
          <g class="grid-lines" stroke-width="0.35">
            <line x1="10" y1="0" x2="10" y2="60"/><line x1="20" y1="0" x2="20" y2="60"/>
            <line x1="30" y1="0" x2="30" y2="60"/><line x1="40" y1="0" x2="40" y2="60"/>
            <line x1="50" y1="0" x2="50" y2="60"/><line x1="60" y1="0" x2="60" y2="60"/>
            <line x1="70" y1="0" x2="70" y2="60"/><line x1="80" y1="0" x2="80" y2="60"/>
            <line x1="90" y1="0" x2="90" y2="60"/>
            <line x1="0" y1="10" x2="100" y2="10"/><line x1="0" y1="20" x2="100" y2="20"/>
            <line x1="0" y1="30" x2="100" y2="30"/><line x1="0" y1="40" x2="100" y2="40"/>
          </g>
        </svg>
      </div>
      <img class="hero-compass" src="/assets/compass_rose.svg?v=3.010.300" width="180" height="180" alt="" aria-hidden="true" decoding="async"/>
      <div class="hero-title">
        <img class="logo" src="/assets/logo_wake_560.png" srcset="/assets/logo_wake_560.png 1x, /assets/logo_wake_1120.png 2x" alt="In the Wake" decoding="async" fetchpriority="high" width="560" height="567"/>
      </div>
      <div class="tagline" aria-hidden="true">A Cruise Traveler's Logbook</div>
      <div class="hero-credit">
        <a class="pill long" href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Photo ¬© Flickers of Majesty</a>
      </div>
    </div></header>

  <!-- MAIN CONTENT -->
  <main class="wrap page-grid" id="main-content" role="main" tabindex="-1">
    <div class="stateroom-check-container col-1">
    <!-- ICP-Lite Content Structure -->
    <section class="page-intro">
      <p class="answer-line">
        <strong>Quick Answer:</strong> This page provides cruise planning resources for Stateroom Sanity Check. Use the information below to help plan your cruise vacation.
      </p>

      <p class="content-text">
        <strong>Best For:</strong> Cruisers researching stateroom sanity check, comparing options, and gathering information for trip planning.
      </p>

      <div class="callout-box">
        <h3 class="mt-0 mb-05">Key Facts</h3>
        <ul class="list-indent">
          <li><strong>Topic:</strong> Stateroom Sanity Check</li>
          <li><strong>Purpose:</strong> Cruise planning resource</li>
        </ul>
      </div>
    </section>

    <!-- Introduction -->
    <section class="intro-section">
      <h1>Stateroom Sanity Check</h1>
      <p class="tagline">Gentle guidance for your cabin choice‚Äîknow before you sail.</p>
      <p>Enter your cabin number below and we'll help you understand what makes your stateroom special. Most rooms are wonderful choices‚Äîand if there's anything to know, we'll share it gently.</p>
    </section>

    <!-- Data Disclaimer -->
    <section class="intro-section callout-box">
      <h2 class="mb-05">About Our Data</h2>
      <p class="content-text mb-05">
        This tool uses crowd-sourced data from cruise communities like CruiseCritic, Reddit, CruiseMummy, and RoyalCaribbeanBlog. Each report is AI-verified and scored for trust and consensus, but individual experiences can vary. We don't guarantee that every cabin will match these patterns‚Äîyour experience may differ based on weather, sailing season, and personal sensitivity.
      </p>
      <p class="content-text mb-0">
        <strong>Found an exception we missed?</strong> We'd love to hear from you. <a href="mailto:contact@cruisinginthewake.com?subject=Stateroom Exception Report">Email us your cabin experience</a> and help us improve this tool for the community.
      </p>
    </section>

    <!-- PWA Install Prompt (Offline Mode) -->
    <section id="pwa-install-banner" class="intro-section pwa-banner hidden">
      <h2 class="mb-05">üì± Planning to Book Onboard?</h2>
      <p class="content-text mb-05">
        Take this tool with you offline! When you book your next cruise at the next cruise desk, you'll have instant cabin insights‚Äîno WiFi or ship internet needed.
      </p>
      <p class="tiny mb-05">
        <strong>What happens when you install:</strong> Your phone downloads this page and all ship cabin data (~500KB total). You get an app icon on your home screen that works completely offline. No tracking, no permissions, no internet required‚Äîjust instant cabin checking whenever you need it.
      </p>
      <button id="pwa-install-button" class="pwa-install-btn mb-05">
        Install Offline App
      </button>
      <p id="pwa-status" class="tiny mt-05"></p>
    </section>

    <!-- Offline Status Indicator -->
    <div id="offline-indicator" class="offline-indicator hidden">
      üìµ You're offline ‚Äì but this tool still works! All ship data is cached on your device.
    </div>

    <!-- Check Form -->
    <section class="check-form" aria-labelledby="form-heading">
      <h2 id="form-heading" class="sr-only">Check Your Stateroom</h2>

      <form id="stateroom-form" novalidate>
        <!-- Cruise Line Selection (locked to Royal Caribbean) -->
        <div class="form-group">
          <label for="cruise-line-select">Cruise Line</label>
          <select id="cruise-line-select" name="cruise-line" required disabled>
            <option value="royal-caribbean" selected>Royal Caribbean</option>
          </select>
          <p class="help-text">Currently supporting Royal Caribbean ships. More cruise lines coming soon!</p>
        </div>

        <!-- Ship Class Selection -->
        <div class="form-group">
          <label for="ship-class-select">Ship Class</label>
          <select id="ship-class-select" name="ship-class" required>
            <option value="">Choose a ship class...</option>
            <option value="icon-class">Icon Class (Newest - 2024+)</option>
            <option value="oasis-class">Oasis Class (Largest - 2009-2024)</option>
            <option value="quantum-class">Quantum Class (High-Tech - 2014-2020)</option>
            <option value="freedom-class">Freedom Class (Mid-Size Evolution - 2006-2008)</option>
            <option value="radiance-class">Radiance Class (Scenic Views - 2001-2004)</option>
            <option value="vision-class">Vision Class (Classic - 1995-1998)</option>
            <option value="voyager-class">Voyager Class (Original Promenade - 1999-2004)</option>
          </select>
          <p class="help-text">Select your ship's class to filter available ships</p>
        </div>

        <!-- Ship Selection (filtered by class) -->
        <div class="form-group">
          <label for="ship-select">Select Your Ship</label>
          <select id="ship-select" name="ship" required disabled>
            <option value="">Select a class first...</option>
          </select>
          <p class="help-text" id="ship-help-text">Choose a ship class above to see available ships</p>
          <p class="help-text mt-05"><em>
            <strong>Sailing on a brand-new ship?</strong> Cabin feedback takes time to gather‚Äîusually 6-12 months after a ship's debut.
            Until then, choose a sister ship in the same class for guidance. Ships within a class share nearly identical layouts.
          </em></p>
        </div>

        <div class="form-group">
          <label for="cabin-input">Your Cabin Number</label>
          <input
            type="text"
            id="cabin-input"
            name="cabin"
            placeholder="e.g., 8234"
            pattern="[0-9]+"
            required
            aria-describedby="cabin-help"
          />
          <p id="cabin-help" class="help-text">Enter your cabin number (numbers only)</p>
        </div>

        <div class="form-group">
          <label for="traveler-select">I'm Traveling As...</label>
          <select id="traveler-select" name="traveler_type" required>
            <option value="couple" selected>Traveling as a Couple</option>
            <option value="solo">Traveling Solo</option>
            <option value="family">Family With Kids</option>
            <option value="light-sleeper">Light Sleeper</option>
            <option value="motion-sensitive">Prone to Motion Sickness</option>
          </select>
          <p class="help-text">This helps us tailor the guidance to your needs</p>
        </div>

        <button type="submit" class="submit-btn" id="submit-btn">
          Check My Stateroom
        </button>
      </form>
    </section>

    <!-- Results Container -->
    <div id="results-container" class="results-container" role="region" aria-label="Stateroom check results">
      <!-- Results will be injected here by JavaScript -->
    </div>

    <!-- ICP-Lite FAQ Section -->
    <section class="card mt-15" id="faq" aria-labelledby="faq-heading">
      <h2 id="faq-heading">Frequently Asked Questions</h2>

      <details class="faq-item">
        <summary>What information does this page provide?</summary>
        <p class="faq-answer">This page provides planning resources and information about stateroom sanity check. Use it alongside official cruise line resources when planning your trip.</p>
      </details>

      <details class="faq-item">
        <summary>Is this information official?</summary>
        <p class="faq-answer">This page provides community insights and planning resources. Always confirm details with your cruise line or travel advisor before making final decisions.</p>
      </details>

      <details class="faq-item">
        <summary>How can I get more help?</summary>
        <p class="faq-answer">For additional assistance, contact your cruise line directly or work with a travel advisor who specializes in cruises.</p>
      </details>
    </section>
    </div>

    <aside class="rail col-2" role="complementary">
      <!-- Author Card -->
      <section class="card author-card-vertical" aria-labelledby="author-heading">
        <h3 id="author-heading">About the Author</h3>
        <a href="/authors/ken-baker.html" aria-label="View Ken Baker's profile">
          <picture>
            <source srcset="/authors/img/ken1.webp?v=3.010.300" type="image/webp"/>
            <img class="author-avatar rounded-lg" src="/authors/img/ken1_96.webp" srcset="/authors/img/ken1_96.webp 1x, /authors/img/ken1_192.webp 2x" width="96" height="96" alt="Author photo" decoding="async" loading="lazy"/>
          </picture>
        </a>
        <h4><a href="/authors/ken-baker.html">Ken Baker</a></h4>
        <p class="tiny">Founder of In the Wake; writer and editor of the logbook.</p>
        <p class="tiny">
          <a href="https://www.flickersofmajesty.com" target="_blank" rel="noopener">Flickers of Majesty</a>
        </p>
      </section>

      <!-- Recent Articles rail -->
      <section class="card" aria-labelledby="recent-rail-title">
        <h3 id="recent-rail-title">Recent Stories</h3>
        <p class="tiny content-text mb-1">
          Real cruising experiences, practical guides, and heartfelt reflections from our community. Explore stories that inform, inspire, and connect.
        </p>
        <div id="recent-rail" class="rail-list" aria-live="polite"></div>
        <p id="recent-rail-fallback" class="tiny hidden">Loading articles‚Ä¶</p>
      </section>
    </aside>
</main>

  <!-- FOOTER -->
    <footer class="wrap" role="contentinfo">
    <p>¬© 2025 In the Wake ¬∑ A Cruise Traveler's Logbook ¬∑ All rights reserved.</p>
    <p class="tiny mt-05">
      <a href="/privacy.html">Privacy</a> ¬∑
      <a href="/terms.html">Terms</a> ¬∑
      <a href="/about-us.html">About</a> ¬∑
      <a href="/accessibility.html">Accessibility &amp; WCAG 2.1 AA Commitment</a>
    </p>
    <p class="tiny center visually-hidden" aria-hidden="true">Soli Deo Gloria ‚Äî Every pixel and part of this project is offered as worship to God, in gratitude for the beautiful things He has created for us to enjoy. ‚úùÔ∏è</p>
  </footer>

  <!-- JAVASCRIPT -->

  <!-- Stateroom Check Engine -->
  <script src="/assets/js/stateroom-check.js?v=1.000.alpha"></script>

  <!-- Navigation Dropdown Script -->
  <script src="/assets/js/dropdown.js"></script>

  <!-- In-App Browser Detection & Escape Banner -->
  <script src="/assets/js/in-app-browser-escape.js"></script>

<!-- Form Handler -->
  <script>
  (function() {
    'use strict';

    const form = document.getElementById('stateroom-form');
    const submitBtn = document.getElementById('submit-btn');
    const resultsContainer = document.getElementById('results-container');
    const a11yStatus = document.getElementById('a11y-status');

    if (!form || !window.StateroomCheck) {

      return;
    }

    form.addEventListener('submit', async function(e) {
      e.preventDefault();

      // Get form values
      const shipSlug = document.getElementById('ship-select').value;
      const cabinNum = document.getElementById('cabin-input').value.trim();
      const travelerType = document.getElementById('traveler-select').value;

      // Validate
      if (!shipSlug || !cabinNum) {
        resultsContainer.innerHTML = `
          <div class="error-message" role="alert">
            <p>‚ö†Ô∏è Please select a ship and enter a cabin number.</p>
          </div>
        `;
        return;
      }

      // Show loading
      submitBtn.disabled = true;
      submitBtn.textContent = 'Checking...';
      resultsContainer.innerHTML = '<div class="loading-message">Checking your stateroom...</div>';

      // Announce to screen readers
      if (a11yStatus) {
        a11yStatus.textContent = 'Checking stateroom, please wait';
      }

      try {
        // Perform check
        const result = await window.StateroomCheck.check(shipSlug, cabinNum, travelerType);

        // Render result
        window.StateroomCheck.render(result, resultsContainer);

        // Announce result
        if (a11yStatus && result.success) {
          a11yStatus.textContent = `Result ready: ${result.verdict.title}`;
        }

      } catch (error) {

        resultsContainer.innerHTML = `
          <div class="error-message" role="alert">
            <p>‚ö†Ô∏è Something went wrong. Please try again.</p>
          </div>
        `;
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Check My Stateroom';
      }
    });

    // Auto-focus cabin input on page load
    setTimeout(() => {
      document.getElementById('cabin-input')?.focus();
    }, 100);

  })();
  </script>

  <script>
  (function(){
    "use strict";

    /* ===== Recent Articles Rail ===== */
    (async function recentRail(){
      const rail = document.getElementById('recent-rail');
      if(!rail) return;

      const fallback = document.getElementById('recent-rail-fallback');
      if(fallback) fallback.style.display = '';

      async function fetchJSONWithFallback(urls){
        for (const u of urls){
          try{
            const res = await fetch(u, { credentials: 'omit', cache: 'no-cache' });
            if (res.ok) return await res.json();
          }catch(err){

          }
        }
        return null;
      }

      const pick = (obj, keys, fallback=null)=>{ for(const k of keys){ if(obj && obj[k] != null) return obj[k]; } return fallback; };

      function setImageWithFallback(imgEl, primary, altPaths=[]){
        if(!imgEl) return;
        const stamp='v=3.010.300';
        const tried=new Set();
        const queue=[primary,...altPaths].filter(Boolean).map(p => p.includes('?')?p+'&'+stamp:p+'?'+stamp);
        function tryNext(){
          const next=queue.shift();
          if(!next){ imgEl.removeAttribute && imgEl.removeAttribute('onerror'); return; }
          if(tried.has(next)) return tryNext();
          tried.add(next);
          imgEl.src=next;
        }
        imgEl.onerror=tryNext;
        tryNext();
      }

      const raw = await fetchJSONWithFallback(['/assets/data/articles/index.json','/assets/data/articles.json']);
      if(!raw) {
        if(fallback) {
          fallback.textContent = 'Unable to load articles';
          fallback.style.display = '';
        }
        return;
      }

      const items = Array.isArray(raw?.articles) ? raw.articles : (Array.isArray(raw) ? raw : []);
      if(!items.length) return;

      const here = location.pathname.replace(/\/+$/,'');
      const view = items.filter(p=>{
        const href = pick(p,['url','path'],'#');
        const norm = (href||'').replace(/\/+$/,'');
        return norm && norm !== here;
      }).slice(0,6);

      rail.innerHTML = view.map(p=>{
        const title = pick(p,['title','name'],'Article');
        const href  = pick(p,['url','path'],'#');
        const excerpt = pick(p,['excerpt','description'],'');
        return `
          <article class="card article-card">
            <div class="article-card-grid">
              <div class="article-thumb-wrap">
                <img class="article-thumb" alt="" decoding="async" loading="lazy">
              </div>
              <div class="article-card-body">
                <h4><a href="\${href}">\${title}</a></h4>
                \${excerpt ? `<p class="tiny excerpt">\${excerpt}</p>` : ''}
              </div>
            </div>
            <a href="\${href}" class="pill read-more">Read Article ‚Üí</a>
          </article>`;
      }).join('');

      const cards = [...rail.querySelectorAll('article.card')];
      cards.forEach((card,i)=>{
        const p = view[i] || {};
        const el = card.querySelector('img.article-thumb');
        const href  = (pick(p,['url','path'],'')||'').toLowerCase();
        const title = (pick(p,['title','name'],'')||'').toLowerCase();

        let primary = pick(p, ['thumb','thumbnail','image','cover','img'], null);

        // FORCE override for Top-20
        if (/(top-20|first-?cruise-?questions)/.test(href) || /top\s*20.*first.*cruise.*questions/.test(title)){
          primary = '/assets/articles/thumbs/top-20-questions/cover.webp';
        }
        // Friendly specifics
        if(!primary && (/freedom-of-your-own-wake/.test(href) || /freedom of your own wake/.test(title))){
          primary = '/assets/articles/thumbs/freedom-of-your-own-wake.webp';
        }
        if(!primary && (/why-i-started-solo-cruising/.test(href) || /why i started solo cruising/.test(title))){
          primary = '/assets/articles/thumbs/why-i-started-solo-cruising.webp';
        }
        if(!primary && (/\/travel(\.html)?$/.test(href) || /\btravel\b/.test(title))){
          primary = '/assets/articles/travel/cover.jpg';
        }

        // Heuristic fallback
        if(!primary){
          const slugify = s => (s||'').toLowerCase().replace(/https?:\/\/[^/]+/,'').replace(/[#?].*$/,'').split('/').filter(Boolean).pop()||'';
          const guess = slugify(href) || slugify(title);
          if(guess) primary = `/assets/articles/\${guess}/cover.jpg`;
        }

        const alts = [];
        if(primary){
          const base = primary.replace(/\.(jpg|jpeg|png|webp)$/i,'');
          alts.push(`\${base}.jpeg`, `\${base}.JPG`, `\${base}.webp`, `\${base}.png`);
        }
        setImageWithFallback(el, primary || '/assets/index_hero.webp', alts);
      });

      if(fallback) fallback.style.display = 'none';

      // Announce to screen readers
      const status = document.getElementById('a11y-status');
      if(status) {
        status.textContent = `\${view.length} recent articles loaded`;
      }
    })();
  })();
  </script>

  <!-- PWA & Cascading Dropdowns -->
  <script>
  (function() {
    'use strict';

    // ===== SHIP CLASS MAPPING =====
    const SHIP_CLASSES = {
      'icon-class': [
        { value: 'icon-of-the-seas', label: 'Icon of the Seas' },
        { value: 'star-of-the-seas', label: 'Star of the Seas' }
      ],
      'oasis-class': [
        { value: 'allure-of-the-seas', label: 'Allure of the Seas' },
        { value: 'harmony-of-the-seas', label: 'Harmony of the Seas' },
        { value: 'oasis-of-the-seas', label: 'Oasis of the Seas' },
        { value: 'symphony-of-the-seas', label: 'Symphony of the Seas' },
        { value: 'utopia-of-the-seas', label: 'Utopia of the Seas' },
        { value: 'wonder-of-the-seas', label: 'Wonder of the Seas' }
      ],
      'quantum-class': [
        { value: 'anthem-of-the-seas', label: 'Anthem of the Seas' },
        { value: 'odyssey-of-the-seas', label: 'Odyssey of the Seas' },
        { value: 'ovation-of-the-seas', label: 'Ovation of the Seas' },
        { value: 'quantum-of-the-seas', label: 'Quantum of the Seas' },
        { value: 'spectrum-of-the-seas', label: 'Spectrum of the Seas' }
      ],
      'freedom-class': [
        { value: 'freedom-of-the-seas', label: 'Freedom of the Seas' },
        { value: 'independence-of-the-seas', label: 'Independence of the Seas' },
        { value: 'liberty-of-the-seas', label: 'Liberty of the Seas' }
      ],
      'radiance-class': [
        { value: 'brilliance-of-the-seas', label: 'Brilliance of the Seas' },
        { value: 'jewel-of-the-seas', label: 'Jewel of the Seas' },
        { value: 'radiance-of-the-seas', label: 'Radiance of the Seas' },
        { value: 'serenade-of-the-seas', label: 'Serenade of the Seas' }
      ],
      'vision-class': [
        { value: 'enchantment-of-the-seas', label: 'Enchantment of the Seas' },
        { value: 'grandeur-of-the-seas', label: 'Grandeur of the Seas' },
        { value: 'vision-of-the-seas', label: 'Vision of the Seas' }
      ],
      'voyager-class': [
        { value: 'adventure-of-the-seas', label: 'Adventure of the Seas' },
        { value: 'explorer-of-the-seas', label: 'Explorer of the Seas' },
        { value: 'mariner-of-the-seas', label: 'Mariner of the Seas' },
        { value: 'navigator-of-the-seas', label: 'Navigator of the Seas' },
        { value: 'voyager-of-the-seas', label: 'Voyager of the Seas' }
      ]
    };

    // ===== CASCADING DROPDOWNS =====
    const classSelect = document.getElementById('ship-class-select');
    const shipSelect = document.getElementById('ship-select');
    const shipHelpText = document.getElementById('ship-help-text');

    classSelect.addEventListener('change', function() {
      const selectedClass = this.value;

      // Clear existing ship options
      shipSelect.innerHTML = '<option value="">Choose a ship...</option>';

      if (!selectedClass) {
        shipSelect.disabled = true;
        shipHelpText.textContent = 'Choose a ship class above to see available ships';
        return;
      }

      // Populate ships for selected class
      const ships = SHIP_CLASSES[selectedClass] || [];
      ships.forEach(ship => {
        const option = document.createElement('option');
        option.value = ship.value;
        option.textContent = ship.label;
        shipSelect.appendChild(option);
      });

      shipSelect.disabled = false;
      shipHelpText.textContent = `${ships.length} ship${ships.length !== 1 ? 's' : ''} in this class`;
    });

    // ===== SERVICE WORKER REGISTRATION =====
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('[PWA] Service Worker registered:', registration.scope);
          })
          .catch(error => {
            console.log('[PWA] Service Worker registration failed:', error);
          });
      });
    }

    // ===== PWA INSTALL PROMPT =====
    let deferredPrompt = null;
    const installBanner = document.getElementById('pwa-install-banner');
    const installButton = document.getElementById('pwa-install-button');
    const pwaStatus = document.getElementById('pwa-status');

    // Listen for beforeinstallprompt event
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;

      // Show install banner
      if (installBanner) {
        installBanner.classList.remove('hidden');
      }
    });

    // Handle install button click
    if (installButton) {
      installButton.addEventListener('click', async () => {
        if (!deferredPrompt) {
          pwaStatus.textContent = 'App already installed or not available for installation.';
          return;
        }

        // Show install prompt
        deferredPrompt.prompt();

        // Wait for user response
        const { outcome } = await deferredPrompt.userChoice;

        if (outcome === 'accepted') {
          pwaStatus.textContent = '‚úÖ Installing... You\'ll see an app icon shortly!';
          pwaStatus.style.color = '#2d7a3d';
        } else {
          pwaStatus.textContent = 'Installation cancelled. You can install later from your browser menu.';
        }

        // Clear the prompt
        deferredPrompt = null;

        // Hide banner after 3 seconds
        setTimeout(() => {
          if (installBanner) {
            installBanner.classList.add('hidden');
          }
        }, 3000);
      });
    }

    // ===== OFFLINE DETECTION =====
    const offlineIndicator = document.getElementById('offline-indicator');

    function updateOnlineStatus() {
      if (!navigator.onLine && offlineIndicator) {
        offlineIndicator.classList.remove('hidden');
      } else if (offlineIndicator) {
        offlineIndicator.classList.add('hidden');
      }
    }

    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);

    // Check initial status
    updateOnlineStatus();

    // ===== APP INSTALLED DETECTION =====
    window.addEventListener('appinstalled', () => {
      console.log('[PWA] App installed successfully');
      if (installBanner) {
        installBanner.classList.add('hidden');
      }
    });

    // Hide banner if already in standalone mode (already installed)
    if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone) {
      if (installBanner) {
        installBanner.classList.add('hidden');
      }
    }

  })();
  </script>

</body>
</html>
